var Xe={},Nc=(Ws,en,Va)=>(Xe.__chunk_70767=(qe,be,L)=>{L.d(be,{FG:()=>N,Hn:()=>u,Ht:()=>y,Ib:()=>E,ib:()=>S});var B=L(70943),ie=L(40439),Z=L(48270);let re="app:api-access-keys";async function z(){let m=await Z.Yh.get(re);if(!m)return[];try{let v=typeof m=="string"?JSON.parse(m):m;return Array.isArray(v)?v.filter(A=>!!A&&typeof A=="object"&&typeof A.id=="string"&&typeof A.email=="string"&&typeof A.hash=="string"&&typeof A.createdAt=="string"&&typeof A.createdBy=="string").map(A=>({id:A.id,email:A.email.trim().toLowerCase(),hash:A.hash,createdAt:A.createdAt,createdBy:A.createdBy})):[]}catch{return[]}}async function ne(m){await Z.Yh.set(re,JSON.stringify(m))}function K(m){return m.trim().toLowerCase()}function R(m){let v=new TextEncoder;return(0,ie.My)((0,B.sc)(v.encode(m)))}function pe(m){let v=new TextEncoder;return(0,ie.My)((0,B.sc)(v.encode(`access-key:${m}`)))}async function N(m){let v=K(m.email);if(!v)throw Error("\u90AE\u7BB1\u4E0D\u80FD\u4E3A\u7A7A");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v))throw Error("\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740");let A=await z();if(A.some(M=>M.email===v))throw Error("\u8BE5\u90AE\u7BB1\u5DF2\u751F\u6210\u8FC7\u8BBF\u95EE\u5BC6\u94A5");let le=R(v),Ee=pe(le),V={id:crypto.randomUUID(),email:v,hash:Ee,createdAt:new Date().toISOString(),createdBy:m.createdBy};return await ne([...A,V]),{record:V,accessKey:le}}async function S(m){let v=(await z()).filter(A=>A.id!==m);await ne(v)}async function E(m){let v=(await z()).find(le=>le.id===m);if(!v)return null;let A=R(v.email);return{record:v,accessKey:A}}async function u(m){let v=K(m.email);if(!v)throw Error("\u90AE\u7BB1\u4E0D\u80FD\u4E3A\u7A7A");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v))throw Error("\u8BF7\u8F93\u5165\u6709\u6548\u7684\u90AE\u7BB1\u5730\u5740");let A=await z(),le=A.findIndex(ae=>ae.id===m.id);if(le===-1)throw Error("\u672A\u627E\u5230\u6307\u5B9A\u7684\u5BC6\u94A5\u8BB0\u5F55");if(A.some((ae,Te)=>Te!==le&&ae.email===v))throw Error("\u8BE5\u90AE\u7BB1\u5DF2\u751F\u6210\u8FC7\u8BBF\u95EE\u5BC6\u94A5");let Ee=R(v),V=pe(Ee),M=A[le];if(!M)throw Error("\u672A\u627E\u5230\u6307\u5B9A\u7684\u5BC6\u94A5\u8BB0\u5F55");let j={...M,email:v,hash:V,createdAt:M.createdAt,createdBy:M.createdBy},D=[...A];return D[le]=j,await ne(D),{record:j,accessKey:Ee}}async function f(m){let v=K(m);if(!v)return null;let A=(await z()).find(le=>le.email===v);return A?{record:A,accessKey:R(A.email)}:null}async function y(m){return await f(m.email)||N({email:m.email,createdBy:m.createdBy})}},Xe.__chunk_48270=(qe,be,L)=>{L.d(be,{Yh:()=>re});var B=L(12585),ie=L(7325);let Z=null,re=Z=function(){if(!ie._.UPSTASH_REDIS_URL||!ie._.UPSTASH_REDIS_TOKEN)throw Error("[redis] \u8BF7\u5728\u73AF\u5883\u53D8\u91CF\u4E2D\u914D\u7F6E UPSTASH_REDIS_URL \u4E0E UPSTASH_REDIS_TOKEN\u3002");if(!ie._.UPSTASH_REDIS_URL.startsWith("https://"))throw Error("[redis] UPSTASH_REDIS_URL \u5FC5\u987B\u662F Upstash \u63D0\u4F9B\u7684 HTTPS REST \u5730\u5740\u3002");return new B.Q({url:ie._.UPSTASH_REDIS_URL,token:ie._.UPSTASH_REDIS_TOKEN,retry:{retries:3,backoff:z=>50*Math.exp(z)},automaticDeserialization:!0})}()},Xe.__chunk_21754=(qe,be,L)=>{L.d(be,{q:()=>z,r:()=>ne});var B=L(48270);let ie="app:token-pricing";function Z(K){return Math.round(100*K)/100}async function re(){let K=await B.Yh.get(ie);if(!K)return null;try{let R=typeof K=="string"?JSON.parse(K):K;if(R&&typeof R.pricePerThousandTokens=="number"&&typeof R.updatedAt=="string"&&typeof R.updatedBy=="string")return{pricePerThousandTokens:Z(R.pricePerThousandTokens),updatedAt:R.updatedAt,updatedBy:R.updatedBy}}catch{}return null}async function z(){return await re()||{pricePerThousandTokens:Z(1),updatedAt:new Date(0).toISOString(),updatedBy:"system"}}async function ne(K){let R=Z(K.pricePerThousandTokens);if(!Number.isFinite(R)||R<=0)throw Error("\u4EF7\u683C\u5FC5\u987B\u5927\u4E8E 0");let pe={pricePerThousandTokens:R,updatedAt:new Date().toISOString(),updatedBy:K.updatedBy};return await B.Yh.set(ie,JSON.stringify(pe)),pe}},Xe.__chunk_4942=(qe,be,L)=>{L.d(be,{j2:()=>E});var B=L(10028),ie=L(80485),Z=L(80458),re=L(7325),z=L(48270);let ne=re._.ADMIN_PORTAL_USERNAME??"admin",K=re._.ADMIN_PORTAL_PASSWORD??"admin123",R={id:"admin",name:"Administrator",email:`${ne}@local.dev`,role:"admin"};async function pe(y){let m=`${ne}@local.dev`;y.getUserByEmail&&y.createUser&&(await y.getUserByEmail(m)||await y.createUser({id:R.id,name:R.name,email:m,emailVerified:new Date,role:R.role}))}let N=(0,B.hr)(z.Yh);pe(N).catch(y=>{console.error("[auth] failed to seed admin user",y)});let{handlers:S,auth:E,signIn:u,signOut:f}=(0,ie.Ay)({providers:[(0,Z.A)({id:"admin-credentials",name:"Admin",credentials:{username:{label:"Username",type:"text",placeholder:"admin"},password:{label:"Password",type:"password"}},async authorize(y){let m=typeof y?.username=="string"?y.username.trim():"",v=typeof y?.password=="string"?y.password:"";return m&&v&&m===ne&&v===K?R:null}}),(0,Z.A)({id:"email-login",name:"Email",credentials:{email:{label:"Email",type:"email",placeholder:"you@example.com"}},async authorize(y){let m=typeof y?.email=="string"?y.email.trim().toLowerCase():"";return!m||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m)?null:await N.getUserByEmail?.(m)||(await N.createUser?.({id:crypto.randomUUID(),email:m,emailVerified:new Date,role:"user"})??null)}})],adapter:N,pages:{signIn:"/login",error:"/auth/error",verifyRequest:"/verify-request"},secret:re._.AUTH_SECRET,session:{strategy:"jwt"},callbacks:{jwt:async({token:y,user:m})=>(m?y.role=m.role==="admin"?"admin":"user":y.role||(y.role="user"),y),async session({session:y,token:m}){if(y.user){m.sub&&(y.user.id=m.sub);let v=m.role==="admin"?"admin":"user";y.user.role=v,y.user.isAdmin=v==="admin"}return y}}})},Xe.__chunk_98849=(qe,be,L)=>{"use strict";function B(Z){let re={},z=[];if(Z)for(let[ne,K]of Z.entries())ne.toLowerCase()==="set-cookie"?(z.push(...function(R){var pe,N,S,E,u,f=[],y=0;function m(){for(;y<R.length&&/\s/.test(R.charAt(y));)y+=1;return y<R.length}for(;y<R.length;){for(pe=y,u=!1;m();)if((N=R.charAt(y))===","){for(S=y,y+=1,m(),E=y;y<R.length&&(N=R.charAt(y))!=="="&&N!==";"&&N!==",";)y+=1;y<R.length&&R.charAt(y)==="="?(u=!0,y=E,f.push(R.substring(pe,S)),pe=y):y=S+1}else y+=1;(!u||y>=R.length)&&f.push(R.substring(pe,R.length))}return f}(K)),re[ne]=z.length===1?z[0]:z):re[ne]=K;return re}function ie(Z){try{return String(new URL(String(Z)))}catch(re){throw Object.defineProperty(Error(`URL is malformed "${String(Z)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:re}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}L.d(be,{Cu:()=>B,qU:()=>ie}),L(77616)},Xe.__chunk_94318=(qe,be,L)=>{var B;(()=>{var ie={226:function(z,ne){(function(K,R){"use strict";var pe="function",N="undefined",S="object",E="string",u="major",f="model",y="name",m="type",v="vendor",A="version",le="architecture",Ee="console",V="mobile",M="tablet",j="smarttv",D="wearable",ae="embedded",Te="Amazon",We="Apple",Oe="ASUS",st="BlackBerry",Ke="Browser",vt="Chrome",Ge="Firefox",Ut="Google",Pt="Huawei",ft="Microsoft",Ct="Motorola",_t="Opera",Bt="Samsung",It="Sharp",P="Sony",$="Xiaomi",I="Zebra",G="Facebook",Re="Chromium OS",Fe="Mac OS",xe=function(De,Le){var fe={};for(var je in De)Le[je]&&Le[je].length%2==0?fe[je]=Le[je].concat(De[je]):fe[je]=De[je];return fe},Ce=function(De){for(var Le={},fe=0;fe<De.length;fe++)Le[De[fe].toUpperCase()]=De[fe];return Le},Ue=function(De,Le){return typeof De===E&&Be(Le).indexOf(Be(De))!==-1},Be=function(De){return De.toLowerCase()},kt=function(De,Le){if(typeof De===E)return De=De.replace(/^\s\s*/,""),typeof Le===N?De:De.substring(0,350)},$t=function(De,Le){for(var fe,je,et,Ne,gt,ve,ze=0;ze<Le.length&&!gt;){var tt=Le[ze],bt=Le[ze+1];for(fe=je=0;fe<tt.length&&!gt&&tt[fe];)if(gt=tt[fe++].exec(De))for(et=0;et<bt.length;et++)ve=gt[++je],typeof(Ne=bt[et])===S&&Ne.length>0?Ne.length===2?typeof Ne[1]==pe?this[Ne[0]]=Ne[1].call(this,ve):this[Ne[0]]=Ne[1]:Ne.length===3?typeof Ne[1]!==pe||Ne[1].exec&&Ne[1].test?this[Ne[0]]=ve?ve.replace(Ne[1],Ne[2]):void 0:this[Ne[0]]=ve?Ne[1].call(this,ve,Ne[2]):void 0:Ne.length===4&&(this[Ne[0]]=ve?Ne[3].call(this,ve.replace(Ne[1],Ne[2])):R):this[Ne]=ve||R;ze+=2}},tr=function(De,Le){for(var fe in Le)if(typeof Le[fe]===S&&Le[fe].length>0){for(var je=0;je<Le[fe].length;je++)if(Ue(Le[fe][je],De))return fe==="?"?R:fe}else if(Ue(Le[fe],De))return fe==="?"?R:fe;return De},dr={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},hr={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[A,[y,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[A,[y,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[y,A],[/opios[\/ ]+([\w\.]+)/i],[A,[y,_t+" Mini"]],[/\bopr\/([\w\.]+)/i],[A,[y,_t]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[y,A],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[A,[y,"UC"+Ke]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[A,[y,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[A,[y,"WeChat"]],[/konqueror\/([\w\.]+)/i],[A,[y,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[A,[y,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[A,[y,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[y,/(.+)/,"$1 Secure "+Ke],A],[/\bfocus\/([\w\.]+)/i],[A,[y,Ge+" Focus"]],[/\bopt\/([\w\.]+)/i],[A,[y,_t+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[A,[y,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[A,[y,"Dolphin"]],[/coast\/([\w\.]+)/i],[A,[y,_t+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[A,[y,"MIUI "+Ke]],[/fxios\/([-\w\.]+)/i],[A,[y,Ge]],[/\bqihu|(qi?ho?o?|360)browser/i],[[y,"360 "+Ke]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[y,/(.+)/,"$1 "+Ke],A],[/(comodo_dragon)\/([\w\.]+)/i],[[y,/_/g," "],A],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[y,A],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[y],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[y,G],A],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[y,A],[/\bgsa\/([\w\.]+) .*safari\//i],[A,[y,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[A,[y,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[A,[y,vt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[y,vt+" WebView"],A],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[A,[y,"Android "+Ke]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[y,A],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[A,[y,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[A,y],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[y,[A,tr,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[y,A],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[y,"Netscape"],A],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[A,[y,Ge+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[y,A],[/(cobalt)\/([\w\.]+)/i],[y,[A,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[le,"amd64"]],[/(ia32(?=;))/i],[[le,Be]],[/((?:i[346]|x)86)[;\)]/i],[[le,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[le,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[le,"armhf"]],[/windows (ce|mobile); ppc;/i],[[le,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[le,/ower/,"",Be]],[/(sun4\w)[;\)]/i],[[le,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[le,Be]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[v,Bt],[m,M]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[v,Bt],[m,V]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[v,We],[m,V]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[v,We],[m,M]],[/(macintosh);/i],[f,[v,We]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[v,It],[m,V]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[v,Pt],[m,M]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[v,Pt],[m,V]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[v,$],[m,V]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[v,$],[m,M]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[v,"OPPO"],[m,V]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[v,"Vivo"],[m,V]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[v,"Realme"],[m,V]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[v,Ct],[m,V]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[v,Ct],[m,M]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[v,"LG"],[m,M]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[v,"LG"],[m,V]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[v,"Lenovo"],[m,M]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[v,"Nokia"],[m,V]],[/(pixel c)\b/i],[f,[v,Ut],[m,M]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[v,Ut],[m,V]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[v,P],[m,V]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[v,P],[m,M]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[v,"OnePlus"],[m,V]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[v,Te],[m,M]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[v,Te],[m,V]],[/(playbook);[-\w\),; ]+(rim)/i],[f,v,[m,M]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[v,st],[m,V]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[v,Oe],[m,M]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[v,Oe],[m,V]],[/(nexus 9)/i],[f,[v,"HTC"],[m,M]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[f,/_/g," "],[m,V]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[v,"Acer"],[m,M]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[v,"Meizu"],[m,V]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,f,[m,V]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,f,[m,M]],[/(surface duo)/i],[f,[v,ft],[m,M]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[v,"Fairphone"],[m,V]],[/(u304aa)/i],[f,[v,"AT&T"],[m,V]],[/\bsie-(\w*)/i],[f,[v,"Siemens"],[m,V]],[/\b(rct\w+) b/i],[f,[v,"RCA"],[m,M]],[/\b(venue[\d ]{2,7}) b/i],[f,[v,"Dell"],[m,M]],[/\b(q(?:mv|ta)\w+) b/i],[f,[v,"Verizon"],[m,M]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[v,"Barnes & Noble"],[m,M]],[/\b(tm\d{3}\w+) b/i],[f,[v,"NuVision"],[m,M]],[/\b(k88) b/i],[f,[v,"ZTE"],[m,M]],[/\b(nx\d{3}j) b/i],[f,[v,"ZTE"],[m,V]],[/\b(gen\d{3}) b.+49h/i],[f,[v,"Swiss"],[m,V]],[/\b(zur\d{3}) b/i],[f,[v,"Swiss"],[m,M]],[/\b((zeki)?tb.*\b) b/i],[f,[v,"Zeki"],[m,M]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],f,[m,M]],[/\b(ns-?\w{0,9}) b/i],[f,[v,"Insignia"],[m,M]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[v,"NextBook"],[m,M]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],f,[m,V]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],f,[m,V]],[/\b(ph-1) /i],[f,[v,"Essential"],[m,V]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[v,"Envizen"],[m,M]],[/\b(trio[-\w\. ]+) b/i],[f,[v,"MachSpeed"],[m,M]],[/\btu_(1491) b/i],[f,[v,"Rotor"],[m,M]],[/(shield[\w ]+) b/i],[f,[v,"Nvidia"],[m,M]],[/(sprint) (\w+)/i],[v,f,[m,V]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[v,ft],[m,V]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[v,I],[m,M]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[v,I],[m,V]],[/smart-tv.+(samsung)/i],[v,[m,j]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[v,Bt],[m,j]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,"LG"],[m,j]],[/(apple) ?tv/i],[v,[f,We+" TV"],[m,j]],[/crkey/i],[[f,vt+"cast"],[v,Ut],[m,j]],[/droid.+aft(\w)( bui|\))/i],[f,[v,Te],[m,j]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[v,It],[m,j]],[/(bravia[\w ]+)( bui|\))/i],[f,[v,P],[m,j]],[/(mitv-\w{5}) bui/i],[f,[v,$],[m,j]],[/Hbbtv.*(technisat) (.*);/i],[v,f,[m,j]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[v,kt],[f,kt],[m,j]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,j]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,f,[m,Ee]],[/droid.+; (shield) bui/i],[f,[v,"Nvidia"],[m,Ee]],[/(playstation [345portablevi]+)/i],[f,[v,P],[m,Ee]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[v,ft],[m,Ee]],[/((pebble))app/i],[v,f,[m,D]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[v,We],[m,D]],[/droid.+; (glass) \d/i],[f,[v,Ut],[m,D]],[/droid.+; (wt63?0{2,3})\)/i],[f,[v,I],[m,D]],[/(quest( 2| pro)?)/i],[f,[v,G],[m,D]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[m,ae]],[/(aeobc)\b/i],[f,[v,Te],[m,ae]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[m,V]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[m,M]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,M]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,V]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[A,[y,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[A,[y,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[y,A],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[A,y]],os:[[/microsoft (windows) (vista|xp)/i],[y,A],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[y,[A,tr,dr]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[y,"Windows"],[A,tr,dr]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[A,/_/g,"."],[y,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[y,Fe],[A,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[A,y],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[y,A],[/\(bb(10);/i],[A,[y,st]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[A,[y,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[A,[y,Ge+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[A,[y,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[A,[y,"watchOS"]],[/crkey\/([\d\.]+)/i],[A,[y,vt+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[y,Re],A],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[y,A],[/(sunos) ?([\w\.\d]*)/i],[[y,"Solaris"],A],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[y,A]]},dt=function(De,Le){if(typeof De===S&&(Le=De,De=R),!(this instanceof dt))return new dt(De,Le).getResult();var fe=typeof K!==N&&K.navigator?K.navigator:R,je=De||(fe&&fe.userAgent?fe.userAgent:""),et=fe&&fe.userAgentData?fe.userAgentData:R,Ne=Le?xe(hr,Le):hr,gt=fe&&fe.userAgent==je;return this.getBrowser=function(){var ve,ze={};return ze[y]=R,ze[A]=R,$t.call(ze,je,Ne.browser),ze[u]=typeof(ve=ze[A])===E?ve.replace(/[^\d\.]/g,"").split(".")[0]:R,gt&&fe&&fe.brave&&typeof fe.brave.isBrave==pe&&(ze[y]="Brave"),ze},this.getCPU=function(){var ve={};return ve[le]=R,$t.call(ve,je,Ne.cpu),ve},this.getDevice=function(){var ve={};return ve[v]=R,ve[f]=R,ve[m]=R,$t.call(ve,je,Ne.device),gt&&!ve[m]&&et&&et.mobile&&(ve[m]=V),gt&&ve[f]=="Macintosh"&&fe&&typeof fe.standalone!==N&&fe.maxTouchPoints&&fe.maxTouchPoints>2&&(ve[f]="iPad",ve[m]=M),ve},this.getEngine=function(){var ve={};return ve[y]=R,ve[A]=R,$t.call(ve,je,Ne.engine),ve},this.getOS=function(){var ve={};return ve[y]=R,ve[A]=R,$t.call(ve,je,Ne.os),gt&&!ve[y]&&et&&et.platform!="Unknown"&&(ve[y]=et.platform.replace(/chrome os/i,Re).replace(/macos/i,Fe)),ve},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return je},this.setUA=function(ve){return je=typeof ve===E&&ve.length>350?kt(ve,350):ve,this},this.setUA(je),this};dt.VERSION="1.0.35",dt.BROWSER=Ce([y,A,u]),dt.CPU=Ce([le]),dt.DEVICE=Ce([f,v,m,Ee,V,j,M,D,ae]),dt.ENGINE=dt.OS=Ce([y,A]),typeof ne!==N?(z.exports&&(ne=z.exports=dt),ne.UAParser=dt):L.amdO?(B=function(){return dt}.call(be,L,be,qe))===void 0||(qe.exports=B):typeof K!==N&&(K.UAParser=dt);var Dt=typeof K!==N&&(K.jQuery||K.Zepto);if(Dt&&!Dt.ua){var Nt=new dt;Dt.ua=Nt.getResult(),Dt.ua.get=function(){return Nt.getUA()},Dt.ua.set=function(De){Nt.setUA(De);var Le=Nt.getResult();for(var fe in Le)Dt.ua[fe]=Le[fe]}}})(typeof window=="object"?window:this)}},Z={};function re(z){var ne=Z[z];if(ne!==void 0)return ne.exports;var K=Z[z]={exports:{}},R=!0;try{ie[z].call(K.exports,K,K.exports,re),R=!1}finally{R&&delete Z[z]}return K.exports}re.ab="//",qe.exports=re(226)})()},Xe.__chunk_89801=(qe,be,L)=>{"use strict";L.d(be,{rd:()=>B.rd});var B=L(46713)},Xe.__chunk_89652=(qe,be,L)=>{"use strict";L.d(be,{l:()=>B});class B{static get(Z,re,z){let ne=Reflect.get(Z,re,z);return typeof ne=="function"?ne.bind(Z):ne}static set(Z,re,z,ne){return Reflect.set(Z,re,z,ne)}static has(Z,re){return Reflect.has(Z,re)}static deleteProperty(Z,re){return Reflect.deleteProperty(Z,re)}}},Xe.__chunk_83036=(qe,be,L)=>{"use strict";function B(E){return E.replace(/\/$/,"")||"/"}function ie(E){let u=E.indexOf("#"),f=E.indexOf("?"),y=f>-1&&(u<0||f<u);return y||u>-1?{pathname:E.substring(0,y?f:u),query:y?E.substring(f,u>-1?u:void 0):"",hash:u>-1?E.slice(u):""}:{pathname:E,query:"",hash:""}}function Z(E,u){if(!E.startsWith("/")||!u)return E;let{pathname:f,query:y,hash:m}=ie(E);return""+u+f+y+m}function re(E,u){if(!E.startsWith("/")||!u)return E;let{pathname:f,query:y,hash:m}=ie(E);return""+f+u+y+m}function z(E,u){if(typeof E!="string")return!1;let{pathname:f}=ie(E);return f===u||f.startsWith(u+"/")}L.d(be,{X:()=>S});let ne=new WeakMap;function K(E,u){let f;if(!u)return{pathname:E};let y=ne.get(u);y||(y=u.map(le=>le.toLowerCase()),ne.set(u,y));let m=E.split("/",2);if(!m[1])return{pathname:E};let v=m[1].toLowerCase(),A=y.indexOf(v);return A<0?{pathname:E}:(f=u[A],{pathname:E=E.slice(f.length+1)||"/",detectedLocale:f})}let R=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function pe(E,u){return new URL(String(E).replace(R,"localhost"),u&&String(u).replace(R,"localhost"))}let N=Symbol("NextURLInternal");class S{constructor(u,f,y){let m,v;typeof f=="object"&&"pathname"in f||typeof f=="string"?(m=f,v=y||{}):v=y||f||{},this[N]={url:pe(u,m??v.base),options:v,basePath:""},this.analyze()}analyze(){var u,f,y,m,v;let A=function(V,M){var j,D;let{basePath:ae,i18n:Te,trailingSlash:We}=(j=M.nextConfig)!=null?j:{},Oe={pathname:V,trailingSlash:V!=="/"?V.endsWith("/"):We};ae&&z(Oe.pathname,ae)&&(Oe.pathname=function(Ke,vt){if(!z(Ke,vt))return Ke;let Ge=Ke.slice(vt.length);return Ge.startsWith("/")?Ge:"/"+Ge}(Oe.pathname,ae),Oe.basePath=ae);let st=Oe.pathname;if(Oe.pathname.startsWith("/_next/data/")&&Oe.pathname.endsWith(".json")){let Ke=Oe.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");Oe.buildId=Ke[0],st=Ke[1]!=="index"?"/"+Ke.slice(1).join("/"):"/",M.parseData===!0&&(Oe.pathname=st)}if(Te){let Ke=M.i18nProvider?M.i18nProvider.analyze(Oe.pathname):K(Oe.pathname,Te.locales);Oe.locale=Ke.detectedLocale,Oe.pathname=(D=Ke.pathname)!=null?D:Oe.pathname,!Ke.detectedLocale&&Oe.buildId&&(Ke=M.i18nProvider?M.i18nProvider.analyze(st):K(st,Te.locales)).detectedLocale&&(Oe.locale=Ke.detectedLocale)}return Oe}(this[N].url.pathname,{nextConfig:this[N].options.nextConfig,parseData:!0,i18nProvider:this[N].options.i18nProvider}),le=function(V,M){let j;if(M?.host&&!Array.isArray(M.host))j=M.host.toString().split(":",1)[0];else{if(!V.hostname)return;j=V.hostname}return j.toLowerCase()}(this[N].url,this[N].options.headers);this[N].domainLocale=this[N].options.i18nProvider?this[N].options.i18nProvider.detectDomainLocale(le):function(V,M,j){if(V)for(let Te of(j&&(j=j.toLowerCase()),V)){var D,ae;if(M===((D=Te.domain)==null?void 0:D.split(":",1)[0].toLowerCase())||j===Te.defaultLocale.toLowerCase()||((ae=Te.locales)==null?void 0:ae.some(We=>We.toLowerCase()===j)))return Te}}((f=this[N].options.nextConfig)==null||(u=f.i18n)==null?void 0:u.domains,le);let Ee=((y=this[N].domainLocale)==null?void 0:y.defaultLocale)||((v=this[N].options.nextConfig)==null||(m=v.i18n)==null?void 0:m.defaultLocale);this[N].url.pathname=A.pathname,this[N].defaultLocale=Ee,this[N].basePath=A.basePath??"",this[N].buildId=A.buildId,this[N].locale=A.locale??Ee,this[N].trailingSlash=A.trailingSlash}formatPathname(){var u;let f;return f=function(y,m,v,A){if(!m||m===v)return y;let le=y.toLowerCase();return!A&&(z(le,"/api")||z(le,"/"+m.toLowerCase()))?y:Z(y,"/"+m)}((u={basePath:this[N].basePath,buildId:this[N].buildId,defaultLocale:this[N].options.forceLocale?void 0:this[N].defaultLocale,locale:this[N].locale,pathname:this[N].url.pathname,trailingSlash:this[N].trailingSlash}).pathname,u.locale,u.buildId?void 0:u.defaultLocale,u.ignorePrefix),(u.buildId||!u.trailingSlash)&&(f=B(f)),u.buildId&&(f=re(Z(f,"/_next/data/"+u.buildId),u.pathname==="/"?"index.json":".json")),f=Z(f,u.basePath),!u.buildId&&u.trailingSlash?f.endsWith("/")?f:re(f,"/"):B(f)}formatSearch(){return this[N].url.search}get buildId(){return this[N].buildId}set buildId(u){this[N].buildId=u}get locale(){return this[N].locale??""}set locale(u){var f,y;if(!this[N].locale||!(!((y=this[N].options.nextConfig)==null||(f=y.i18n)==null)&&f.locales.includes(u)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${u}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[N].locale=u}get defaultLocale(){return this[N].defaultLocale}get domainLocale(){return this[N].domainLocale}get searchParams(){return this[N].url.searchParams}get host(){return this[N].url.host}set host(u){this[N].url.host=u}get hostname(){return this[N].url.hostname}set hostname(u){this[N].url.hostname=u}get port(){return this[N].url.port}set port(u){this[N].url.port=u}get protocol(){return this[N].url.protocol}set protocol(u){this[N].url.protocol=u}get href(){let u=this.formatPathname(),f=this.formatSearch();return`${this.protocol}//${this.host}${u}${f}${this.hash}`}set href(u){this[N].url=pe(u),this.analyze()}get origin(){return this[N].url.origin}get pathname(){return this[N].url.pathname}set pathname(u){this[N].url.pathname=u}get hash(){return this[N].url.hash}set hash(u){this[N].url.hash=u}get search(){return this[N].url.search}set search(u){this[N].url.search=u}get password(){return this[N].url.password}set password(u){this[N].url.password=u}get username(){return this[N].url.username}set username(u){this[N].url.username=u}get basePath(){return this[N].basePath}set basePath(u){this[N].basePath=u.startsWith("/")?u:`/${u}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new S(String(this),this[N].options)}}},Xe.__chunk_80485=(qe,be,L)=>{"use strict";let B,ie,Z,re,z,ne;L.d(be,{Ay:()=>Ac});var K={};L.r(K),L.d(K,{q:()=>Ai,l:()=>Oi});var R=function(t,r,n,s,o){if(s==="m")throw TypeError("Private method is not writable");if(s==="a"&&!o)throw TypeError("Private accessor was defined without a setter");if(typeof r=="function"?t!==r||!o:!r.has(t))throw TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(t,n):o?o.value=n:r.set(t,n),n},pe=function(t,r,n,s){if(n==="a"&&!s)throw TypeError("Private accessor was defined without a getter");if(typeof r=="function"?t!==r||!s:!r.has(t))throw TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:r.get(t)};function N(t){let r=t?"__Secure-":"";return{sessionToken:{name:`${r}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},callbackUrl:{name:`${r}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},csrfToken:{name:`${t?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},pkceCodeVerifier:{name:`${r}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t,maxAge:900}},state:{name:`${r}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t,maxAge:900}},nonce:{name:`${r}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},webauthnChallenge:{name:`${r}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t,maxAge:900}}}}class S{constructor(r,n,s){if(Sr.add(this),Mt.set(this,{}),ar.set(this,void 0),Er.set(this,void 0),R(this,Er,s,"f"),R(this,ar,r,"f"),!n)return;let{name:o}=r;for(let[a,c]of Object.entries(n))a.startsWith(o)&&c&&(pe(this,Mt,"f")[a]=c)}get value(){return Object.keys(pe(this,Mt,"f")).sort((r,n)=>parseInt(r.split(".").pop()||"0")-parseInt(n.split(".").pop()||"0")).map(r=>pe(this,Mt,"f")[r]).join("")}chunk(r,n){let s=pe(this,Sr,"m",Cn).call(this);for(let o of pe(this,Sr,"m",Mi).call(this,{name:pe(this,ar,"f").name,value:r,options:{...pe(this,ar,"f").options,...n}}))s[o.name]=o;return Object.values(s)}clean(){return Object.values(pe(this,Sr,"m",Cn).call(this))}}Mt=new WeakMap,ar=new WeakMap,Er=new WeakMap,Sr=new WeakSet,Mi=function(t){let r=Math.ceil(t.value.length/3936);if(r===1)return pe(this,Mt,"f")[t.name]=t.value,[t];let n=[];for(let s=0;s<r;s++){let o=`${t.name}.${s}`,a=t.value.substr(3936*s,3936);n.push({...t,name:o,value:a}),pe(this,Mt,"f")[o]=a}return pe(this,Er,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:160,valueSize:t.value.length,chunks:n.map(s=>s.value.length+160)}),n},Cn=function(){let t={};for(let r in pe(this,Mt,"f"))delete pe(this,Mt,"f")?.[r],t[r]={name:r,value:"",options:{...pe(this,ar,"f").options,maxAge:0}};return t};class E extends Error{constructor(r,n){r instanceof Error?super(void 0,{cause:{err:r,...r.cause,...n}}):typeof r=="string"?(n instanceof Error&&(n={err:n,...n.cause}),super(r,n)):super(void 0,r),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let s=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${s}`}}class u extends E{}u.kind="signIn";class f extends E{}f.type="AdapterError";class y extends E{}y.type="AccessDenied";class m extends E{}m.type="CallbackRouteError";class v extends E{}v.type="ErrorPageLoop";class A extends E{}A.type="EventError";class le extends E{}le.type="InvalidCallbackUrl";class Ee extends u{constructor(){super(...arguments),this.code="credentials"}}Ee.type="CredentialsSignin";class V extends E{}V.type="InvalidEndpoints";class M extends E{}M.type="InvalidCheck";class j extends E{}j.type="JWTSessionError";class D extends E{}D.type="MissingAdapter";class ae extends E{}ae.type="MissingAdapterMethods";class Te extends E{}Te.type="MissingAuthorize";class We extends E{}We.type="MissingSecret";class Oe extends u{}Oe.type="OAuthAccountNotLinked";class st extends u{}st.type="OAuthCallbackError";class Ke extends E{}Ke.type="OAuthProfileParseError";class vt extends E{}vt.type="SessionTokenError";class Ge extends u{}Ge.type="OAuthSignInError";class Ut extends u{}Ut.type="EmailSignInError";class Pt extends E{}Pt.type="SignOutError";class ft extends E{}ft.type="UnknownAction";class Ct extends E{}Ct.type="UnsupportedStrategy";class _t extends E{}_t.type="InvalidProvider";class Bt extends E{}Bt.type="UntrustedHost";class It extends E{}It.type="Verification";class P extends u{}P.type="MissingCSRF";let $=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);class I extends E{}I.type="DuplicateConditionalUI";class G extends E{}G.type="MissingWebAuthnAutocomplete";class Re extends E{}Re.type="WebAuthnVerificationError";class Fe extends u{}Fe.type="AccountNotLinked";class xe extends E{}xe.type="ExperimentalFeatureNotEnabled";let Ce=!1;function Ue(t,r){try{return/^https?:/.test(new URL(t,t.startsWith("/")?r:void 0).protocol)}catch{return!1}}let Be=!1,kt=!1,$t=!1,tr=["createVerificationToken","useVerificationToken","getUserByEmail"],dr=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],hr=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"],dt=()=>{if(typeof en<"u")return en;if(typeof Ws<"u")return Ws;if(typeof window<"u")return window;throw Error("unable to locate global object")},Dt=async(t,r,n,s,o)=>{let{crypto:{subtle:a}}=dt();return new Uint8Array(await a.deriveBits({name:"HKDF",hash:`SHA-${t.substr(3)}`,salt:n,info:s},await a.importKey("raw",r,"HKDF",!1,["deriveBits"]),o<<3))};function Nt(t,r){if(typeof t=="string")return new TextEncoder().encode(t);if(!(t instanceof Uint8Array))throw TypeError(`"${r}"" must be an instance of Uint8Array or a string`);return t}async function De(t,r,n,s,o){return Dt(function(a){switch(a){case"sha256":case"sha384":case"sha512":case"sha1":return a;default:throw TypeError('unsupported "digest" value')}}(t),function(a){let c=Nt(a,"ikm");if(!c.byteLength)throw TypeError('"ikm" must be at least one byte in length');return c}(r),Nt(n,"salt"),function(a){let c=Nt(a,"info");if(c.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return c}(s),function(a,c){if(typeof a!="number"||!Number.isInteger(a)||a<1)throw TypeError('"keylen" must be a positive integer');if(a>255*(parseInt(c.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return a}(o,t))}let Le=async(t,r)=>{let n=`SHA-${t.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(n,r))},fe=new TextEncoder,je=new TextDecoder;function et(...t){let r=new Uint8Array(t.reduce((s,{length:o})=>s+o,0)),n=0;for(let s of t)r.set(s,n),n+=s.length;return r}function Ne(t,r,n){if(r<0||r>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967295}. Received ${r}`);t.set([r>>>24,r>>>16,r>>>8,255&r],n)}function gt(t){let r=Math.floor(t/4294967296),n=new Uint8Array(8);return Ne(n,r,0),Ne(n,t%4294967296,4),n}function ve(t){let r=new Uint8Array(4);return Ne(r,t),r}function ze(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof t=="string"?t:je.decode(t),{alphabet:"base64url"});let r=t;r instanceof Uint8Array&&(r=je.decode(r)),r=r.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{var n=r;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(n);let s=atob(n),o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function tt(t){let r=t;return typeof r=="string"&&(r=fe.encode(r)),Uint8Array.prototype.toBase64?r.toBase64({alphabet:"base64url",omitPadding:!0}):function(n){if(Uint8Array.prototype.toBase64)return n.toBase64();let s=[];for(let o=0;o<n.length;o+=32768)s.push(String.fromCharCode.apply(null,n.subarray(o,o+32768)));return btoa(s.join(""))}(r).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class bt extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(r,n){super(r,n),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class mt extends bt{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(r,n,s="unspecified",o="unspecified"){super(r,{cause:{claim:s,reason:o,payload:n}}),this.claim=s,this.reason=o,this.payload=n}}class tn extends bt{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(r,n,s="unspecified",o="unspecified"){super(r,{cause:{claim:s,reason:o,payload:n}}),this.claim=s,this.reason=o,this.payload=n}}class rn extends bt{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class Qe extends bt{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class Cr extends bt{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(r="decryption operation failed",n){super(r,n)}}class ye extends bt{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class Lt extends bt{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class Mn extends bt{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class hs extends bt{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(r="multiple matching keys found in the JSON Web Key Set",n){super(r,n)}}function rr(t){if(!Xt(t))throw Error("CryptoKey instance expected")}function Xt(t){return t?.[Symbol.toStringTag]==="CryptoKey"}function Ir(t){return t?.[Symbol.toStringTag]==="KeyObject"}let $r=t=>Xt(t)||Ir(t),Et=t=>{if(!function(n){return typeof n=="object"&&n!==null}(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r};function pr(t){return Et(t)&&typeof t.kty=="string"}function nn(t,r,...n){if((n=n.filter(Boolean)).length>2){let s=n.pop();t+=`one of type ${n.join(", ")}, or ${s}.`}else n.length===2?t+=`one of type ${n[0]} or ${n[1]}.`:t+=`of type ${n[0]}.`;return r==null?t+=` Received ${r}`:typeof r=="function"&&r.name?t+=` Received function ${r.name}`:typeof r=="object"&&r!=null&&r.constructor?.name&&(t+=` Received an instance of ${r.constructor.name}`),t}let Yt=(t,...r)=>nn("Key must be ",t,...r);function sn(t,r,...n){return nn(`Key for the ${t} algorithm must be `,r,...n)}async function Jn(t){if(Ir(t)){if(t.type!=="secret")return t.export({format:"jwk"});t=t.export()}if(t instanceof Uint8Array)return{kty:"oct",k:tt(t)};if(!Xt(t))throw TypeError(Yt(t,"CryptoKey","KeyObject","Uint8Array"));if(!t.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:r,key_ops:n,alg:s,use:o,...a}=await crypto.subtle.exportKey("jwk",t);return a}async function an(t){return Jn(t)}let jt=(t,r)=>{if(typeof t!="string"||!t)throw new Mn(`${r} missing or invalid`)};async function on(t,r){let n,s;if(pr(t))n=t;else if($r(t))n=await an(t);else throw TypeError(Yt(t,"CryptoKey","KeyObject","JSON Web Key"));if((r??="sha256")!=="sha256"&&r!=="sha384"&&r!=="sha512")throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(n.kty){case"EC":jt(n.crv,'"crv" (Curve) Parameter'),jt(n.x,'"x" (X Coordinate) Parameter'),jt(n.y,'"y" (Y Coordinate) Parameter'),s={crv:n.crv,kty:n.kty,x:n.x,y:n.y};break;case"OKP":jt(n.crv,'"crv" (Subtype of Key Pair) Parameter'),jt(n.x,'"x" (Public Key) Parameter'),s={crv:n.crv,kty:n.kty,x:n.x};break;case"RSA":jt(n.e,'"e" (Exponent) Parameter'),jt(n.n,'"n" (Modulus) Parameter'),s={e:n.e,kty:n.kty,n:n.n};break;case"oct":jt(n.k,'"k" (Key Value) Parameter'),s={k:n.k,kty:n.kty};break;default:throw new Qe('"kty" (Key Type) Parameter missing or unsupported')}let o=fe.encode(JSON.stringify(s));return tt(await Le(r,o))}let zn=Symbol();function cn(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Qe(`Unsupported JWE Algorithm: ${t}`)}}let Bn=t=>crypto.getRandomValues(new Uint8Array(cn(t)>>3)),ln=(t,r)=>{if(r.length<<3!==cn(t))throw new ye("Invalid Initialization Vector length")},fr=(t,r)=>{let n=t.byteLength<<3;if(n!==r)throw new ye(`Invalid Content Encryption Key length. Expected ${r} bits, got ${n} bits`)};function Ht(t,r="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${r} must be ${t}`)}function mr(t,r){return t.name===r}function Wt(t,r,n){switch(r){case"A128GCM":case"A192GCM":case"A256GCM":{if(!mr(t.algorithm,"AES-GCM"))throw Ht("AES-GCM");let a=parseInt(r.slice(1,4),10);if(t.algorithm.length!==a)throw Ht(a,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!mr(t.algorithm,"AES-KW"))throw Ht("AES-KW");let a=parseInt(r.slice(1,4),10);if(t.algorithm.length!==a)throw Ht(a,"algorithm.length");break}case"ECDH":switch(t.algorithm.name){case"ECDH":case"X25519":break;default:throw Ht("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!mr(t.algorithm,"PBKDF2"))throw Ht("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!mr(t.algorithm,"RSA-OAEP"))throw Ht("RSA-OAEP");let a=parseInt(r.slice(9),10)||1;if(parseInt(t.algorithm.hash.name.slice(4),10)!==a)throw Ht(`SHA-${a}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}var s=t,o=n;if(o&&!s.usages.includes(o))throw TypeError(`CryptoKey does not support this operation, its usages must include ${o}.`)}async function qn(t,r,n,s,o){if(!(n instanceof Uint8Array))throw TypeError(Yt(n,"Uint8Array"));let a=parseInt(t.slice(1,4),10),c=await crypto.subtle.importKey("raw",n.subarray(a>>3),"AES-CBC",!1,["encrypt"]),d=await crypto.subtle.importKey("raw",n.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),w=new Uint8Array(await crypto.subtle.encrypt({iv:s,name:"AES-CBC"},c,r)),x=et(o,s,w,gt(o.length<<3));return{ciphertext:w,tag:new Uint8Array((await crypto.subtle.sign("HMAC",d,x)).slice(0,a>>3)),iv:s}}async function Fn(t,r,n,s,o){let a;n instanceof Uint8Array?a=await crypto.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt"]):(Wt(n,t,"encrypt"),a=n);let c=new Uint8Array(await crypto.subtle.encrypt({additionalData:o,iv:s,name:"AES-GCM",tagLength:128},a,r)),d=c.slice(-16);return{ciphertext:c.slice(0,-16),tag:d,iv:s}}let un=async(t,r,n,s,o)=>{if(!Xt(n)&&!(n instanceof Uint8Array))throw TypeError(Yt(n,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(s?ln(t,s):s=Bn(t),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n instanceof Uint8Array&&fr(n,parseInt(t.slice(-3),10)),qn(t,r,n,s,o);case"A128GCM":case"A192GCM":case"A256GCM":return n instanceof Uint8Array&&fr(n,parseInt(t.slice(1,4),10)),Fn(t,r,n,s,o);default:throw new Qe("Unsupported JWE Content Encryption Algorithm")}};function dn(t,r){if(t.algorithm.length!==parseInt(r.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${r}`)}function hn(t,r,n){return t instanceof Uint8Array?crypto.subtle.importKey("raw",t,"AES-KW",!0,[n]):(Wt(t,r,n),t)}async function Dr(t,r,n){let s=await hn(r,t,"wrapKey");dn(s,t);let o=await crypto.subtle.importKey("raw",n,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",o,s,"AES-KW"))}async function Nr(t,r,n){let s=await hn(r,t,"unwrapKey");dn(s,t);let o=await crypto.subtle.unwrapKey("raw",n,s,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",o))}function Lr(t){return et(ve(t.length),t)}async function Vn(t,r,n){let s=Math.ceil((r>>3)/32),o=new Uint8Array(32*s);for(let a=0;a<s;a++){let c=new Uint8Array(4+t.length+n.length);c.set(ve(a+1)),c.set(t,4),c.set(n,4+t.length),o.set(await Le("sha256",c),32*a)}return o.slice(0,r>>3)}async function pn(t,r,n,s,o=new Uint8Array(0),a=new Uint8Array(0)){let c;Wt(t,"ECDH"),Wt(r,"ECDH","deriveBits");let d=et(Lr(fe.encode(n)),Lr(o),Lr(a),ve(s));return c=t.algorithm.name==="X25519"?256:Math.ceil(parseInt(t.algorithm.namedCurve.slice(-3),10)/8)<<3,Vn(new Uint8Array(await crypto.subtle.deriveBits({name:t.algorithm.name,public:t},r,c)),s,d)}function fn(t){switch(t.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return t.algorithm.name==="X25519"}}let Gn=(t,r)=>et(fe.encode(t),new Uint8Array([0]),r);async function mn(t,r,n,s){if(!(t instanceof Uint8Array)||t.length<8)throw new ye("PBES2 Salt Input must be 8 or more octets");let o=Gn(r,t),a=parseInt(r.slice(13,16),10),c={hash:`SHA-${r.slice(8,11)}`,iterations:n,name:"PBKDF2",salt:o},d=await(s instanceof Uint8Array?crypto.subtle.importKey("raw",s,"PBKDF2",!1,["deriveBits"]):(Wt(s,r,"deriveBits"),s));return new Uint8Array(await crypto.subtle.deriveBits(c,d,a))}async function Xn(t,r,n,s=2048,o=crypto.getRandomValues(new Uint8Array(16))){let a=await mn(o,t,s,r);return{encryptedKey:await Dr(t.slice(-6),a,n),p2c:s,p2s:tt(o)}}async function Yn(t,r,n,s,o){let a=await mn(o,t,s,r);return Nr(t.slice(-6),a,n)}let yn=(t,r)=>{if(t.startsWith("RS")||t.startsWith("PS")){let{modulusLength:n}=r.algorithm;if(typeof n!="number"||n<2048)throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},wn=t=>{switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Qe(`alg ${t} is not supported either by JOSE or your javascript runtime`)}};async function Zn(t,r,n){return Wt(r,t,"encrypt"),yn(t,r),new Uint8Array(await crypto.subtle.encrypt(wn(t),r,n))}async function Qn(t,r,n){return Wt(r,t,"decrypt"),yn(t,r),new Uint8Array(await crypto.subtle.decrypt(wn(t),r,n))}let gn=async t=>{if(!t.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:r,keyUsages:n}=function(o){let a,c;switch(o.kty){case"RSA":switch(o.alg){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${o.alg.slice(-3)}`},c=o.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${o.alg.slice(-3)}`},c=o.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(o.alg.slice(-3),10)||1}`},c=o.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(o.alg){case"ES256":a={name:"ECDSA",namedCurve:"P-256"},c=o.d?["sign"]:["verify"];break;case"ES384":a={name:"ECDSA",namedCurve:"P-384"},c=o.d?["sign"]:["verify"];break;case"ES512":a={name:"ECDSA",namedCurve:"P-521"},c=o.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":a={name:"ECDH",namedCurve:o.crv},c=o.d?["deriveBits"]:[];break;default:throw new Qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(o.alg){case"Ed25519":case"EdDSA":a={name:"Ed25519"},c=o.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":a={name:o.crv},c=o.d?["deriveBits"]:[];break;default:throw new Qe('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new Qe('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:a,keyUsages:c}}(t),s={...t};return delete s.alg,delete s.use,crypto.subtle.importKey("jwk",s,r,t.ext??!t.d,t.key_ops??n)},bn=async(t,r,n,s=!1)=>{let o=(B||=new WeakMap).get(t);if(o?.[n])return o[n];let a=await gn({...r,alg:n});return s&&Object.freeze(t),o?o[n]=a:B.set(t,{[n]:a}),a},ei=(t,r)=>{let n,s=(B||=new WeakMap).get(t);if(s?.[r])return s[r];let o=t.type==="public",a=!!o;if(t.asymmetricKeyType==="x25519"){switch(r){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}n=t.toCryptoKey(t.asymmetricKeyType,a,o?[]:["deriveBits"])}if(t.asymmetricKeyType==="ed25519"){if(r!=="EdDSA"&&r!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");n=t.toCryptoKey(t.asymmetricKeyType,a,[o?"verify":"sign"])}if(t.asymmetricKeyType==="rsa"){let c;switch(r){case"RSA-OAEP":c="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":c="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":c="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":c="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(r.startsWith("RSA-OAEP"))return t.toCryptoKey({name:"RSA-OAEP",hash:c},a,o?["encrypt"]:["decrypt"]);n=t.toCryptoKey({name:r.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:c},a,[o?"verify":"sign"])}if(t.asymmetricKeyType==="ec"){let c=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(t.asymmetricKeyDetails?.namedCurve);if(!c)throw TypeError("given KeyObject instance cannot be used for this algorithm");r==="ES256"&&c==="P-256"&&(n=t.toCryptoKey({name:"ECDSA",namedCurve:c},a,[o?"verify":"sign"])),r==="ES384"&&c==="P-384"&&(n=t.toCryptoKey({name:"ECDSA",namedCurve:c},a,[o?"verify":"sign"])),r==="ES512"&&c==="P-521"&&(n=t.toCryptoKey({name:"ECDSA",namedCurve:c},a,[o?"verify":"sign"])),r.startsWith("ECDH-ES")&&(n=t.toCryptoKey({name:"ECDH",namedCurve:c},a,o?[]:["deriveBits"]))}if(!n)throw TypeError("given KeyObject instance cannot be used for this algorithm");return s?s[r]=n:B.set(t,{[r]:n}),n},jr=async(t,r)=>{if(t instanceof Uint8Array||Xt(t))return t;if(Ir(t)){if(t.type==="secret")return t.export();if("toCryptoKey"in t&&typeof t.toCryptoKey=="function")try{return ei(t,r)}catch(s){if(s instanceof TypeError)throw s}let n=t.export({format:"jwk"});return bn(t,n,r)}if(pr(t))return t.k?ze(t.k):bn(t,t,r,!0);throw Error("unreachable")};function Hr(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Qe(`Unsupported JWE Algorithm: ${t}`)}}let Zt=t=>crypto.getRandomValues(new Uint8Array(Hr(t)>>3));async function ti(t,r){if(!(t instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(r instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let n={name:"HMAC",hash:"SHA-256"},s=await crypto.subtle.generateKey(n,!1,["sign"]),o=new Uint8Array(await crypto.subtle.sign(n,s,t)),a=new Uint8Array(await crypto.subtle.sign(n,s,r)),c=0,d=-1;for(;++d<32;)c|=o[d]^a[d];return c===0}async function ri(t,r,n,s,o,a){let c,d;if(!(r instanceof Uint8Array))throw TypeError(Yt(r,"Uint8Array"));let w=parseInt(t.slice(1,4),10),x=await crypto.subtle.importKey("raw",r.subarray(w>>3),"AES-CBC",!1,["decrypt"]),g=await crypto.subtle.importKey("raw",r.subarray(0,w>>3),{hash:`SHA-${w<<1}`,name:"HMAC"},!1,["sign"]),p=et(a,s,n,gt(a.length<<3)),O=new Uint8Array((await crypto.subtle.sign("HMAC",g,p)).slice(0,w>>3));try{c=await ti(o,O)}catch{}if(!c)throw new Cr;try{d=new Uint8Array(await crypto.subtle.decrypt({iv:s,name:"AES-CBC"},x,n))}catch{}if(!d)throw new Cr;return d}async function ni(t,r,n,s,o,a){let c;r instanceof Uint8Array?c=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["decrypt"]):(Wt(r,t,"decrypt"),c=r);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:a,iv:s,name:"AES-GCM",tagLength:128},c,et(n,o)))}catch{throw new Cr}}let xn=async(t,r,n,s,o,a)=>{if(!Xt(r)&&!(r instanceof Uint8Array))throw TypeError(Yt(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!s)throw new ye("JWE Initialization Vector missing");if(!o)throw new ye("JWE Authentication Tag missing");switch(ln(t,s),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&fr(r,parseInt(t.slice(-3),10)),ri(t,r,n,s,o,a);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&fr(r,parseInt(t.slice(1,4),10)),ni(t,r,n,s,o,a);default:throw new Qe("Unsupported JWE Content Encryption Algorithm")}};async function ii(t,r,n,s){let o=t.slice(0,7),a=await un(o,n,r,s,new Uint8Array(0));return{encryptedKey:a.ciphertext,iv:tt(a.iv),tag:tt(a.tag)}}async function si(t,r,n,s,o){return xn(t.slice(0,7),r,n,s,o,new Uint8Array(0))}let ai=async(t,r,n,s,o={})=>{let a,c,d;switch(t){case"dir":d=n;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let w;if(rr(n),!fn(n))throw new Qe("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:x,apv:g}=o;w=o.epk?await jr(o.epk,t):(await crypto.subtle.generateKey(n.algorithm,!0,["deriveBits"])).privateKey;let{x:p,y:O,crv:k,kty:J}=await an(w),W=await pn(n,w,t==="ECDH-ES"?r:t,t==="ECDH-ES"?Hr(r):parseInt(t.slice(-5,-2),10),x,g);if(c={epk:{x:p,crv:k,kty:J}},J==="EC"&&(c.epk.y=O),x&&(c.apu=tt(x)),g&&(c.apv=tt(g)),t==="ECDH-ES"){d=W;break}d=s||Zt(r);let F=t.slice(-6);a=await Dr(F,W,d);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":d=s||Zt(r),rr(n),a=await Zn(t,n,d);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{d=s||Zt(r);let{p2c:w,p2s:x}=o;({encryptedKey:a,...c}=await Xn(t,n,d,w,x));break}case"A128KW":case"A192KW":case"A256KW":d=s||Zt(r),a=await Dr(t,n,d);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{d=s||Zt(r);let{iv:w}=o;({encryptedKey:a,...c}=await ii(t,n,d,w));break}default:throw new Qe('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:d,encryptedKey:a,parameters:c}},vn=(...t)=>{let r,n=t.filter(Boolean);if(n.length===0||n.length===1)return!0;for(let s of n){let o=Object.keys(s);if(!r||r.size===0){r=new Set(o);continue}for(let a of o){if(r.has(a))return!1;r.add(a)}}return!0},_n=(t,r,n,s,o)=>{let a;if(o.crit!==void 0&&s?.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!s||s.crit===void 0)return new Set;if(!Array.isArray(s.crit)||s.crit.length===0||s.crit.some(c=>typeof c!="string"||c.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let c of(a=n!==void 0?new Map([...Object.entries(n),...r.entries()]):r,s.crit)){if(!a.has(c))throw new Qe(`Extension Header Parameter "${c}" is not recognized`);if(o[c]===void 0)throw new t(`Extension Header Parameter "${c}" is missing`);if(a.get(c)&&s[c]===void 0)throw new t(`Extension Header Parameter "${c}" MUST be integrity protected`)}return new Set(s.crit)},Qt=t=>t?.[Symbol.toStringTag],Wr=(t,r,n)=>{if(r.use!==void 0){let s;switch(n){case"sign":case"verify":s="sig";break;case"encrypt":case"decrypt":s="enc"}if(r.use!==s)throw TypeError(`Invalid key for this operation, its "use" must be "${s}" when present`)}if(r.alg!==void 0&&r.alg!==t)throw TypeError(`Invalid key for this operation, its "alg" must be "${t}" when present`);if(Array.isArray(r.key_ops)){let s;switch(!0){case(n==="sign"||n==="verify"):case t==="dir":case t.includes("CBC-HS"):s=n;break;case t.startsWith("PBES2"):s="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(t):s=!t.includes("GCM")&&t.endsWith("KW")?n==="encrypt"?"wrapKey":"unwrapKey":n;break;case(n==="encrypt"&&t.startsWith("RSA")):s="wrapKey";break;case n==="decrypt":s=t.startsWith("RSA")?"unwrapKey":"deriveBits"}if(s&&r.key_ops?.includes?.(s)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${s}" when present`)}return!0},oi=(t,r,n)=>{if(!(r instanceof Uint8Array)){if(pr(r)){if(function(s){return s.kty==="oct"&&typeof s.k=="string"}(r)&&Wr(t,r,n))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!$r(r))throw TypeError(sn(t,r,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(r.type!=="secret")throw TypeError(`${Qt(r)} instances for symmetric algorithms must be of type "secret"`)}},ci=(t,r,n)=>{if(pr(r))switch(n){case"decrypt":case"sign":if(function(s){return s.kty!=="oct"&&typeof s.d=="string"}(r)&&Wr(t,r,n))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(function(s){return s.kty!=="oct"&&s.d===void 0}(r)&&Wr(t,r,n))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!$r(r))throw TypeError(sn(t,r,"CryptoKey","KeyObject","JSON Web Key"));if(r.type==="secret")throw TypeError(`${Qt(r)} instances for asymmetric algorithms must not be of type "secret"`);if(r.type==="public")switch(n){case"sign":throw TypeError(`${Qt(r)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${Qt(r)} instances for asymmetric algorithm decryption must be of type "private"`)}if(r.type==="private")switch(n){case"verify":throw TypeError(`${Qt(r)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${Qt(r)} instances for asymmetric algorithm encryption must be of type "public"`)}},kn=(t,r,n)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(t)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(t)?oi(t,r,n):ci(t,r,n)};class li{#e;#t;#i;#r;#a;#s;#o;#n;constructor(r){if(!(r instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#e=r}setKeyManagementParameters(r){if(this.#n)throw TypeError("setKeyManagementParameters can only be called once");return this.#n=r,this}setProtectedHeader(r){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=r,this}setSharedUnprotectedHeader(r){if(this.#i)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#i=r,this}setUnprotectedHeader(r){if(this.#r)throw TypeError("setUnprotectedHeader can only be called once");return this.#r=r,this}setAdditionalAuthenticatedData(r){return this.#a=r,this}setContentEncryptionKey(r){if(this.#s)throw TypeError("setContentEncryptionKey can only be called once");return this.#s=r,this}setInitializationVector(r){if(this.#o)throw TypeError("setInitializationVector can only be called once");return this.#o=r,this}async encrypt(r,n){let s,o,a,c,d;if(!this.#t&&!this.#r&&!this.#i)throw new ye("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!vn(this.#t,this.#r,this.#i))throw new ye("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let w={...this.#t,...this.#r,...this.#i};if(_n(ye,new Map,n?.crit,this.#t,w),w.zip!==void 0)throw new Qe('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:x,enc:g}=w;if(typeof x!="string"||!x)throw new ye('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof g!="string"||!g)throw new ye('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#s&&(x==="dir"||x==="ECDH-ES"))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${x}`);kn(x==="dir"?g:x,r,"encrypt");{let W,F=await jr(r,x);({cek:o,encryptedKey:s,parameters:W}=await ai(x,g,F,this.#s,this.#n)),W&&(n&&zn in n?this.#r?this.#r={...this.#r,...W}:this.setUnprotectedHeader(W):this.#t?this.#t={...this.#t,...W}:this.setProtectedHeader(W))}c=this.#t?fe.encode(tt(JSON.stringify(this.#t))):fe.encode(""),this.#a?(d=tt(this.#a),a=et(c,fe.encode("."),fe.encode(d))):a=c;let{ciphertext:p,tag:O,iv:k}=await un(g,this.#e,o,this.#o,a),J={ciphertext:tt(p)};return k&&(J.iv=tt(k)),O&&(J.tag=tt(O)),s&&(J.encrypted_key=tt(s)),d&&(J.aad=d),this.#t&&(J.protected=je.decode(c)),this.#i&&(J.unprotected=this.#i),this.#r&&(J.header=this.#r),J}}class ui{#e;constructor(r){this.#e=new li(r)}setContentEncryptionKey(r){return this.#e.setContentEncryptionKey(r),this}setInitializationVector(r){return this.#e.setInitializationVector(r),this}setProtectedHeader(r){return this.#e.setProtectedHeader(r),this}setKeyManagementParameters(r){return this.#e.setKeyManagementParameters(r),this}async encrypt(r,n){let s=await this.#e.encrypt(r,n);return[s.protected,s.encrypted_key,s.iv,s.ciphertext,s.tag].join(".")}}let Kt=t=>Math.floor(t.getTime()/1e3),di=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,nr=t=>{let r,n=di.exec(t);if(!n||n[4]&&n[1])throw TypeError("Invalid time period format");let s=parseFloat(n[2]);switch(n[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":r=Math.round(s);break;case"minute":case"minutes":case"min":case"mins":case"m":r=Math.round(60*s);break;case"hour":case"hours":case"hr":case"hrs":case"h":r=Math.round(3600*s);break;case"day":case"days":case"d":r=Math.round(86400*s);break;case"week":case"weeks":case"w":r=Math.round(604800*s);break;default:r=Math.round(31557600*s)}return n[1]==="-"||n[4]==="ago"?-r:r};function qt(t,r){if(!Number.isFinite(r))throw TypeError(`Invalid ${t} input`);return r}let Sn=t=>t.includes("/")?t.toLowerCase():`application/${t.toLowerCase()}`,hi=(t,r)=>typeof t=="string"?r.includes(t):!!Array.isArray(t)&&r.some(Set.prototype.has.bind(new Set(t)));class pi{#e;constructor(r){if(!Et(r))throw TypeError("JWT Claims Set MUST be an object");this.#e=structuredClone(r)}data(){return fe.encode(JSON.stringify(this.#e))}get iss(){return this.#e.iss}set iss(r){this.#e.iss=r}get sub(){return this.#e.sub}set sub(r){this.#e.sub=r}get aud(){return this.#e.aud}set aud(r){this.#e.aud=r}set jti(r){this.#e.jti=r}set nbf(r){typeof r=="number"?this.#e.nbf=qt("setNotBefore",r):r instanceof Date?this.#e.nbf=qt("setNotBefore",Kt(r)):this.#e.nbf=Kt(new Date)+nr(r)}set exp(r){typeof r=="number"?this.#e.exp=qt("setExpirationTime",r):r instanceof Date?this.#e.exp=qt("setExpirationTime",Kt(r)):this.#e.exp=Kt(new Date)+nr(r)}set iat(r){r===void 0?this.#e.iat=Kt(new Date):r instanceof Date?this.#e.iat=qt("setIssuedAt",Kt(r)):typeof r=="string"?this.#e.iat=qt("setIssuedAt",Kt(new Date)+nr(r)):this.#e.iat=qt("setIssuedAt",r)}}class fi{#e;#t;#i;#r;#a;#s;#o;#n;constructor(r={}){this.#n=new pi(r)}setIssuer(r){return this.#n.iss=r,this}setSubject(r){return this.#n.sub=r,this}setAudience(r){return this.#n.aud=r,this}setJti(r){return this.#n.jti=r,this}setNotBefore(r){return this.#n.nbf=r,this}setExpirationTime(r){return this.#n.exp=r,this}setIssuedAt(r){return this.#n.iat=r,this}setProtectedHeader(r){if(this.#r)throw TypeError("setProtectedHeader can only be called once");return this.#r=r,this}setKeyManagementParameters(r){if(this.#i)throw TypeError("setKeyManagementParameters can only be called once");return this.#i=r,this}setContentEncryptionKey(r){if(this.#e)throw TypeError("setContentEncryptionKey can only be called once");return this.#e=r,this}setInitializationVector(r){if(this.#t)throw TypeError("setInitializationVector can only be called once");return this.#t=r,this}replicateIssuerAsHeader(){return this.#a=!0,this}replicateSubjectAsHeader(){return this.#s=!0,this}replicateAudienceAsHeader(){return this.#o=!0,this}async encrypt(r,n){let s=new ui(this.#n.data());return this.#r&&(this.#a||this.#s||this.#o)&&(this.#r={...this.#r,iss:this.#a?this.#n.iss:void 0,sub:this.#s?this.#n.sub:void 0,aud:this.#o?this.#n.aud:void 0}),s.setProtectedHeader(this.#r),this.#t&&s.setInitializationVector(this.#t),this.#e&&s.setContentEncryptionKey(this.#e),this.#i&&s.setKeyManagementParameters(this.#i),s.encrypt(r,n)}}async function mi(t,r,n){let s;if(!Et(t))throw TypeError("JWK must be an object");switch(r??=t.alg,s??=n?.extractable??t.ext,t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw TypeError('missing "k" (Key Value) Parameter value');return ze(t.k);case"RSA":if("oth"in t&&t.oth!==void 0)throw new Qe('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return gn({...t,alg:r,ext:s});default:throw new Qe('Unsupported "kty" (Key Type) Parameter value')}}let yi=async(t,r,n,s,o)=>{switch(t){case"dir":if(n!==void 0)throw new ye("Encountered unexpected JWE Encrypted Key");return r;case"ECDH-ES":if(n!==void 0)throw new ye("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let a,c;if(!Et(s.epk))throw new ye('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(rr(r),!fn(r))throw new Qe("ECDH with the provided key is not allowed or not supported by your javascript runtime");let d=await mi(s.epk,t);if(rr(d),s.apu!==void 0){if(typeof s.apu!="string")throw new ye('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{a=ze(s.apu)}catch{throw new ye("Failed to base64url decode the apu")}}if(s.apv!==void 0){if(typeof s.apv!="string")throw new ye('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{c=ze(s.apv)}catch{throw new ye("Failed to base64url decode the apv")}}let w=await pn(d,r,t==="ECDH-ES"?s.enc:t,t==="ECDH-ES"?Hr(s.enc):parseInt(t.slice(-5,-2),10),a,c);if(t==="ECDH-ES")return w;if(n===void 0)throw new ye("JWE Encrypted Key missing");return Nr(t.slice(-6),w,n)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(n===void 0)throw new ye("JWE Encrypted Key missing");return rr(r),Qn(t,r,n);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let a;if(n===void 0)throw new ye("JWE Encrypted Key missing");if(typeof s.p2c!="number")throw new ye('JOSE Header "p2c" (PBES2 Count) missing or invalid');let c=o?.maxPBES2Count||1e4;if(s.p2c>c)throw new ye('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof s.p2s!="string")throw new ye('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{a=ze(s.p2s)}catch{throw new ye("Failed to base64url decode the p2s")}return Yn(t,r,n,s.p2c,a)}case"A128KW":case"A192KW":case"A256KW":if(n===void 0)throw new ye("JWE Encrypted Key missing");return Nr(t,r,n);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let a,c;if(n===void 0)throw new ye("JWE Encrypted Key missing");if(typeof s.iv!="string")throw new ye('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof s.tag!="string")throw new ye('JOSE Header "tag" (Authentication Tag) missing or invalid');try{a=ze(s.iv)}catch{throw new ye("Failed to base64url decode the iv")}try{c=ze(s.tag)}catch{throw new ye("Failed to base64url decode the tag")}return si(t,r,n,a,c)}default:throw new Qe('Invalid or unsupported "alg" (JWE Algorithm) header value')}},En=(t,r)=>{if(r!==void 0&&(!Array.isArray(r)||r.some(n=>typeof n!="string")))throw TypeError(`"${t}" option must be an array of strings`);if(r)return new Set(r)};async function wi(t,r,n){let s,o,a,c,d,w,x;if(!Et(t))throw new ye("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new ye("JOSE Header missing");if(t.iv!==void 0&&typeof t.iv!="string")throw new ye("JWE Initialization Vector incorrect type");if(typeof t.ciphertext!="string")throw new ye("JWE Ciphertext missing or incorrect type");if(t.tag!==void 0&&typeof t.tag!="string")throw new ye("JWE Authentication Tag incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new ye("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new ye("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new ye("JWE AAD incorrect type");if(t.header!==void 0&&!Et(t.header))throw new ye("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!Et(t.unprotected))throw new ye("JWE Per-Recipient Unprotected Header incorrect type");if(t.protected)try{let H=ze(t.protected);s=JSON.parse(je.decode(H))}catch{throw new ye("JWE Protected Header is invalid")}if(!vn(s,t.header,t.unprotected))throw new ye("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let g={...s,...t.header,...t.unprotected};if(_n(ye,new Map,n?.crit,s,g),g.zip!==void 0)throw new Qe('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:p,enc:O}=g;if(typeof p!="string"||!p)throw new ye("missing JWE Algorithm (alg) in JWE Header");if(typeof O!="string"||!O)throw new ye("missing JWE Encryption Algorithm (enc) in JWE Header");let k=n&&En("keyManagementAlgorithms",n.keyManagementAlgorithms),J=n&&En("contentEncryptionAlgorithms",n.contentEncryptionAlgorithms);if(k&&!k.has(p)||!k&&p.startsWith("PBES2"))throw new rn('"alg" (Algorithm) Header Parameter value not allowed');if(J&&!J.has(O))throw new rn('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(t.encrypted_key!==void 0)try{o=ze(t.encrypted_key)}catch{throw new ye("Failed to base64url decode the encrypted_key")}let W=!1;typeof r=="function"&&(r=await r(s,t),W=!0),kn(p==="dir"?O:p,r,"decrypt");let F=await jr(r,p);try{a=await yi(p,F,o,g,n)}catch(H){if(H instanceof TypeError||H instanceof ye||H instanceof Qe)throw H;a=Zt(O)}if(t.iv!==void 0)try{c=ze(t.iv)}catch{throw new ye("Failed to base64url decode the iv")}if(t.tag!==void 0)try{d=ze(t.tag)}catch{throw new ye("Failed to base64url decode the tag")}let ce=fe.encode(t.protected??"");w=t.aad!==void 0?et(ce,fe.encode("."),fe.encode(t.aad)):ce;try{x=ze(t.ciphertext)}catch{throw new ye("Failed to base64url decode the ciphertext")}let Q={plaintext:await xn(O,a,x,c,d,w)};if(t.protected!==void 0&&(Q.protectedHeader=s),t.aad!==void 0)try{Q.additionalAuthenticatedData=ze(t.aad)}catch{throw new ye("Failed to base64url decode the aad")}return t.unprotected!==void 0&&(Q.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(Q.unprotectedHeader=t.header),W?{...Q,key:F}:Q}async function gi(t,r,n){if(t instanceof Uint8Array&&(t=je.decode(t)),typeof t!="string")throw new ye("Compact JWE must be a string or Uint8Array");let{0:s,1:o,2:a,3:c,4:d,length:w}=t.split(".");if(w!==5)throw new ye("Invalid Compact JWE");let x=await wi({ciphertext:c,iv:a||void 0,protected:s,tag:d||void 0,encrypted_key:o||void 0},r,n),g={plaintext:x.plaintext,protectedHeader:x.protectedHeader};return typeof r=="function"?{...g,key:x.key}:g}async function bi(t,r,n){let s=await gi(t,r,n),o=function(d,w,x={}){let g,p;try{g=JSON.parse(je.decode(w))}catch{}if(!Et(g))throw new Lt("JWT Claims Set must be a top-level JSON object");let{typ:O}=x;if(O&&(typeof d.typ!="string"||Sn(d.typ)!==Sn(O)))throw new mt('unexpected "typ" JWT header value',g,"typ","check_failed");let{requiredClaims:k=[],issuer:J,subject:W,audience:F,maxTokenAge:ce}=x,Q=[...k];for(let T of(ce!==void 0&&Q.push("iat"),F!==void 0&&Q.push("aud"),W!==void 0&&Q.push("sub"),J!==void 0&&Q.push("iss"),new Set(Q.reverse())))if(!(T in g))throw new mt(`missing required "${T}" claim`,g,T,"missing");if(J&&!(Array.isArray(J)?J:[J]).includes(g.iss))throw new mt('unexpected "iss" claim value',g,"iss","check_failed");if(W&&g.sub!==W)throw new mt('unexpected "sub" claim value',g,"sub","check_failed");if(F&&!hi(g.aud,typeof F=="string"?[F]:F))throw new mt('unexpected "aud" claim value',g,"aud","check_failed");switch(typeof x.clockTolerance){case"string":p=nr(x.clockTolerance);break;case"number":p=x.clockTolerance;break;case"undefined":p=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:H}=x,b=Kt(H||new Date);if((g.iat!==void 0||ce)&&typeof g.iat!="number")throw new mt('"iat" claim must be a number',g,"iat","invalid");if(g.nbf!==void 0){if(typeof g.nbf!="number")throw new mt('"nbf" claim must be a number',g,"nbf","invalid");if(g.nbf>b+p)throw new mt('"nbf" claim timestamp check failed',g,"nbf","check_failed")}if(g.exp!==void 0){if(typeof g.exp!="number")throw new mt('"exp" claim must be a number',g,"exp","invalid");if(g.exp<=b-p)throw new tn('"exp" claim timestamp check failed',g,"exp","check_failed")}if(ce){let T=b-g.iat;if(T-p>(typeof ce=="number"?ce:nr(ce)))throw new tn('"iat" claim timestamp check failed (too far in the past)',g,"iat","check_failed");if(T<0-p)throw new mt('"iat" claim timestamp check failed (it should be in the past)',g,"iat","check_failed")}return g}(s.protectedHeader,s.plaintext,n),{protectedHeader:a}=s;if(a.iss!==void 0&&a.iss!==o.iss)throw new mt('replicated "iss" claim header parameter mismatch',o,"iss","mismatch");if(a.sub!==void 0&&a.sub!==o.sub)throw new mt('replicated "sub" claim header parameter mismatch',o,"sub","mismatch");if(a.aud!==void 0&&JSON.stringify(a.aud)!==JSON.stringify(o.aud))throw new mt('replicated "aud" claim header parameter mismatch',o,"aud","mismatch");let c={payload:o,protectedHeader:a};return typeof r=="function"?{...c,key:s.key}:c}let xi=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,vi=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,_i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,ki=/^[\u0020-\u003A\u003D-\u007E]*$/,Si=Object.prototype.toString,Ei=(()=>{let t=function(){};return t.prototype=Object.create(null),t})();function Ai(t,r){let n=new Ei,s=t.length;if(s<2)return n;let o=r?.decode||Ti,a=0;do{let c=t.indexOf("=",a);if(c===-1)break;let d=t.indexOf(";",a),w=d===-1?s:d;if(c>w){a=t.lastIndexOf(";",c-1)+1;continue}let x=An(t,a,c),g=On(t,c,x),p=t.slice(x,g);if(n[p]===void 0){let O=An(t,c+1,w),k=On(t,w,O),J=o(t.slice(O,k));n[p]=J}a=w+1}while(a<s);return n}function An(t,r,n){do{let s=t.charCodeAt(r);if(s!==32&&s!==9)return r}while(++r<n);return n}function On(t,r,n){for(;r>n;){let s=t.charCodeAt(--r);if(s!==32&&s!==9)return r+1}return n}function Oi(t,r,n){let s=n?.encode||encodeURIComponent;if(!xi.test(t))throw TypeError(`argument name is invalid: ${t}`);let o=s(r);if(!vi.test(o))throw TypeError(`argument val is invalid: ${r}`);let a=t+"="+o;if(!n)return a;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw TypeError(`option maxAge is invalid: ${n.maxAge}`);a+="; Max-Age="+n.maxAge}if(n.domain){if(!_i.test(n.domain))throw TypeError(`option domain is invalid: ${n.domain}`);a+="; Domain="+n.domain}if(n.path){if(!ki.test(n.path))throw TypeError(`option path is invalid: ${n.path}`);a+="; Path="+n.path}if(n.expires){var c;if(c=n.expires,Si.call(c)!=="[object Date]"||!Number.isFinite(n.expires.valueOf()))throw TypeError(`option expires is invalid: ${n.expires}`);a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.partitioned&&(a+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${n.sameSite}`)}return a}function Ti(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}let{q:ps}=K,Ri=()=>Date.now()/1e3|0,Kr="A256CBC-HS512";async function yr(t){let{token:r={},secret:n,maxAge:s=2592e3,salt:o}=t,a=Array.isArray(n)?n:[n],c=await Tn(Kr,a[0],o),d=await on({kty:"oct",k:tt(c)},`sha${c.byteLength<<3}`);return await new fi(r).setProtectedHeader({alg:"dir",enc:Kr,kid:d}).setIssuedAt().setExpirationTime(Ri()+s).setJti(crypto.randomUUID()).encrypt(c)}async function wr(t){let{token:r,secret:n,salt:s}=t,o=Array.isArray(n)?n:[n];if(!r)return null;let{payload:a}=await bi(r,async({kid:c,enc:d})=>{for(let w of o){let x=await Tn(d,w,s);if(c===void 0||c===await on({kty:"oct",k:tt(x)},`sha${x.byteLength<<3}`))return x}throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[Kr,"A256GCM"]});return a}async function Tn(t,r,n){let s;switch(t){case"A256CBC-HS512":s=64;break;case"A256GCM":s=32;break;default:throw Error("Unsupported JWT Content Encryption Algorithm")}return await De("sha256",r,n,`Auth.js Generated Encryption Key (${n})`,s)}async function Ui({options:t,paramValue:r,cookieValue:n}){let{url:s,callbacks:o}=t,a=s.origin;return r?a=await o.redirect({url:r,baseUrl:s.origin}):n&&(a=await o.redirect({url:n,baseUrl:s.origin})),{callbackUrl:a,callbackUrlCookie:a!==n?a:void 0}}let Mr="\x1B[31m",ir="\x1B[0m",Pi={error(t){let r=t instanceof E?t.type:t.name;if(console.error(`${Mr}[auth][error]${ir} ${r}: ${t.message}`),t.cause&&typeof t.cause=="object"&&"err"in t.cause&&t.cause.err instanceof Error){let{err:n,...s}=t.cause;console.error(`${Mr}[auth][cause]${ir}:`,n.stack),s&&console.error(`${Mr}[auth][details]${ir}:`,JSON.stringify(s,null,2))}else t.stack&&console.error(t.stack.replace(/.*/,"").substring(1))},warn(t){console.warn(`\x1B[33m[auth][warn][${t}]${ir}`,"Read more: https://warnings.authjs.dev")},debug(t,r){console.log(`\x1B[90m[auth][debug]:${ir} ${t}`,JSON.stringify(r,null,2))}};function sr(t){let r={...Pi};return t.debug||(r.debug=()=>{}),t.logger?.error&&(r.error=t.logger.error),t.logger?.warn&&(r.warn=t.logger.warn),t.logger?.debug&&(r.debug=t.logger.debug),t.logger??(t.logger=r),r}let Ci=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"],{q:Ii,l:$i}=K;async function Di(t){if(!("body"in t)||!t.body||t.method!=="POST")return;let r=t.headers.get("content-type");return r?.includes("application/json")?await t.json():r?.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await t.text())):void 0}async function Ni(t,r){try{if(t.method!=="GET"&&t.method!=="POST")throw new ft("Only GET and POST requests are supported");r.basePath??(r.basePath="/auth");let n=new URL(t.url),{action:s,providerId:o}=function(a,c){let d=a.match(RegExp(`^${c}(.+)`));if(d===null)throw new ft(`Cannot parse action at ${a}`);let w=d.at(-1).replace(/^\//,"").split("/").filter(Boolean);if(w.length!==1&&w.length!==2)throw new ft(`Cannot parse action at ${a}`);let[x,g]=w;if(!Ci.includes(x)||g&&!["signin","callback","webauthn-options"].includes(x))throw new ft(`Cannot parse action at ${a}`);return{action:x,providerId:g=="undefined"?void 0:g}}(n.pathname,r.basePath);return{url:n,action:s,providerId:o,method:t.method,headers:Object.fromEntries(t.headers),body:t.body?await Di(t):void 0,cookies:Ii(t.headers.get("cookie")??"")??{},error:n.searchParams.get("error")??void 0,query:Object.fromEntries(n.searchParams)}}catch(n){let s=sr(r);s.error(n),s.debug("request",t)}}function Rn(t){let r=new Headers(t.headers);t.cookies?.forEach(o=>{let{name:a,value:c,options:d}=o,w=$i(a,c,d);r.has("Set-Cookie")?r.append("Set-Cookie",w):r.set("Set-Cookie",w)});let n=t.body;r.get("content-type")==="application/json"?n=JSON.stringify(t.body):r.get("content-type")==="application/x-www-form-urlencoded"&&(n=new URLSearchParams(t.body).toString());let s=new Response(n,{headers:r,status:t.redirect?302:t.status??200});return t.redirect&&s.headers.set("Location",t.redirect),s}async function gr(t){let r=new TextEncoder().encode(t);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",r))).map(n=>n.toString(16).padStart(2,"0")).join("").toString()}function Jr(t){let r=n=>("0"+n.toString(16)).slice(-2);return Array.from(crypto.getRandomValues(new Uint8Array(t))).reduce((n,s)=>n+r(s),"")}async function Li({options:t,cookieValue:r,isPost:n,bodyValue:s}){if(r){let[c,d]=r.split("|");if(d===await gr(`${c}${t.secret}`))return{csrfTokenVerified:n&&c===s,csrfToken:c}}let o=Jr(32),a=await gr(`${o}${t.secret}`);return{cookie:`${o}|${a}`,csrfToken:o}}function br(t,r){if(!r)throw new P(`CSRF token was missing during an action ${t}`)}function xr(t){return t!==null&&typeof t=="object"}function vr(t,...r){if(!r.length)return t;let n=r.shift();if(xr(t)&&xr(n))for(let s in n)xr(n[s])?(xr(t[s])||(t[s]=Array.isArray(n[s])?[]:{}),vr(t[s],n[s])):n[s]!==void 0&&(t[s]=n[s]);return vr(t,...r)}let _r=Symbol("skip-csrf-check"),kr=Symbol("return-type-raw"),At=Symbol("custom-fetch"),Un=Symbol("conform-internal"),ji=t=>Pn({id:t.sub??t.id??crypto.randomUUID(),name:t.name??t.nickname??t.preferred_username,email:t.email,image:t.picture}),Hi=t=>Pn({access_token:t.access_token,id_token:t.id_token,refresh_token:t.refresh_token,expires_at:t.expires_at,scope:t.scope,token_type:t.token_type,session_state:t.session_state});function Pn(t){let r={};for(let[n,s]of Object.entries(t))s!==void 0&&(r[n]=s);return r}function zr(t,r){if(!t&&r)return;if(typeof t=="string")return{url:new URL(t)};let n=new URL(t?.url??"https://authjs.dev");if(t?.params!=null)for(let[s,o]of Object.entries(t.params))s==="claims"&&(o=JSON.stringify(o)),n.searchParams.set(s,String(o));return{url:n,request:t?.request,conform:t?.conform,...t?.clientPrivateKey?{clientPrivateKey:t?.clientPrivateKey}:null}}let Wi={signIn:()=>!0,redirect:({url:t,baseUrl:r})=>t.startsWith("/")?`${r}${t}`:new URL(t).origin===r?t:r,session:({session:t})=>({user:{name:t.user?.name,email:t.user?.email,image:t.user?.image},expires:t.expires?.toISOString?.()??t.expires}),jwt:({token:t})=>t};async function Ki({authOptions:t,providerId:r,action:n,url:s,cookies:o,callbackUrl:a,csrfToken:c,csrfDisabled:d,isPost:w}){var x,g;let p=sr(t),{providers:O,provider:k}=function(H){let{providerId:b,config:T}=H,C=new URL(T.basePath??"/auth",H.url.origin),X=T.providers.map(he=>{let te=typeof he=="function"?he():he,{options:Y,...ke}=te,Ae=Y?.id??ke.id,oe=vr(ke,Y,{signinUrl:`${C}/signin/${Ae}`,callbackUrl:`${C}/callback/${Ae}`});if(te.type==="oauth"||te.type==="oidc"){oe.redirectProxyUrl??(oe.redirectProxyUrl=Y?.redirectProxyUrl??T.redirectProxyUrl);let ue=function(me){me.issuer&&(me.wellKnown??(me.wellKnown=`${me.issuer}/.well-known/openid-configuration`));let Ve=zr(me.authorization,me.issuer);Ve&&!Ve.url?.searchParams.has("scope")&&Ve.url.searchParams.set("scope","openid profile email");let Pe=zr(me.token,me.issuer),Ye=zr(me.userinfo,me.issuer),ge=me.checks??["pkce"];return me.redirectProxyUrl&&(ge.includes("state")||ge.push("state"),me.redirectProxyUrl=`${me.redirectProxyUrl}/callback/${me.id}`),{...me,authorization:Ve,token:Pe,checks:ge,userinfo:Ye,profile:me.profile??ji,account:me.account??Hi}}(oe);return ue.authorization?.url.searchParams.get("response_mode")==="form_post"&&delete ue.redirectProxyUrl,ue[At]??(ue[At]=Y?.[At]),ue}return oe}),ee=X.find(({id:he})=>he===b);if(b&&!ee){let he=X.map(te=>te.id).join(", ");throw Error(`Provider with id "${b}" not found. Available providers: [${he}].`)}return{providers:X,provider:ee}}({url:s,providerId:r,config:t}),J=!1;if((k?.type==="oauth"||k?.type==="oidc")&&k.redirectProxyUrl)try{J=new URL(k.redirectProxyUrl).origin===s.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${k.redirectProxyUrl}`)}let W={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...t,url:s,action:n,provider:k,cookies:vr(N(t.useSecureCookies??s.protocol==="https:"),t.cookies),providers:O,session:{strategy:t.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...t.session},jwt:{secret:t.secret,maxAge:t.session?.maxAge??2592e3,encode:yr,decode:wr,...t.jwt},events:(x=t.events??{},g=p,Object.keys(x).reduce((H,b)=>(H[b]=async(...T)=>{try{let C=x[b];return await C(...T)}catch(C){g.error(new A(C))}},H),{})),adapter:function(H,b){if(H)return Object.keys(H).reduce((T,C)=>(T[C]=async(...X)=>{try{b.debug(`adapter_${C}`,{args:X});let ee=H[C];return await ee(...X)}catch(ee){let he=new f(ee);throw b.error(he),he}},T),{})}(t.adapter,p),callbacks:{...Wi,...t.callbacks},logger:p,callbackUrl:s.origin,isOnRedirectProxy:J,experimental:{...t.experimental}},F=[];if(d)W.csrfTokenVerified=!0;else{let{csrfToken:H,cookie:b,csrfTokenVerified:T}=await Li({options:W,cookieValue:o?.[W.cookies.csrfToken.name],isPost:w,bodyValue:c});W.csrfToken=H,W.csrfTokenVerified=T,b&&F.push({name:W.cookies.csrfToken.name,value:b,options:W.cookies.csrfToken.options})}let{callbackUrl:ce,callbackUrlCookie:Q}=await Ui({options:W,cookieValue:o?.[W.cookies.callbackUrl.name],paramValue:a});return W.callbackUrl=ce,Q&&F.push({name:W.cookies.callbackUrl.name,value:Q,options:W.cookies.callbackUrl.options}),{options:W,cookies:F}}var Sr,Mt,ar,Er,Mi,Cn,Br,Ie,Ji,er,e,i,l,h,_,U,q={},de=[],_e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Me=Array.isArray;function Se(t,r){for(var n in r)t[n]=r[n];return t}function rt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function at(t,r,n){var s,o,a,c={};for(a in r)a=="key"?s=r[a]:a=="ref"?o=r[a]:c[a]=r[a];if(arguments.length>2&&(c.children=arguments.length>3?Br.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(a in t.defaultProps)c[a]===void 0&&(c[a]=t.defaultProps[a]);return ht(t,c,s,o,null)}function ht(t,r,n,s,o){var a={type:t,props:r,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++Ji,__i:-1,__u:0};return o==null&&Ie.vnode!=null&&Ie.vnode(a),a}function nt(t){return t.children}function Ot(t,r){this.props=t,this.context=r}function qr(t,r){if(r==null)return t.__?qr(t.__,t.__i+1):null;for(var n;r<t.__k.length;r++)if((n=t.__k[r])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?qr(t):null}function Ks(t){(!t.__d&&(t.__d=!0)&&er.push(t)&&!zi.__r++||e!==Ie.debounceRendering)&&((e=Ie.debounceRendering)||i)(zi)}function zi(){var t,r,n,s,o,a,c,d;for(er.sort(l);t=er.shift();)t.__d&&(r=er.length,s=void 0,a=(o=(n=t).__v).__e,c=[],d=[],n.__P&&((s=Se({},o)).__v=o.__v+1,Ie.vnode&&Ie.vnode(s),fs(n.__P,s,o,n.__n,n.__P.namespaceURI,32&o.__u?[a]:null,c,a??qr(o),!!(32&o.__u),d),s.__v=o.__v,s.__.__k[s.__i]=s,Bs(c,s,d),s.__e!=a&&function w(x){var g,p;if((x=x.__)!=null&&x.__c!=null){for(x.__e=x.__c.base=null,g=0;g<x.__k.length;g++)if((p=x.__k[g])!=null&&p.__e!=null){x.__e=x.__c.base=p.__e;break}return w(x)}}(s)),er.length>r&&er.sort(l));zi.__r=0}function Ms(t,r,n,s,o,a,c,d,w,x,g){var p,O,k,J,W,F=s&&s.__k||de,ce=r.length;for(n.__d=w,function(Q,H,b){var T,C,X,ee,he,te=H.length,Y=b.length,ke=Y,Ae=0;for(Q.__k=[],T=0;T<te;T++)(C=H[T])!=null&&typeof C!="boolean"&&typeof C!="function"?(ee=T+Ae,(C=Q.__k[T]=typeof C=="string"||typeof C=="number"||typeof C=="bigint"||C.constructor==String?ht(null,C,null,null,null):Me(C)?ht(nt,{children:C},null,null,null):C.constructor===void 0&&C.__b>0?ht(C.type,C.props,C.key,C.ref?C.ref:null,C.__v):C).__=Q,C.__b=Q.__b+1,X=null,(he=C.__i=function(oe,ue,me,Ve){var Pe=oe.key,Ye=oe.type,ge=me-1,pt=me+1,Ze=ue[me];if(Ze===null||Ze&&Pe==Ze.key&&Ye===Ze.type&&(131072&Ze.__u)==0)return me;if(Ve>+(Ze!=null&&(131072&Ze.__u)==0))for(;ge>=0||pt<ue.length;){if(ge>=0){if((Ze=ue[ge])&&(131072&Ze.__u)==0&&Pe==Ze.key&&Ye===Ze.type)return ge;ge--}if(pt<ue.length){if((Ze=ue[pt])&&(131072&Ze.__u)==0&&Pe==Ze.key&&Ye===Ze.type)return pt;pt++}}return-1}(C,b,ee,ke))!==-1&&(ke--,(X=b[he])&&(X.__u|=131072)),X==null||X.__v===null?(he==-1&&Ae--,typeof C.type!="function"&&(C.__u|=65536)):he!==ee&&(he==ee-1?Ae--:he==ee+1?Ae++:(he>ee?Ae--:Ae++,C.__u|=65536))):C=Q.__k[T]=null;if(ke)for(T=0;T<Y;T++)(X=b[T])!=null&&(131072&X.__u)==0&&(X.__e==Q.__d&&(Q.__d=qr(X)),function oe(ue,me,Ve){var Pe,Ye;if(Ie.unmount&&Ie.unmount(ue),(Pe=ue.ref)&&(Pe.current&&Pe.current!==ue.__e||ms(Pe,null,me)),(Pe=ue.__c)!=null){if(Pe.componentWillUnmount)try{Pe.componentWillUnmount()}catch(ge){Ie.__e(ge,me)}Pe.base=Pe.__P=null}if(Pe=ue.__k)for(Ye=0;Ye<Pe.length;Ye++)Pe[Ye]&&oe(Pe[Ye],me,Ve||typeof ue.type!="function");Ve||rt(ue.__e),ue.__c=ue.__=ue.__e=ue.__d=void 0}(X,X))}(n,r,F),w=n.__d,p=0;p<ce;p++)(k=n.__k[p])!=null&&(O=k.__i===-1?q:F[k.__i]||q,k.__i=p,fs(t,k,O,o,a,c,d,w,x,g),J=k.__e,k.ref&&O.ref!=k.ref&&(O.ref&&ms(O.ref,null,k),g.push(k.ref,k.__c||J,k)),W==null&&J!=null&&(W=J),65536&k.__u||O.__k===k.__k?w=function Q(H,b,T){var C,X;if(typeof H.type=="function"){for(C=H.__k,X=0;C&&X<C.length;X++)C[X]&&(C[X].__=H,b=Q(C[X],b,T));return b}H.__e!=b&&(b&&H.type&&!T.contains(b)&&(b=qr(H)),T.insertBefore(H.__e,b||null),b=H.__e);do b=b&&b.nextSibling;while(b!=null&&b.nodeType===8);return b}(k,w,t):typeof k.type=="function"&&k.__d!==void 0?w=k.__d:J&&(w=J.nextSibling),k.__d=void 0,k.__u&=-196609);n.__d=w,n.__e=W}function Js(t,r,n){r[0]==="-"?t.setProperty(r,n??""):t[r]=n==null?"":typeof n!="number"||_e.test(r)?n:n+"px"}function Bi(t,r,n,s,o){var a;e:if(r==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(r in s)n&&r in n||Js(t.style,r,"");if(n)for(r in n)s&&n[r]===s[r]||Js(t.style,r,n[r])}else if(r[0]==="o"&&r[1]==="n")a=r!==(r=r.replace(/(PointerCapture)$|Capture$/i,"$1")),r=r.toLowerCase()in t||r==="onFocusOut"||r==="onFocusIn"?r.toLowerCase().slice(2):r.slice(2),t.l||(t.l={}),t.l[r+a]=n,n?s?n.u=s.u:(n.u=h,t.addEventListener(r,a?U:_,a)):t.removeEventListener(r,a?U:_,a);else{if(o=="http://www.w3.org/2000/svg")r=r.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(r!="width"&&r!="height"&&r!="href"&&r!="list"&&r!="form"&&r!="tabIndex"&&r!="download"&&r!="rowSpan"&&r!="colSpan"&&r!="role"&&r!="popover"&&r in t)try{t[r]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&r[4]!=="-"?t.removeAttribute(r):t.setAttribute(r,r=="popover"&&n==1?"":n))}}function zs(t){return function(r){if(this.l){var n=this.l[r.type+t];if(r.t==null)r.t=h++;else if(r.t<n.u)return;return n(Ie.event?Ie.event(r):r)}}}function fs(t,r,n,s,o,a,c,d,w,x){var g,p,O,k,J,W,F,ce,Q,H,b,T,C,X,ee,he,te=r.type;if(r.constructor!==void 0)return null;128&n.__u&&(w=!!(32&n.__u),a=[d=r.__e=n.__e]),(g=Ie.__b)&&g(r);e:if(typeof te=="function")try{if(ce=r.props,Q="prototype"in te&&te.prototype.render,H=(g=te.contextType)&&s[g.__c],b=g?H?H.props.value:g.__:s,n.__c?F=(p=r.__c=n.__c).__=p.__E:(Q?r.__c=p=new te(ce,b):(r.__c=p=new Ot(ce,b),p.constructor=te,p.render=Ga),H&&H.sub(p),p.props=ce,p.state||(p.state={}),p.context=b,p.__n=s,O=p.__d=!0,p.__h=[],p._sb=[]),Q&&p.__s==null&&(p.__s=p.state),Q&&te.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=Se({},p.__s)),Se(p.__s,te.getDerivedStateFromProps(ce,p.__s))),k=p.props,J=p.state,p.__v=r,O)Q&&te.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),Q&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(Q&&te.getDerivedStateFromProps==null&&ce!==k&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(ce,b),!p.__e&&(p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(ce,p.__s,b)===!1||r.__v===n.__v)){for(r.__v!==n.__v&&(p.props=ce,p.state=p.__s,p.__d=!1),r.__e=n.__e,r.__k=n.__k,r.__k.some(function(Y){Y&&(Y.__=r)}),T=0;T<p._sb.length;T++)p.__h.push(p._sb[T]);p._sb=[],p.__h.length&&c.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(ce,p.__s,b),Q&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(k,J,W)})}if(p.context=b,p.props=ce,p.__P=t,p.__e=!1,C=Ie.__r,X=0,Q){for(p.state=p.__s,p.__d=!1,C&&C(r),g=p.render(p.props,p.state,p.context),ee=0;ee<p._sb.length;ee++)p.__h.push(p._sb[ee]);p._sb=[]}else do p.__d=!1,C&&C(r),g=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++X<25);p.state=p.__s,p.getChildContext!=null&&(s=Se(Se({},s),p.getChildContext())),Q&&!O&&p.getSnapshotBeforeUpdate!=null&&(W=p.getSnapshotBeforeUpdate(k,J)),Ms(t,Me(he=g!=null&&g.type===nt&&g.key==null?g.props.children:g)?he:[he],r,n,s,o,a,c,d,w,x),p.base=r.__e,r.__u&=-161,p.__h.length&&c.push(p),F&&(p.__E=p.__=null)}catch(Y){if(r.__v=null,w||a!=null){for(r.__u|=w?160:128;d&&d.nodeType===8&&d.nextSibling;)d=d.nextSibling;a[a.indexOf(d)]=null,r.__e=d}else r.__e=n.__e,r.__k=n.__k;Ie.__e(Y,r,n)}else a==null&&r.__v===n.__v?(r.__k=n.__k,r.__e=n.__e):r.__e=function(Y,ke,Ae,oe,ue,me,Ve,Pe,Ye){var ge,pt,Ze,Qr,ot,Gt,St,lt=Ae.props,it=ke.props,$e=ke.type;if($e==="svg"?ue="http://www.w3.org/2000/svg":$e==="math"?ue="http://www.w3.org/1998/Math/MathML":ue||(ue="http://www.w3.org/1999/xhtml"),me!=null){for(ge=0;ge<me.length;ge++)if((ot=me[ge])&&"setAttribute"in ot==!!$e&&($e?ot.localName===$e:ot.nodeType===3)){Y=ot,me[ge]=null;break}}if(Y==null){if($e===null)return document.createTextNode(it);Y=document.createElementNS(ue,$e,it.is&&it),Pe&&(Ie.__m&&Ie.__m(ke,me),Pe=!1),me=null}if($e===null)lt===it||Pe&&Y.data===it||(Y.data=it);else{if(me=me&&Br.call(Y.childNodes),lt=Ae.props||q,!Pe&&me!=null)for(lt={},ge=0;ge<Y.attributes.length;ge++)lt[(ot=Y.attributes[ge]).name]=ot.value;for(ge in lt)if(ot=lt[ge],ge!="children"){if(ge=="dangerouslySetInnerHTML")Ze=ot;else if(!(ge in it)){if(ge=="value"&&"defaultValue"in it||ge=="checked"&&"defaultChecked"in it)continue;Bi(Y,ge,null,ot,ue)}}for(ge in it)ot=it[ge],ge=="children"?Qr=ot:ge=="dangerouslySetInnerHTML"?pt=ot:ge=="value"?Gt=ot:ge=="checked"?St=ot:Pe&&typeof ot!="function"||lt[ge]===ot||Bi(Y,ge,ot,lt[ge],ue);if(pt)Pe||Ze&&(pt.__html===Ze.__html||pt.__html===Y.innerHTML)||(Y.innerHTML=pt.__html),ke.__k=[];else if(Ze&&(Y.innerHTML=""),Ms(Y,Me(Qr)?Qr:[Qr],ke,Ae,oe,$e==="foreignObject"?"http://www.w3.org/1999/xhtml":ue,me,Ve,me?me[0]:Ae.__k&&qr(Ae,0),Pe,Ye),me!=null)for(ge=me.length;ge--;)rt(me[ge]);Pe||(ge="value",$e==="progress"&&Gt==null?Y.removeAttribute("value"):Gt===void 0||Gt===Y[ge]&&($e!=="progress"||Gt)&&($e!=="option"||Gt===lt[ge])||Bi(Y,ge,Gt,lt[ge],ue),ge="checked",St!==void 0&&St!==Y[ge]&&Bi(Y,ge,St,lt[ge],ue))}return Y}(n.__e,r,n,s,o,a,c,w,x);(g=Ie.diffed)&&g(r)}function Bs(t,r,n){r.__d=void 0;for(var s=0;s<n.length;s++)ms(n[s],n[++s],n[++s]);Ie.__c&&Ie.__c(r,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(a){a.call(o)})}catch(a){Ie.__e(a,o.__v)}})}function ms(t,r,n){try{if(typeof t=="function"){var s=typeof t.__u=="function";s&&t.__u(),s&&r==null||(t.__u=t(r))}else t.current=r}catch(o){Ie.__e(o,n)}}function Ga(t,r,n){return this.constructor(t,n)}function or(t,r){var n,s,o,a,c;n=t,Ie.__&&Ie.__(n,r),o=(s=typeof or=="function")?null:or&&or.__k||r.__k,a=[],c=[],fs(r,n=(!s&&or||r).__k=at(nt,null,[n]),o||q,q,r.namespaceURI,!s&&or?[or]:o?null:r.firstChild?Br.call(r.childNodes):null,a,!s&&or?or:o?o.__e:r.firstChild,s,c),Bs(a,n,c)}Br=de.slice,Ie={__e:function(t,r,n,s){for(var o,a,c;r=r.__;)if((o=r.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(t)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,s||{}),c=o.__d),c)return o.__E=o}catch(d){t=d}throw t}},Ji=0,Ot.prototype.setState=function(t,r){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Se({},this.state),typeof t=="function"&&(t=t(Se({},n),this.props)),t&&Se(n,t),t!=null&&this.__v&&(r&&this._sb.push(r),Ks(this))},Ot.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ks(this))},Ot.prototype.render=nt,er=[],i=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=function(t,r){return t.__v.__b-r.__v.__b},zi.__r=0,h=0,_=zs(!1),U=zs(!0);var qs=/[\s\n\\/='"\0<>]/,Fs=/^(xlink|xmlns|xml)([A-Z])/,Xa=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,Ya=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,Za=new Set(["draggable","spellcheck"]),Qa=/["&<]/;function qi(t){if(t.length===0||Qa.test(t)===!1)return t;for(var r=0,n=0,s="",o="";n<t.length;n++){switch(t.charCodeAt(n)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;default:continue}n!==r&&(s+=t.slice(r,n)),s+=o,r=n+1}return n!==r&&(s+=t.slice(r,n)),s}var Vs={},eo=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),to=/[A-Z]/g;function Gs(){this.__d=!0}var Oc=null,ys,Ar,In,$n,ws={},Xs=[],Dn=Array.isArray,gs=Object.assign;function Ys(t,r){var n,s=t.type,o=!0;return t.__c?(o=!1,(n=t.__c).state=n.__s):n=new s(t.props,r),t.__c=n,n.__v=t,n.props=t.props,n.context=r,n.__d=!0,n.state==null&&(n.state=ws),n.__s==null&&(n.__s=n.state),s.getDerivedStateFromProps?n.state=gs({},n.state,s.getDerivedStateFromProps(n.props,n.state)):o&&n.componentWillMount?(n.componentWillMount(),n.state=n.__s!==n.state?n.__s:n.state):!o&&n.componentWillUpdate&&n.componentWillUpdate(),In&&In(t),n.render(n.props,n.state,r)}var ro=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),Tc=/["&<]/,no=0;function se(t,r,n,s,o,a){r||(r={});var c,d,w=r;"ref"in r&&(c=r.ref,delete r.ref);var x={type:t,props:w,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--no,__i:-1,__u:0,__source:o,__self:a};if(typeof t=="function"&&(c=t.defaultProps))for(d in c)w[d]===void 0&&(w[d]=c[d]);return Ie.vnode&&Ie.vnode(x),x}async function io(t,r){let n=window.SimpleWebAuthnBrowser;async function s(g){let p=new URL(`${t}/webauthn-options/${r}`);g&&p.searchParams.append("action",g),a().forEach(k=>{p.searchParams.append(k.name,k.value)});let O=await fetch(p);return O.ok?O.json():void console.error("Failed to fetch options",O)}function o(){let g=`#${r}-form`,p=document.querySelector(g);if(!p)throw Error(`Form '${g}' not found`);return p}function a(){return Array.from(o().querySelectorAll("input[data-form-field]"))}async function c(g,p){let O=o();if(g){let k=document.createElement("input");k.type="hidden",k.name="action",k.value=g,O.appendChild(k)}if(p){let k=document.createElement("input");k.type="hidden",k.name="data",k.value=JSON.stringify(p),O.appendChild(k)}return O.submit()}async function d(g,p){let O=await n.startAuthentication(g,p);return await c("authenticate",O)}async function w(g){a().forEach(O=>{if(O.required&&!O.value)throw Error(`Missing required field: ${O.name}`)});let p=await n.startRegistration(g);return await c("register",p)}async function x(){if(!n.browserSupportsWebAuthnAutofill())return;let g=await s("authenticate");if(!g)return void console.error("Failed to fetch option for autofill authentication");try{await d(g.options,!0)}catch(p){console.error(p)}}(async function(){let g=o();if(!n.browserSupportsWebAuthn()){g.style.display="none";return}g&&g.addEventListener("submit",async p=>{p.preventDefault();let O=await s(void 0);if(!O)return void console.error("Failed to fetch options for form submission");if(O.action==="authenticate")try{await d(O.options,!1)}catch(k){console.error(k)}else if(O.action==="register")try{await w(O.options)}catch(k){console.error(k)}})})(),x()}let Zs={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."},so=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
  --provider-bg: #fff;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #fff
  );
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
  --provider-bg: #161b22;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #000
  );
}

.__next-auth-theme-dark img[src$="42-school.svg"],
  .__next-auth-theme-dark img[src$="apple.svg"],
  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],
  .__next-auth-theme-dark img[src$="eveonline.svg"],
  .__next-auth-theme-dark img[src$="github.svg"],
  .__next-auth-theme-dark img[src$="mailchimp.svg"],
  .__next-auth-theme-dark img[src$="medium.svg"],
  .__next-auth-theme-dark img[src$="okta.svg"],
  .__next-auth-theme-dark img[src$="patreon.svg"],
  .__next-auth-theme-dark img[src$="ping-id.svg"],
  .__next-auth-theme-dark img[src$="roblox.svg"],
  .__next-auth-theme-dark img[src$="threads.svg"],
  .__next-auth-theme-dark img[src$="wikimedia.svg"] {
    filter: invert(1);
  }

.__next-auth-theme-dark #submitButton {
    background-color: var(--provider-bg, var(--color-info));
  }

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
    --provider-bg: #161b22;
    --provider-bg-hover: color-mix(
      in srgb,
      var(--provider-brand-color) 30%,
      #000
    );
  }
    .__next-auth-theme-auto img[src$="42-school.svg"],
    .__next-auth-theme-auto img[src$="apple.svg"],
    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],
    .__next-auth-theme-auto img[src$="eveonline.svg"],
    .__next-auth-theme-auto img[src$="github.svg"],
    .__next-auth-theme-auto img[src$="mailchimp.svg"],
    .__next-auth-theme-auto img[src$="medium.svg"],
    .__next-auth-theme-auto img[src$="okta.svg"],
    .__next-auth-theme-auto img[src$="patreon.svg"],
    .__next-auth-theme-auto img[src$="ping-id.svg"],
    .__next-auth-theme-auto img[src$="roblox.svg"],
    .__next-auth-theme-auto img[src$="threads.svg"],
    .__next-auth-theme-auto img[src$="wikimedia.svg"] {
      filter: invert(1);
    }
    .__next-auth-theme-auto #submitButton {
      background-color: var(--provider-bg, var(--color-info));
    }
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background));
  border: 1px solid #00000031;
  font-size: 0.9rem;
  height: 50px;
  border-radius: var(--border-radius);
  transition: background-color 250ms ease-in-out;
  font-weight: 300;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) span {
    color: var(--provider-bg);
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 1rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.card input[type]::-moz-placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type]::placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type] {
    background: color-mix(in srgb, var(--color-background-card) 95%, black);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}

@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function Fi({html:t,title:r,status:n,cookies:s,theme:o,headTags:a}){return{cookies:s,status:n,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${so}</style><title>${r}</title>${a??""}</head><body class="__next-auth-theme-${o?.colorScheme??"auto"}"><div class="page">${function(c,d,w){var x=Ie.__s;Ie.__s=!0,ys=Ie.__b,Ar=Ie.diffed,In=Ie.__r,$n=Ie.unmount;var g=at(nt,null);g.__k=[c];try{var p=function O(k,J,W,F,ce,Q,H){if(k==null||k===!0||k===!1||k==="")return"";var b=typeof k;if(b!="object")return b=="function"?"":b=="string"?qi(k):k+"";if(Dn(k)){var T,C="";ce.__k=k;for(var X=0;X<k.length;X++){var ee=k[X];if(ee!=null&&typeof ee!="boolean"){var he,te=O(ee,J,W,F,ce,Q,H);typeof te=="string"?C+=te:(T||(T=[]),C&&T.push(C),C="",Dn(te)?(he=T).push.apply(he,te):T.push(te))}}return T?(C&&T.push(C),T):C}if(k.constructor!==void 0)return"";k.__=ce,ys&&ys(k);var Y=k.type,ke=k.props;if(typeof Y=="function"){var Ae,oe,ue,me=J;if(Y===nt){if("tpl"in ke){for(var Ve="",Pe=0;Pe<ke.tpl.length;Pe++)if(Ve+=ke.tpl[Pe],ke.exprs&&Pe<ke.exprs.length){var Ye=ke.exprs[Pe];if(Ye==null)continue;typeof Ye=="object"&&(Ye.constructor===void 0||Dn(Ye))?Ve+=O(Ye,J,W,F,k,Q,H):Ve+=Ye}return Ve}if("UNSTABLE_comment"in ke)return"<!--"+qi(ke.UNSTABLE_comment)+"-->";oe=ke.children}else{if((Ae=Y.contextType)!=null){var ge=J[Ae.__c];me=ge?ge.props.value:Ae.__}var pt=Y.prototype&&typeof Y.prototype.render=="function";if(pt)oe=Ys(k,me),ue=k.__c;else{k.__c=ue={__v:k,context:me,props:k.props,setState:Gs,forceUpdate:Gs,__d:!0,__h:[]};for(var Ze=0;ue.__d&&Ze++<25;)ue.__d=!1,In&&In(k),oe=Y.call(ue,ke,me);ue.__d=!0}if(ue.getChildContext!=null&&(J=gs({},J,ue.getChildContext())),pt&&Ie.errorBoundaries&&(Y.getDerivedStateFromError||ue.componentDidCatch)){oe=oe!=null&&oe.type===nt&&oe.key==null&&oe.props.tpl==null?oe.props.children:oe;try{return O(oe,J,W,F,k,Q,H)}catch(Rt){return Y.getDerivedStateFromError&&(ue.__s=Y.getDerivedStateFromError(Rt)),ue.componentDidCatch&&ue.componentDidCatch(Rt,ws),ue.__d?(oe=Ys(k,J),(ue=k.__c).getChildContext!=null&&(J=gs({},J,ue.getChildContext())),O(oe=oe!=null&&oe.type===nt&&oe.key==null&&oe.props.tpl==null?oe.props.children:oe,J,W,F,k,Q,H)):""}finally{Ar&&Ar(k),k.__=null,$n&&$n(k)}}}oe=oe!=null&&oe.type===nt&&oe.key==null&&oe.props.tpl==null?oe.props.children:oe;try{var Qr=O(oe,J,W,F,k,Q,H);return Ar&&Ar(k),k.__=null,Ie.unmount&&Ie.unmount(k),Qr}catch(Rt){if(!Q&&H&&H.onError){var ot=H.onError(Rt,k,function(Pr){return O(Pr,J,W,F,k,Q,H)});if(ot!==void 0)return ot;var Gt=Ie.__e;return Gt&&Gt(Rt,k),""}if(!Q||!Rt||typeof Rt.then!="function")throw Rt;return Rt.then(function Pr(){try{return O(oe,J,W,F,k,Q,H)}catch(zt){if(!zt||typeof zt.then!="function")throw zt;return zt.then(function(){return O(oe,J,W,F,k,Q,H)},Pr)}})}}var St,lt="<"+Y,it="";for(var $e in ke){var ut=ke[$e];if(typeof ut!="function"||$e==="class"||$e==="className"){switch($e){case"children":St=ut;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in ke)continue;$e="for";break;case"className":if("class"in ke)continue;$e="class";break;case"defaultChecked":$e="checked";break;case"defaultSelected":$e="selected";break;case"defaultValue":case"value":switch($e="value",Y){case"textarea":St=ut;continue;case"select":F=ut;continue;case"option":F!=ut||"selected"in ke||(lt+=" selected")}break;case"dangerouslySetInnerHTML":it=ut&&ut.__html;continue;case"style":typeof ut=="object"&&(ut=function(Rt){var Pr="";for(var zt in Rt){var ds=Rt[zt];if(ds!=null&&ds!==""){var Hs=zt[0]=="-"?zt:Vs[zt]||(Vs[zt]=zt.replace(to,"-$&").toLowerCase()),qa=";";typeof ds!="number"||Hs.startsWith("--")||eo.has(Hs)||(qa="px;"),Pr=Pr+Hs+":"+ds+qa}}return Pr||void 0}(ut));break;case"acceptCharset":$e="accept-charset";break;case"httpEquiv":$e="http-equiv";break;default:if(Fs.test($e))$e=$e.replace(Fs,"$1:$2").toLowerCase();else{if(qs.test($e))continue;($e[4]==="-"||Za.has($e))&&ut!=null?ut+="":W?Ya.test($e)&&($e=$e==="panose1"?"panose-1":$e.replace(/([A-Z])/g,"-$1").toLowerCase()):Xa.test($e)&&($e=$e.toLowerCase())}}ut!=null&&ut!==!1&&(lt=ut===!0||ut===""?lt+" "+$e:lt+" "+$e+'="'+(typeof ut=="string"?qi(ut):ut+"")+'"')}}if(qs.test(Y))throw Error(Y+" is not a valid HTML tag name in "+lt+">");if(it||(typeof St=="string"?it=qi(St):St!=null&&St!==!1&&St!==!0&&(it=O(St,J,Y==="svg"||Y!=="foreignObject"&&W,F,k,Q,H))),Ar&&Ar(k),k.__=null,$n&&$n(k),!it&&ro.has(Y))return lt+"/>";var Ls="</"+Y+">",js=lt+">";return Dn(it)?[js].concat(it,[Ls]):typeof it!="string"?[js,it,Ls]:js+it+Ls}(c,ws,!1,void 0,g,!1,void 0);return Dn(p)?p.join(""):p}catch(O){throw O.then?Error('Use "renderToStringAsync" for suspenseful rendering.'):O}finally{Ie.__c&&Ie.__c(c,Xs),Ie.__s=x,Xs.length=0}}(t)}</div></body></html>`}}function Qs(t){let{url:r,theme:n,query:s,cookies:o,pages:a,providers:c}=t;return{csrf:(d,w,x)=>d?(w.logger.warn("csrf-disabled"),x.push({name:w.cookies.csrfToken.name,value:"",options:{...w.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:x}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:w.csrfToken},cookies:x},providers:d=>({headers:{"Content-Type":"application/json"},body:d.reduce((w,{id:x,name:g,type:p,signinUrl:O,callbackUrl:k})=>(w[x]={id:x,name:g,type:p,signinUrl:O,callbackUrl:k},w),{})}),signin(d,w){if(d)throw new ft("Unsupported action");if(a?.signIn){let p=`${a.signIn}${a.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:t.callbackUrl??"/"})}`;return w&&(p=`${p}&${new URLSearchParams({error:w})}`),{redirect:p,cookies:o}}let x=c?.find(p=>p.type==="webauthn"&&p.enableConditionalUI&&!!p.simpleWebAuthnBrowserVersion),g="";if(x){let{simpleWebAuthnBrowserVersion:p}=x;g=`<script src="https://unpkg.com/@simplewebauthn/browser@${p}/dist/bundle/index.umd.min.js" crossorigin="anonymous"><\/script>`}return Fi({cookies:o,theme:n,html:function(p){let{csrfToken:O,providers:k=[],callbackUrl:J,theme:W,email:F,error:ce}=p;typeof document<"u"&&W?.brandColor&&document.documentElement.style.setProperty("--brand-color",W.brandColor),typeof document<"u"&&W?.buttonText&&document.documentElement.style.setProperty("--button-text-color",W.buttonText);let Q=ce&&(Zs[ce]??Zs.default),H=k.find(b=>b.type==="webauthn"&&b.enableConditionalUI)?.id;return se("div",{className:"signin",children:[W?.brandColor&&se("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${W.brandColor}}`}}),W?.buttonText&&se("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${W.buttonText}
        }
      `}}),se("div",{className:"card",children:[Q&&se("div",{className:"error",children:se("p",{children:Q})}),W?.logo&&se("img",{src:W.logo,alt:"Logo",className:"logo"}),k.map((b,T)=>{let C,X,ee;(b.type==="oauth"||b.type==="oidc")&&({bg:C="#fff",brandColor:X,logo:ee=`https://authjs.dev/img/providers/${b.id}.svg`}=b.style??{});let he=X??C??"#fff";return se("div",{className:"provider",children:[b.type==="oauth"||b.type==="oidc"?se("form",{action:b.signinUrl,method:"POST",children:[se("input",{type:"hidden",name:"csrfToken",value:O}),J&&se("input",{type:"hidden",name:"callbackUrl",value:J}),se("button",{type:"submit",className:"button",style:{"--provider-brand-color":he},tabIndex:0,children:[se("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",b.name]}),ee&&se("img",{loading:"lazy",height:24,src:ee})]})]}):null,(b.type==="email"||b.type==="credentials"||b.type==="webauthn")&&T>0&&k[T-1].type!=="email"&&k[T-1].type!=="credentials"&&k[T-1].type!=="webauthn"&&se("hr",{}),b.type==="email"&&se("form",{action:b.signinUrl,method:"POST",children:[se("input",{type:"hidden",name:"csrfToken",value:O}),se("label",{className:"section-header",htmlFor:`input-email-for-${b.id}-provider`,children:"Email"}),se("input",{id:`input-email-for-${b.id}-provider`,autoFocus:!0,type:"email",name:"email",value:F,placeholder:"email@example.com",required:!0}),se("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",b.name]})]}),b.type==="credentials"&&se("form",{action:b.callbackUrl,method:"POST",children:[se("input",{type:"hidden",name:"csrfToken",value:O}),Object.keys(b.credentials).map(te=>se("div",{children:[se("label",{className:"section-header",htmlFor:`input-${te}-for-${b.id}-provider`,children:b.credentials[te].label??te}),se("input",{name:te,id:`input-${te}-for-${b.id}-provider`,type:b.credentials[te].type??"text",placeholder:b.credentials[te].placeholder??"",...b.credentials[te]})]},`input-group-${b.id}`)),se("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",b.name]})]}),b.type==="webauthn"&&se("form",{action:b.callbackUrl,method:"POST",id:`${b.id}-form`,children:[se("input",{type:"hidden",name:"csrfToken",value:O}),Object.keys(b.formFields).map(te=>se("div",{children:[se("label",{className:"section-header",htmlFor:`input-${te}-for-${b.id}-provider`,children:b.formFields[te].label??te}),se("input",{name:te,"data-form-field":!0,id:`input-${te}-for-${b.id}-provider`,type:b.formFields[te].type??"text",placeholder:b.formFields[te].placeholder??"",...b.formFields[te]})]},`input-group-${b.id}`)),se("button",{id:`submitButton-${b.id}`,type:"submit",tabIndex:0,children:["Sign in with ",b.name]})]}),(b.type==="email"||b.type==="credentials"||b.type==="webauthn")&&T+1<k.length&&se("hr",{})]},b.id)})]}),H&&se(nt,{children:se("script",{dangerouslySetInnerHTML:{__html:`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${io})(authURL, "${H}");
`}})})]})}({csrfToken:t.csrfToken,providers:t.providers?.filter(p=>["email","oauth","oidc"].includes(p.type)||p.type==="credentials"&&p.credentials||p.type==="webauthn"&&p.formFields||!1),callbackUrl:t.callbackUrl,theme:t.theme,error:w,...s}),title:"Sign In",headTags:g})},signout:()=>a?.signOut?{redirect:a.signOut,cookies:o}:Fi({cookies:o,theme:n,html:function(d){let{url:w,csrfToken:x,theme:g}=d;return se("div",{className:"signout",children:[g?.brandColor&&se("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${g.brandColor}
        }
      `}}),g?.buttonText&&se("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${g.buttonText}
        }
      `}}),se("div",{className:"card",children:[g?.logo&&se("img",{src:g.logo,alt:"Logo",className:"logo"}),se("h1",{children:"Signout"}),se("p",{children:"Are you sure you want to sign out?"}),se("form",{action:w?.toString(),method:"POST",children:[se("input",{type:"hidden",name:"csrfToken",value:x}),se("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}({csrfToken:t.csrfToken,url:r,theme:n}),title:"Sign Out"}),verifyRequest:d=>a?.verifyRequest?{redirect:`${a.verifyRequest}${r?.search??""}`,cookies:o}:Fi({cookies:o,theme:n,html:function(w){let{url:x,theme:g}=w;return se("div",{className:"verify-request",children:[g.brandColor&&se("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${g.brandColor}
        }
      `}}),se("div",{className:"card",children:[g.logo&&se("img",{src:g.logo,alt:"Logo",className:"logo"}),se("h1",{children:"Check your email"}),se("p",{children:"A sign in link has been sent to your email address."}),se("p",{children:se("a",{className:"site",href:x.origin,children:x.host})})]})]})}({url:r,theme:n,...d}),title:"Verify Request"}),error:d=>a?.error?{redirect:`${a.error}${a.error.includes("?")?"&":"?"}error=${d}`,cookies:o}:Fi({cookies:o,theme:n,...function(w){let{url:x,error:g="default",theme:p}=w,O=`${x}/signin`,k={default:{status:200,heading:"Error",message:se("p",{children:se("a",{className:"site",href:x?.origin,children:x?.host})})},Configuration:{status:500,heading:"Server error",message:se("div",{children:[se("p",{children:"There is a problem with the server configuration."}),se("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:se("div",{children:[se("p",{children:"You do not have permission to sign in."}),se("p",{children:se("a",{className:"button",href:O,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:se("div",{children:[se("p",{children:"The sign in link is no longer valid."}),se("p",{children:"It may have been used already or it may have expired."})]}),signin:se("a",{className:"button",href:O,children:"Sign in"})}},{status:J,heading:W,message:F,signin:ce}=k[g]??k.default;return{status:J,html:se("div",{className:"error",children:[p?.brandColor&&se("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${p?.brandColor}
        }
      `}}),se("div",{className:"card",children:[p?.logo&&se("img",{src:p?.logo,alt:"Logo",className:"logo"}),se("h1",{children:W}),se("div",{className:"message",children:F}),ce]})]})}}({url:r,theme:n,error:d}),title:"Error"})}}function Or(t,r=Date.now()){return new Date(r+1e3*t)}async function bs(t,r,n,s){if(!n?.providerAccountId||!n.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(n.type))throw Error("Provider not supported");let{adapter:o,jwt:a,events:c,session:{strategy:d,generateSessionToken:w}}=s;if(!o)return{user:r,account:n};let x=n,{createUser:g,updateUser:p,getUser:O,getUserByAccount:k,getUserByEmail:J,linkAccount:W,createSession:F,getSessionAndUser:ce,deleteSession:Q}=o,H=null,b=null,T=!1,C=d==="jwt";if(t)if(C)try{let ee=s.cookies.sessionToken.name;(H=await a.decode({...a,token:t,salt:ee}))&&"sub"in H&&H.sub&&(b=await O(H.sub))}catch{}else{let ee=await ce(t);ee&&(H=ee.session,b=ee.user)}if(x.type==="email"){let ee=await J(r.email);return ee?(b?.id!==ee.id&&!C&&t&&await Q(t),b=await p({id:ee.id,emailVerified:new Date}),await c.updateUser?.({user:b})):(b=await g({...r,emailVerified:new Date}),await c.createUser?.({user:b}),T=!0),{session:H=C?{}:await F({sessionToken:w(),userId:b.id,expires:Or(s.session.maxAge)}),user:b,isNewUser:T}}if(x.type==="webauthn"){let ee=await k({providerAccountId:x.providerAccountId,provider:x.provider});if(ee){if(b){if(ee.id===b.id){let te={...x,userId:b.id};return{session:H,user:b,isNewUser:T,account:te}}throw new Fe("The account is already associated with another user",{provider:x.provider})}H=C?{}:await F({sessionToken:w(),userId:ee.id,expires:Or(s.session.maxAge)});let he={...x,userId:ee.id};return{session:H,user:ee,isNewUser:T,account:he}}{if(b){await W({...x,userId:b.id}),await c.linkAccount?.({user:b,account:x,profile:r});let te={...x,userId:b.id};return{session:H,user:b,isNewUser:T,account:te}}if(r.email&&await J(r.email))throw new Fe("Another account already exists with the same e-mail address",{provider:x.provider});b=await g({...r}),await c.createUser?.({user:b}),await W({...x,userId:b.id}),await c.linkAccount?.({user:b,account:x,profile:r}),H=C?{}:await F({sessionToken:w(),userId:b.id,expires:Or(s.session.maxAge)});let he={...x,userId:b.id};return{session:H,user:b,isNewUser:!0,account:he}}}let X=await k({providerAccountId:x.providerAccountId,provider:x.provider});if(X){if(b){if(X.id===b.id)return{session:H,user:b,isNewUser:T};throw new Oe("The account is already associated with another user",{provider:x.provider})}return{session:H=C?{}:await F({sessionToken:w(),userId:X.id,expires:Or(s.session.maxAge)}),user:X,isNewUser:T}}{let{provider:ee}=s,{type:he,provider:te,providerAccountId:Y,userId:ke,...Ae}=x;if(x=Object.assign(ee.account(Ae)??{},{providerAccountId:Y,provider:te,type:he,userId:ke}),b)return await W({...x,userId:b.id}),await c.linkAccount?.({user:b,account:x,profile:r}),{session:H,user:b,isNewUser:T};let oe=r.email?await J(r.email):null;if(oe)if(s.provider?.allowDangerousEmailAccountLinking)b=oe,T=!1;else throw new Oe("Another account already exists with the same e-mail address",{provider:x.provider});else b=await g({...r,emailVerified:null}),T=!0;return await c.createUser?.({user:b}),await W({...x,userId:b.id}),await c.linkAccount?.({user:b,account:x,profile:r}),{session:H=C?{}:await F({sessionToken:w(),userId:b.id,expires:Or(s.session.maxAge)}),user:b,isNewUser:T}}}function Fr(t,r){if(t==null)return!1;try{return t instanceof r||Object.getPrototypeOf(t)[Symbol.toStringTag]===r.prototype[Symbol.toStringTag]}catch{return!1}}typeof navigator<"u"&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(ie="oauth4webapi/v3.5.5");let yt="ERR_INVALID_ARG_VALUE",xt="ERR_INVALID_ARG_TYPE";function Je(t,r,n){let s=TypeError(t,{cause:n});return Object.assign(s,{code:r}),s}let Ft=Symbol(),ea=Symbol(),ao=Symbol(),Vt=Symbol(),ta=Symbol(),Vi=Symbol(),Vr=Symbol(),oo=new TextEncoder,co=new TextDecoder;function Tt(t){return typeof t=="string"?oo.encode(t):co.decode(t)}function Jt(t){return typeof t=="string"?re(t):Z(t)}Z=Uint8Array.prototype.toBase64?t=>(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t.toBase64({alphabet:"base64url",omitPadding:!0})):t=>{t instanceof ArrayBuffer&&(t=new Uint8Array(t));let r=[];for(let n=0;n<t.byteLength;n+=32768)r.push(String.fromCharCode.apply(null,t.subarray(n,n+32768)));return btoa(r.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},re=Uint8Array.fromBase64?t=>{try{return Uint8Array.fromBase64(t,{alphabet:"base64url"})}catch(r){throw Je("The input to be decoded is not correctly encoded.",yt,r)}}:t=>{try{let r=atob(t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}catch(r){throw Je("The input to be decoded is not correctly encoded.",yt,r)}};class wt extends Error{code;constructor(r,n){super(r,n),this.name=this.constructor.name,this.code=Jo,Error.captureStackTrace?.(this,this.constructor)}}class lo extends Error{code;constructor(r,n){super(r,n),this.name=this.constructor.name,n?.code&&(this.code=n?.code),Error.captureStackTrace?.(this,this.constructor)}}function we(t,r,n){return new lo(t,{code:r,cause:n})}function uo(t,r){if(!(t instanceof CryptoKey))throw Je(`${r} must be a CryptoKey`,xt)}function ho(t,r){if(uo(t,r),t.type!=="private")throw Je(`${r} must be a private CryptoKey`,yt)}function Tr(t){return!(t===null||typeof t!="object"||Array.isArray(t))}function Nn(t){Fr(t,Headers)&&(t=Object.fromEntries(t.entries()));let r=new Headers(t??{});if(ie&&!r.has("user-agent")&&r.set("user-agent",ie),r.has("authorization"))throw Je('"options.headers" must not include the "authorization" header name',yt);return r}function Gi(t){if(typeof t=="function"&&(t=t()),!(t instanceof AbortSignal))throw Je('"options.signal" must return or be an instance of AbortSignal',xt);return t}function ra(t){return t.includes("//")?t.replace("//","/"):t}async function po(t,r,n,s){if(!(t instanceof URL))throw Je(`"${r}" must be an instance of URL`,xt);_s(t,s?.[Ft]!==!0);let o=n(new URL(t.href)),a=Nn(s?.headers);return a.set("accept","application/json"),(s?.[Vt]||fetch)(o.href,{body:void 0,headers:Object.fromEntries(a.entries()),method:"GET",redirect:"manual",signal:s?.signal?Gi(s.signal):void 0})}async function xs(t,r){return po(t,"issuerIdentifier",n=>{switch(r?.algorithm){case void 0:case"oidc":n.pathname=ra(`${n.pathname}/.well-known/openid-configuration`);break;case"oauth2":(function(s,o,a=!1){s.pathname==="/"?s.pathname=o:s.pathname=ra(`${o}/${a?s.pathname:s.pathname.replace(/(\/)$/,"")}`)})(n,".well-known/oauth-authorization-server");break;default:throw Je('"options.algorithm" must be "oidc" (default), or "oauth2"',yt)}return n},r)}function Ln(t,r,n,s,o){try{if(typeof t!="number"||!Number.isFinite(t))throw Je(`${n} must be a number`,xt,o);if(t>0)return;if(r){if(t!==0)throw Je(`${n} must be a non-negative number`,yt,o);return}throw Je(`${n} must be a positive number`,yt,o)}catch(a){throw s?we(a.message,s,o):a}}function ct(t,r,n,s){try{if(typeof t!="string")throw Je(`${r} must be a string`,xt,s);if(t.length===0)throw Je(`${r} must not be empty`,yt,s)}catch(o){throw n?we(o.message,n,s):o}}async function vs(t,r){if(!(t instanceof URL)&&t!==Aa)throw Je('"expectedIssuerIdentifier" must be an instance of URL',xt);if(!Fr(r,Response))throw Je('"response" must be an instance of Response',xt);if(r.status!==200)throw we('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',es,r);Hn(r);let n=await rs(r);if(ct(n.issuer,'"response" body "issuer" property',He,{body:n}),t!==Aa&&new URL(n.issuer).href!==t.href)throw we('"response" body "issuer" property does not match the expected value',ba,{expected:t.href,body:n,attribute:"issuer"});return n}function na(t){var r=t,n="application/json";if(Qi(r)!==n)throw ia(r,n)}function ia(t,...r){let n='"response" content-type must be ';if(r.length>2){let s=r.pop();n+=`${r.join(", ")}, or ${s}`}else r.length===2?n+=`${r[0]} or ${r[1]}`:n+=r[0];return we(n,qo,t)}function Xi(){return Jt(crypto.getRandomValues(new Uint8Array(32)))}async function fo(t){return ct(t,"codeVerifier"),Jt(await crypto.subtle.digest("SHA-256",Tt(t)))}function mo(t){switch(t.algorithm.name){case"RSA-PSS":switch(t.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new wt("unsupported RsaHashedKeyAlgorithm hash name",{cause:t})}case"RSASSA-PKCS1-v1_5":switch(t.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new wt("unsupported RsaHashedKeyAlgorithm hash name",{cause:t})}case"ECDSA":switch(t.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new wt("unsupported EcKeyAlgorithm namedCurve",{cause:t})}case"Ed25519":case"EdDSA":return"Ed25519";default:throw new wt("unsupported CryptoKey algorithm name",{cause:t})}}function Gr(t){let r=t?.[ea];return typeof r=="number"&&Number.isFinite(r)?r:0}function Yi(t){let r=t?.[ao];return typeof r=="number"&&Number.isFinite(r)&&Math.sign(r)!==-1?r:30}function Rr(){return Math.floor(Date.now()/1e3)}function Xr(t){if(typeof t!="object"||t===null)throw Je('"as" must be an object',xt);ct(t.issuer,'"as.issuer"')}function jn(t){if(typeof t!="object"||t===null)throw Je('"client" must be an object',xt);ct(t.client_id,'"client.client_id"')}function sa(t,r){let n=Rr()+Gr(r);return{jti:Xi(),aud:t.issuer,exp:n+60,iat:n,nbf:n,iss:r.client_id,sub:r.client_id}}async function yo(t,r,n){if(!n.usages.includes("sign"))throw Je('CryptoKey instances used for signing assertions must include "sign" in their "usages"',yt);let s=`${Jt(Tt(JSON.stringify(t)))}.${Jt(Tt(JSON.stringify(r)))}`,o=Jt(await crypto.subtle.sign(_a(n),n,Tt(s)));return`${s}.${o}`}async function wo(t){let{kty:r,e:n,n:s,x:o,y:a,crv:c}=await crypto.subtle.exportKey("jwk",t),d={kty:r,e:n,n:s,x:o,y:a,crv:c};return z.set(t,d),d}async function Rc(t){return(z||=new WeakMap).get(t)||wo(t)}let go=URL.parse?(t,r)=>URL.parse(t,r):(t,r)=>{try{return new URL(t,r)}catch{return null}};function _s(t,r){if(r&&t.protocol!=="https:")throw we("only requests to HTTPS are allowed",Fo,t);if(t.protocol!=="https:"&&t.protocol!=="http:")throw we("only HTTP and HTTPS requests are allowed",Vo,t)}function aa(t,r,n,s){let o;if(typeof t!="string"||!(o=go(t)))throw we(`authorization server metadata does not contain a valid ${n?`"as.mtls_endpoint_aliases.${r}"`:`"as.${r}"`}`,t===void 0?Go:Xo,{attribute:n?`mtls_endpoint_aliases.${r}`:r});return _s(o,s),o}function ks(t,r,n,s){return n&&t.mtls_endpoint_aliases&&r in t.mtls_endpoint_aliases?aa(t.mtls_endpoint_aliases[r],r,n,s):aa(t[r],r,n,s)}class bo extends Error{cause;code;error;status;error_description;response;constructor(r,n){super(r,n),this.name=this.constructor.name,this.code=Mo,this.cause=n.cause,this.error=n.cause.error,this.status=n.response.status,this.error_description=n.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:n.response}),Error.captureStackTrace?.(this,this.constructor)}}class oa extends Error{cause;code;error;error_description;constructor(r,n){super(r,n),this.name=this.constructor.name,this.code=zo,this.cause=n.cause,this.error=n.cause.get("error"),this.error_description=n.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class xo extends Error{cause;code;response;status;constructor(r,n){super(r,n),this.name=this.constructor.name,this.code=Ko,this.cause=n.cause,this.status=n.response.status,this.response=n.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let Zi="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",vo=RegExp("^[,\\s]*("+Zi+")\\s(.*)"),_o=RegExp("^[,\\s]*("+Zi+')\\s*=\\s*"((?:[^"\\\\]|\\\\.)*)"[,\\s]*(.*)'),ko=RegExp("^[,\\s]*"+("("+Zi+")\\s*=\\s*(")+Zi+")[,\\s]*(.*)"),So=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+[=]{0,2})(?:$|[,\\s])(.*)");async function Eo(t){if(t.status>399&&t.status<500){Hn(t),na(t);try{let r=await t.clone().json();if(Tr(r)&&typeof r.error=="string"&&r.error.length)return r}catch{}}}async function Ao(t,r,n){if(t.status!==r){let s;throw(s=await Eo(t))?(await t.body?.cancel(),new bo("server responded with an error in the response body",{cause:s,response:t})):we(`"response" is not a conform ${n} response (unexpected HTTP status code)`,es,t)}}function ca(t){if(!Es.has(t))throw Je('"options.DPoP" is not a valid DPoPHandle',yt)}async function Oo(t,r,n,s,o,a){if(ct(t,'"accessToken"'),!(n instanceof URL))throw Je('"url" must be an instance of URL',xt);_s(n,a?.[Ft]!==!0),s=Nn(s),a?.DPoP&&(ca(a.DPoP),await a.DPoP.addProof(n,s,r.toUpperCase(),t)),s.set("authorization",`${s.has("dpop")?"DPoP":"Bearer"} ${t}`);let c=await(a?.[Vt]||fetch)(n.href,{body:o,headers:Object.fromEntries(s.entries()),method:r,redirect:"manual",signal:a?.signal?Gi(a.signal):void 0});return a?.DPoP?.cacheNonce(c),c}async function la(t,r,n,s){Xr(t),jn(r);let o=ks(t,"userinfo_endpoint",r.use_mtls_endpoint_aliases,s?.[Ft]!==!0),a=Nn(s?.headers);return r.userinfo_signed_response_alg?a.set("accept","application/jwt"):(a.set("accept","application/json"),a.append("accept","application/jwt")),Oo(n,"GET",o,a,null,{...s,[ea]:Gr(r)})}function ua(t,r,n,s){(ne||=new WeakMap).set(t,{jwks:r,uat:n,get age(){return Rr()-this.uat}}),s&&Object.assign(s,{jwks:structuredClone(r),uat:n})}function da(t,r){ne?.delete(t),delete r?.jwks,delete r?.uat}async function ha(t,r,n){var s;let o,a,c,{alg:d,kid:w}=n;if(function(O){if(!Qo(O.alg))throw new wt('unsupported JWS "alg" identifier',{cause:{alg:O.alg}})}(n),!ne?.has(t)&&!(typeof(s=r?.[Vr])!="object"||s===null||!("uat"in s)||typeof s.uat!="number"||Rr()-s.uat>=300)&&"jwks"in s&&Tr(s.jwks)&&Array.isArray(s.jwks.keys)&&Array.prototype.every.call(s.jwks.keys,Tr)&&ua(t,r?.[Vr].jwks,r?.[Vr].uat),ne?.has(t)){if({jwks:o,age:a}=ne.get(t),a>=300)return da(t,r?.[Vr]),ha(t,r,n)}else o=await Yo(t,r).then(Zo),a=0,ua(t,o,Rr(),r?.[Vr]);switch(d.slice(0,2)){case"RS":case"PS":c="RSA";break;case"ES":c="EC";break;case"Ed":c="OKP";break;default:throw new wt("unsupported JWS algorithm",{cause:{alg:d}})}let x=o.keys.filter(O=>{if(O.kty!==c||w!==void 0&&w!==O.kid||O.alg!==void 0&&d!==O.alg||O.use!==void 0&&O.use!=="sig"||O.key_ops?.includes("verify")===!1)return!1;switch(!0){case(d==="ES256"&&O.crv!=="P-256"):case(d==="ES384"&&O.crv!=="P-384"):case(d==="ES512"&&O.crv!=="P-521"):case(d==="Ed25519"&&O.crv!=="Ed25519"):case(d==="EdDSA"&&O.crv!=="Ed25519"):return!1}return!0}),{0:g,length:p}=x;if(!p){if(a>=60)return da(t,r?.[Vr]),ha(t,r,n);throw we("error when selecting a JWT verification key, no applicable keys found",xa,{header:n,candidates:x,jwks_uri:new URL(t.jwks_uri)})}if(p!==1)throw we('error when selecting a JWT verification key, multiple applicable keys found, a "kid" JWT Header Parameter is required',xa,{header:n,candidates:x,jwks_uri:new URL(t.jwks_uri)});return ic(d,g)}let To=Symbol();function Qi(t){return t.headers.get("content-type")?.split(";")[0]}async function Ro(t,r,n,s,o){let a;if(Xr(t),jn(r),!Fr(s,Response))throw Je('"response" must be an instance of Response',xt);if(ya(s),s.status!==200)throw we('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',es,s);if(Hn(s),Qi(s)==="application/jwt"){let{claims:c,jwt:d}=await ka(await s.text(),Sa.bind(void 0,r.userinfo_signed_response_alg,t.userinfo_signing_alg_values_supported,void 0),Gr(r),Yi(r),o?.[Vi]).then(Co.bind(void 0,r.client_id)).then(Io.bind(void 0,t));fa.set(s,d),a=c}else{if(r.userinfo_signed_response_alg)throw we("JWT UserInfo Response expected",Bo,s);a=await rs(s)}if(ct(a.sub,'"response" body "sub" property',He,{body:a}),n!==To){if(ct(n,'"expectedSubject"'),a.sub!==n)throw we('unexpected "response" body "sub" property value',ba,{expected:n,body:a,attribute:"sub"})}return a}async function Uo(t,r,n,s,o,a,c){return await n(t,r,o,a),a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(c?.[Vt]||fetch)(s.href,{body:o,headers:Object.fromEntries(a.entries()),method:"POST",redirect:"manual",signal:c?.signal?Gi(c.signal):void 0})}async function Po(t,r,n,s,o,a){let c=ks(t,"token_endpoint",r.use_mtls_endpoint_aliases,a?.[Ft]!==!0);o.set("grant_type",s);let d=Nn(a?.headers);d.set("accept","application/json"),a?.DPoP!==void 0&&(ca(a.DPoP),await a.DPoP.addProof(c,d,"POST"));let w=await Uo(t,r,n,c,o,d,a);return a?.DPoP?.cacheNonce(w),w}let pa=new WeakMap,fa=new WeakMap;function Ss(t){if(!t.id_token)return;let r=pa.get(t);if(!r)throw Je('"ref" was already garbage collected or did not resolve from the proper sources',yt);return r}async function ma(t,r,n,s,o){if(Xr(t),jn(r),!Fr(n,Response))throw Je('"response" must be an instance of Response',xt);ya(n),await Ao(n,200,"Token Endpoint"),Hn(n);let a=await rs(n);if(ct(a.access_token,'"response" body "access_token" property',He,{body:a}),ct(a.token_type,'"response" body "token_type" property',He,{body:a}),a.token_type=a.token_type.toLowerCase(),a.token_type!=="dpop"&&a.token_type!=="bearer")throw new wt("unsupported `token_type` value",{cause:{body:a}});if(a.expires_in!==void 0){let c=typeof a.expires_in!="number"?parseFloat(a.expires_in):a.expires_in;Ln(c,!1,'"response" body "expires_in" property',He,{body:a}),a.expires_in=c}if(a.refresh_token!==void 0&&ct(a.refresh_token,'"response" body "refresh_token" property',He,{body:a}),a.scope!==void 0&&typeof a.scope!="string")throw we('"response" body "scope" property must be a string',He,{body:a});if(a.id_token!==void 0){ct(a.id_token,'"response" body "id_token" property',He,{body:a});let c=["aud","exp","iat","iss","sub"];r.require_auth_time===!0&&c.push("auth_time"),r.default_max_age!==void 0&&(Ln(r.default_max_age,!1,'"client.default_max_age"'),c.push("auth_time")),s?.length&&c.push(...s);let{claims:d,jwt:w}=await ka(a.id_token,Sa.bind(void 0,r.id_token_signed_response_alg,t.id_token_signing_alg_values_supported,"RS256"),Gr(r),Yi(r),o?.[Vi]).then(Lo.bind(void 0,c)).then(ga.bind(void 0,t)).then(wa.bind(void 0,r.client_id));if(Array.isArray(d.aud)&&d.aud.length!==1){if(d.azp===void 0)throw we('ID Token "aud" (audience) claim includes additional untrusted audiences',cr,{claims:d,claim:"aud"});if(d.azp!==r.client_id)throw we('unexpected ID Token "azp" (authorized party) claim value',cr,{expected:r.client_id,claims:d,claim:"azp"})}d.auth_time!==void 0&&Ln(d.auth_time,!1,'ID Token "auth_time" (authentication time)',He,{claims:d}),fa.set(n,w),pa.set(a,d)}return a}function ya(t){let r;if(r=function(n){if(!Fr(n,Response))throw Je('"response" must be an instance of Response',xt);let s=n.headers.get("www-authenticate");if(s===null)return;let o=[],a=s;for(;a;){let c,d=a.match(vo),w=d?.[1].toLowerCase();if(a=d?.["2"],!w)return;let x={};for(;a;){let p,O;if(d=a.match(_o)){if([,p,O,a]=d,O.includes("\\"))try{O=JSON.parse(`"${O}"`)}catch{}x[p.toLowerCase()]=O;continue}if(d=a.match(ko)){[,p,O,a]=d,x[p.toLowerCase()]=O;continue}if(d=a.match(So)){if(Object.keys(x).length)break;[,c,a]=d;break}return}let g={scheme:w,parameters:x};c&&(g.token68=c),o.push(g)}if(o.length)return o}(t))throw new xo("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:r,response:t})}function Co(t,r){return r.claims.aud!==void 0?wa(t,r):r}function wa(t,r){if(Array.isArray(r.claims.aud)){if(!r.claims.aud.includes(t))throw we('unexpected JWT "aud" (audience) claim value',cr,{expected:t,claims:r.claims,claim:"aud"})}else if(r.claims.aud!==t)throw we('unexpected JWT "aud" (audience) claim value',cr,{expected:t,claims:r.claims,claim:"aud"});return r}function Io(t,r){return r.claims.iss!==void 0?ga(t,r):r}function ga(t,r){let n=t[sc]?.(r)??t.issuer;if(r.claims.iss!==n)throw we('unexpected JWT "iss" (issuer) claim value',cr,{expected:n,claims:r.claims,claim:"iss"});return r}let Es=new WeakSet,$o=Symbol();async function Do(t,r,n,s,o,a,c){if(Xr(t),jn(r),!Es.has(s))throw Je('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',yt);ct(o,'"redirectUri"');let d=Ur(s,"code");if(!d)throw we('no authorization code in "callbackParameters"',He);let w=new URLSearchParams(c?.additionalParameters);return w.set("redirect_uri",o),w.set("code",d),a!==$o&&(ct(a,'"codeVerifier"'),w.set("code_verifier",a)),Po(t,r,n,"authorization_code",w,c)}let No={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function Lo(t,r){for(let n of t)if(r.claims[n]===void 0)throw we(`JWT "${n}" (${No[n]}) claim missing`,He,{claims:r.claims});return r}let As=Symbol(),Os=Symbol();async function jo(t,r,n,s){return typeof s?.expectedNonce=="string"||typeof s?.maxAge=="number"||s?.requireIdToken?Ho(t,r,n,s.expectedNonce,s.maxAge,{[Vi]:s[Vi]}):Wo(t,r,n,s)}async function Ho(t,r,n,s,o,a){let c=[];switch(s){case void 0:s=As;break;case As:break;default:ct(s,'"expectedNonce" argument'),c.push("nonce")}switch(o??=r.default_max_age){case void 0:o=Os;break;case Os:break;default:Ln(o,!1,'"maxAge" argument'),c.push("auth_time")}let d=await ma(t,r,n,c,a);ct(d.id_token,'"response" body "id_token" property',He,{body:d});let w=Ss(d);if(o!==Os){let x=Rr()+Gr(r),g=Yi(r);if(w.auth_time+o<x-g)throw we("too much time has elapsed since the last End-User authentication",ts,{claims:w,now:x,tolerance:g,claim:"auth_time"})}if(s===As){if(w.nonce!==void 0)throw we('unexpected ID Token "nonce" claim value',cr,{expected:void 0,claims:w,claim:"nonce"})}else if(w.nonce!==s)throw we('unexpected ID Token "nonce" claim value',cr,{expected:s,claims:w,claim:"nonce"});return d}async function Wo(t,r,n,s){let o=await ma(t,r,n,void 0,s),a=Ss(o);if(a){if(r.default_max_age!==void 0){Ln(r.default_max_age,!1,'"client.default_max_age"');let c=Rr()+Gr(r),d=Yi(r);if(a.auth_time+r.default_max_age<c-d)throw we("too much time has elapsed since the last End-User authentication",ts,{claims:a,now:c,tolerance:d,claim:"auth_time"})}if(a.nonce!==void 0)throw we('unexpected ID Token "nonce" claim value',cr,{expected:void 0,claims:a,claim:"nonce"})}return o}let Ko="OAUTH_WWW_AUTHENTICATE_CHALLENGE",Mo="OAUTH_RESPONSE_BODY_ERROR",Jo="OAUTH_UNSUPPORTED_OPERATION",zo="OAUTH_AUTHORIZATION_RESPONSE_ERROR",Bo="OAUTH_JWT_USERINFO_EXPECTED",Ts="OAUTH_PARSE_ERROR",He="OAUTH_INVALID_RESPONSE",Uc="OAUTH_INVALID_REQUEST",qo="OAUTH_RESPONSE_IS_NOT_JSON",es="OAUTH_RESPONSE_IS_NOT_CONFORM",Fo="OAUTH_HTTP_REQUEST_FORBIDDEN",Vo="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",ts="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",cr="OAUTH_JWT_CLAIM_COMPARISON_FAILED",ba="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",xa="OAUTH_KEY_SELECTION_FAILED",Go="OAUTH_MISSING_SERVER_METADATA",Xo="OAUTH_INVALID_SERVER_METADATA";function Pc(t,r){if(typeof r.header.typ!="string"||r.header.typ.toLowerCase().replace(/^application\//,"")!==t)throw we('unexpected JWT "typ" header parameter value',He,{header:r.header});return r}function Hn(t){if(t.bodyUsed)throw Je('"response" body has been used already',yt)}async function Yo(t,r){Xr(t);let n=ks(t,"jwks_uri",!1,r?.[Ft]!==!0),s=Nn(r?.headers);return s.set("accept","application/json"),s.append("accept","application/jwk-set+json"),(r?.[Vt]||fetch)(n.href,{body:void 0,headers:Object.fromEntries(s.entries()),method:"GET",redirect:"manual",signal:r?.signal?Gi(r.signal):void 0})}async function Zo(t){if(!Fr(t,Response))throw Je('"response" must be an instance of Response',xt);if(t.status!==200)throw we('"response" is not a conform JSON Web Key Set response (unexpected HTTP status code)',es,t);Hn(t);let r=await rs(t,n=>function(s,...o){if(!o.includes(Qi(s)))throw ia(s,...o)}(n,"application/json","application/jwk-set+json"));if(!Array.isArray(r.keys))throw we('"response" body "keys" property must be an array',He,{body:r});if(!Array.prototype.every.call(r.keys,Tr))throw we('"response" body "keys" property members must be JWK formatted objects',He,{body:r});return r}function Qo(t){switch(t){case"PS256":case"ES256":case"RS256":case"PS384":case"ES384":case"RS384":case"PS512":case"ES512":case"RS512":case"Ed25519":case"EdDSA":return!0;default:return!1}}function va(t){let{algorithm:r}=t;if(typeof r.modulusLength!="number"||r.modulusLength<2048)throw new wt(`unsupported ${r.name} modulusLength`,{cause:t})}function _a(t){switch(t.algorithm.name){case"ECDSA":return{name:t.algorithm.name,hash:function(r){let{algorithm:n}=r;switch(n.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new wt("unsupported ECDSA namedCurve",{cause:r})}}(t)};case"RSA-PSS":switch(va(t),t.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:t.algorithm.name,saltLength:parseInt(t.algorithm.hash.name.slice(-3),10)>>3};default:throw new wt("unsupported RSA-PSS hash name",{cause:t})}case"RSASSA-PKCS1-v1_5":return va(t),t.algorithm.name;case"Ed25519":return t.algorithm.name}throw new wt("unsupported CryptoKey algorithm name",{cause:t})}async function Cc(t,r,n,s){let o=Tt(`${t}.${r}`),a=_a(n);if(!await crypto.subtle.verify(a,n,s,o))throw we("JWT signature verification failed",He,{key:n,data:o,signature:s,algorithm:a})}async function ka(t,r,n,s,o){let a,c,{0:d,1:w,length:x}=t.split(".");if(x===5)if(o!==void 0)t=await o(t),{0:d,1:w,length:x}=t.split(".");else throw new wt("JWE decryption is not configured",{cause:t});if(x!==3)throw we("Invalid JWT",He,t);try{a=JSON.parse(Tt(Jt(d)))}catch(p){throw we("failed to parse JWT Header body as base64url encoded JSON",Ts,p)}if(!Tr(a))throw we("JWT Header must be a top level object",He,t);if(r(a),a.crit!==void 0)throw new wt('no JWT "crit" header parameter extensions are supported',{cause:{header:a}});try{c=JSON.parse(Tt(Jt(w)))}catch(p){throw we("failed to parse JWT Payload body as base64url encoded JSON",Ts,p)}if(!Tr(c))throw we("JWT Payload must be a top level object",He,t);let g=Rr()+n;if(c.exp!==void 0){if(typeof c.exp!="number")throw we('unexpected JWT "exp" (expiration time) claim type',He,{claims:c});if(c.exp<=g-s)throw we('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',ts,{claims:c,now:g,tolerance:s,claim:"exp"})}if(c.iat!==void 0&&typeof c.iat!="number")throw we('unexpected JWT "iat" (issued at) claim type',He,{claims:c});if(c.iss!==void 0&&typeof c.iss!="string")throw we('unexpected JWT "iss" (issuer) claim type',He,{claims:c});if(c.nbf!==void 0){if(typeof c.nbf!="number")throw we('unexpected JWT "nbf" (not before) claim type',He,{claims:c});if(c.nbf>g+s)throw we('unexpected JWT "nbf" (not before) claim value',ts,{claims:c,now:g,tolerance:s,claim:"nbf"})}if(c.aud!==void 0&&typeof c.aud!="string"&&!Array.isArray(c.aud))throw we('unexpected JWT "aud" (audience) claim type',He,{claims:c});return{header:a,claims:c,jwt:t}}async function ec(t,r,n){let s;switch(r.alg){case"RS256":case"PS256":case"ES256":s="SHA-256";break;case"RS384":case"PS384":case"ES384":s="SHA-384";break;case"RS512":case"PS512":case"ES512":case"Ed25519":case"EdDSA":s="SHA-512";break;default:throw new wt(`unsupported JWS algorithm for ${n} calculation`,{cause:{alg:r.alg}})}let o=await crypto.subtle.digest(s,Tt(t));return Jt(o.slice(0,o.byteLength/2))}async function Ic(t,r,n,s){return r===await ec(t,n,s)}async function tc(t){if(t.bodyUsed)throw Je("form_post Request instances must contain a readable body",yt,{cause:t});return t.text()}async function $c(t){if(t.method!=="POST")throw Je("form_post responses are expected to use the POST method",yt,{cause:t});if(Qi(t)!=="application/x-www-form-urlencoded")throw Je("form_post responses are expected to use the application/x-www-form-urlencoded content-type",yt,{cause:t});return tc(t)}function Sa(t,r,n,s){if(t!==void 0){if(typeof t=="string"?s.alg!==t:!t.includes(s.alg))throw we('unexpected JWT "alg" header parameter',He,{header:s,expected:t,reason:"client configuration"});return}if(Array.isArray(r)){if(!r.includes(s.alg))throw we('unexpected JWT "alg" header parameter',He,{header:s,expected:r,reason:"authorization server metadata"});return}if(n!==void 0){if(typeof n=="string"?s.alg!==n:typeof n=="function"?!n(s.alg):!n.includes(s.alg))throw we('unexpected JWT "alg" header parameter',He,{header:s,expected:n,reason:"default value"});return}throw we('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:t,issuer:r,fallback:n})}function Ur(t,r){let{0:n,length:s}=t.getAll(r);if(s>1)throw we(`"${r}" parameter must be provided only once`,He);return n}let Ea=Symbol(),rc=Symbol();function nc(t,r,n,s){var o;if(Xr(t),jn(r),n instanceof URL&&(n=n.searchParams),!(n instanceof URLSearchParams))throw Je('"parameters" must be an instance of URLSearchParams, or URL',xt);if(Ur(n,"response"))throw we('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',He,{parameters:n});let a=Ur(n,"iss"),c=Ur(n,"state");if(!a&&t.authorization_response_iss_parameter_supported)throw we('response parameter "iss" (issuer) missing',He,{parameters:n});if(a&&a!==t.issuer)throw we('unexpected "iss" (issuer) response parameter value',He,{expected:t.issuer,parameters:n});switch(s){case void 0:case rc:if(c!==void 0)throw we('unexpected "state" response parameter encountered',He,{expected:void 0,parameters:n});break;case Ea:break;default:if(ct(s,'"expectedState" argument'),c!==s)throw we(c===void 0?'response parameter "state" missing':'unexpected "state" response parameter value',He,{expected:s,parameters:n})}if(Ur(n,"error"))throw new oa("authorization response from the server is an error",{cause:n});let d=Ur(n,"id_token"),w=Ur(n,"token");if(d!==void 0||w!==void 0)throw new wt("implicit and hybrid flows are not supported");return o=new URLSearchParams(n),Es.add(o),o}async function ic(t,r){let{ext:n,key_ops:s,use:o,...a}=r;return crypto.subtle.importKey("jwk",a,function(c){switch(c){case"PS256":case"PS384":case"PS512":return{name:"RSA-PSS",hash:`SHA-${c.slice(-3)}`};case"RS256":case"RS384":case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:`SHA-${c.slice(-3)}`};case"ES256":case"ES384":return{name:"ECDSA",namedCurve:`P-${c.slice(-3)}`};case"ES512":return{name:"ECDSA",namedCurve:"P-521"};case"Ed25519":case"EdDSA":return"Ed25519";default:throw new wt("unsupported JWS algorithm",{cause:{alg:c}})}}(t),!0,["verify"])}function Dc(t){let r=new URL(t);return r.search="",r.hash="",r.href}async function rs(t,r=na){let n;try{n=await t.json()}catch(s){throw r(t),we('failed to parse "response" body as JSON',Ts,s)}if(!Tr(n))throw we('"response" body must be a top level object',He,{body:n});return n}let Aa=Symbol(),sc=Symbol();async function ns(t,r,n){let{cookies:s,logger:o}=n,a=s[t],c=new Date;c.setTime(c.getTime()+9e5),o.debug(`CREATE_${t.toUpperCase()}`,{name:a.name,payload:r,COOKIE_TTL:900,expires:c});let d=await yr({...n.jwt,maxAge:900,token:{value:r},salt:a.name}),w={...a.options,expires:c};return{name:a.name,value:d,options:w}}async function Oa(t,r,n){try{let{logger:s,cookies:o,jwt:a}=n;if(s.debug(`PARSE_${t.toUpperCase()}`,{cookie:r}),!r)throw new M(`${t} cookie was missing`);let c=await wr({...a,token:r,salt:o[t].name});if(c?.value)return c.value;throw Error("Invalid cookie")}catch(s){throw new M(`${t} value could not be parsed`,{cause:s})}}function Ta(t,r,n){let{logger:s,cookies:o}=r,a=o[t];s.debug(`CLEAR_${t.toUpperCase()}`,{cookie:a}),n.push({name:a.name,value:"",options:{...o[t].options,maxAge:0}})}function Rs(t,r){return async function(n,s,o){let{provider:a,logger:c}=o;if(!a?.checks?.includes(t))return;let d=n?.[o.cookies[r].name];c.debug(`USE_${r.toUpperCase()}`,{value:d});let w=await Oa(r,d,o);return Ta(r,o,s),w}}let Ra={async create(t){let r=Xi(),n=await fo(r);return{cookie:await ns("pkceCodeVerifier",r,t),value:n}},use:Rs("pkce","pkceCodeVerifier")},Ua="encodedState",Us={async create(t,r){let{provider:n}=t;if(!n.checks.includes("state")){if(r)throw new M("State data was provided but the provider is not configured to use state");return}let s={origin:r,random:Xi()},o=await yr({secret:t.jwt.secret,token:s,salt:Ua,maxAge:900});return{cookie:await ns("state",o,t),value:o}},use:Rs("state","state"),async decode(t,r){try{r.logger.debug("DECODE_STATE",{state:t});let n=await wr({secret:r.jwt.secret,token:t,salt:Ua});if(n)return n;throw Error("Invalid state")}catch(n){throw new M("State could not be decoded",{cause:n})}}},Pa={async create(t){if(!t.provider.checks.includes("nonce"))return;let r=Xi();return{cookie:await ns("nonce",r,t),value:r}},use:Rs("nonce","nonce")},Ca="encodedWebauthnChallenge",is={create:async(t,r,n)=>({cookie:await ns("webauthnChallenge",await yr({secret:t.jwt.secret,token:{challenge:r,registerData:n},salt:Ca,maxAge:900}),t)}),async use(t,r,n){let s=r?.[t.cookies.webauthnChallenge.name],o=await Oa("webauthnChallenge",s,t),a=await wr({secret:t.jwt.secret,token:o,salt:Ca});if(Ta("webauthnChallenge",t,n),!a)throw new M("WebAuthn challenge was missing");return a}};function Ia(t){return encodeURIComponent(t).replace(/%20/g,"+")}async function ac(t,r,n){let s,o,a,{logger:c,provider:d}=n,{token:w,userinfo:x}=d;if(w?.url&&w.url.host!=="authjs.dev"||x?.url&&x.url.host!=="authjs.dev")s={issuer:d.issuer??"https://authjs.dev",token_endpoint:w?.url.toString(),userinfo_endpoint:x?.url.toString()};else{let b=new URL(d.issuer),T=await xs(b,{[Ft]:!0,[Vt]:d[At]});if(!(s=await vs(b,T)).token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!s.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}let g={client_id:d.clientId,...d.client};switch(g.token_endpoint_auth_method){case void 0:case"client_secret_basic":o=(b,T,C,X)=>{X.set("authorization",function(ee,he){let te=Ia(ee),Y=Ia(he);return`Basic ${btoa(`${te}:${Y}`)}`}(d.clientId,d.clientSecret))};break;case"client_secret_post":var p;ct(p=d.clientSecret,'"clientSecret"'),o=(b,T,C,X)=>{C.set("client_id",T.client_id),C.set("client_secret",p)};break;case"client_secret_jwt":o=function(b,T){let C;ct(b,'"clientSecret"');let X;return async(ee,he,te,Y)=>{C||=await crypto.subtle.importKey("raw",Tt(b),{hash:"SHA-256",name:"HMAC"},!1,["sign"]);let ke={alg:"HS256"},Ae=sa(ee,he);X?.(ke,Ae);let oe=`${Jt(Tt(JSON.stringify(ke)))}.${Jt(Tt(JSON.stringify(Ae)))}`,ue=await crypto.subtle.sign(C.algorithm,C,Tt(oe));te.set("client_id",he.client_id),te.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),te.set("client_assertion",`${oe}.${Jt(new Uint8Array(ue))}`)}}(d.clientSecret);break;case"private_key_jwt":o=function(b,T){var C;let{key:X,kid:ee}=(C=b)instanceof CryptoKey?{key:C}:C?.key instanceof CryptoKey?(C.kid!==void 0&&ct(C.kid,'"kid"'),{key:C.key,kid:C.kid}):{};return ho(X,'"clientPrivateKey.key"'),async(he,te,Y,ke)=>{let Ae={alg:mo(X),kid:ee},oe=sa(he,te);T?.[ta]?.(Ae,oe),Y.set("client_id",te.client_id),Y.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),Y.set("client_assertion",await yo(Ae,oe,X))}}(d.token.clientPrivateKey,{[ta](b,T){T.aud=[s.issuer,s.token_endpoint]}});break;case"none":o=(b,T,C,X)=>{C.set("client_id",T.client_id)};break;default:throw Error("unsupported client authentication method")}let O=[],k=await Us.use(r,O,n);try{a=nc(s,g,new URLSearchParams(t),d.checks.includes("state")?k:Ea)}catch(b){if(b instanceof oa){let T={providerId:d.id,...Object.fromEntries(b.cause.entries())};throw c.debug("OAuthCallbackError",T),new st("OAuth Provider returned an error",T)}throw b}let J=await Ra.use(r,O,n),W=d.callbackUrl;!n.isOnRedirectProxy&&d.redirectProxyUrl&&(W=d.redirectProxyUrl);let F=await Do(s,g,o,a,W,J??"decoy",{[Ft]:!0,[Vt]:(...b)=>(d.checks.includes("pkce")||b[1].body.delete("code_verifier"),(d[At]??fetch)(...b))});d.token?.conform&&(F=await d.token.conform(F.clone())??F);let ce={},Q=d.type==="oidc";if(d[Un])switch(d.id){case"microsoft-entra-id":case"azure-ad":{let b=await F.clone().json();if(b.error){let C={providerId:d.id,...b};throw new st(`OAuth Provider returned an error: ${b.error}`,C)}let{tid:T}=function(C){let X,ee;if(typeof C!="string")throw new Lt("JWTs must use Compact JWS serialization, JWT must be a string");let{1:he,length:te}=C.split(".");if(te===5)throw new Lt("Only JWTs using Compact JWS serialization can be decoded");if(te!==3)throw new Lt("Invalid JWT");if(!he)throw new Lt("JWTs must contain a payload");try{X=ze(he)}catch{throw new Lt("Failed to base64url decode the payload")}try{ee=JSON.parse(je.decode(X))}catch{throw new Lt("Failed to parse the decoded payload as JSON")}if(!Et(ee))throw new Lt("Invalid JWT Claims Set");return ee}(b.id_token);if(typeof T=="string"){let C=s.issuer?.match(/microsoftonline\.com\/(\w+)\/v2\.0/)?.[1]??"common",X=new URL(s.issuer.replace(C,T)),ee=await xs(X,{[Vt]:d[At]});s=await vs(X,ee)}}}let H=await jo(s,g,F,{expectedNonce:await Pa.use(r,O,n),requireIdToken:Q});if(Q){let b=Ss(H);if(ce=b,d[Un]&&d.id==="apple")try{ce.user=JSON.parse(t?.user)}catch{}if(d.idToken===!1){let T=await la(s,g,H.access_token,{[Vt]:d[At],[Ft]:!0});ce=await Ro(s,g,b.sub,T)}}else if(x?.request){let b=await x.request({tokens:H,provider:d});b instanceof Object&&(ce=b)}else if(x?.url)ce=await(await la(s,g,H.access_token,{[Vt]:d[At],[Ft]:!0})).json();else throw TypeError("No userinfo endpoint configured");return H.expires_in&&(H.expires_at=Math.floor(Date.now()/1e3)+Number(H.expires_in)),{...await oc(ce,d,H,c),profile:ce,cookies:O}}async function oc(t,r,n,s){try{let o=await r.profile(t,n);return{user:{...o,id:crypto.randomUUID(),email:o.email?.toLowerCase()},account:{...n,provider:r.id,type:r.type,providerAccountId:o.id??crypto.randomUUID()}}}catch(o){s.debug("getProfile error details",t),s.error(new Ke(o,{provider:r.id}))}}var $a=L(25356).Buffer;async function cc(t,r,n,s){let o=await pc(t,r,n),{cookie:a}=await is.create(t,o.challenge,n);return{status:200,cookies:[...s??[],a],body:{action:"register",options:o},headers:{"Content-Type":"application/json"}}}async function lc(t,r,n,s){let o=await hc(t,r,n),{cookie:a}=await is.create(t,o.challenge);return{status:200,cookies:[...s??[],a],body:{action:"authenticate",options:o},headers:{"Content-Type":"application/json"}}}async function uc(t,r,n){let s,{adapter:o,provider:a}=t,c=r.body&&typeof r.body.data=="string"?JSON.parse(r.body.data):void 0;if(!c||typeof c!="object"||!("id"in c)||typeof c.id!="string")throw new E("Invalid WebAuthn Authentication response");let d=ss(Wn(c.id)),w=await o.getAuthenticator(d);if(!w)throw new E(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:d})}`);let{challenge:x}=await is.use(t,r.cookies,n);try{var g;let W=a.getRelayingParty(t,r);s=await a.simpleWebAuthn.verifyAuthenticationResponse({...a.verifyAuthenticationOptions,expectedChallenge:x,response:c,authenticator:{...g=w,credentialDeviceType:g.credentialDeviceType,transports:Ps(g.transports),credentialID:Wn(g.credentialID),credentialPublicKey:Wn(g.credentialPublicKey)},expectedOrigin:W.origin,expectedRPID:W.id})}catch(W){throw new Re(W)}let{verified:p,authenticationInfo:O}=s;if(!p)throw new Re("WebAuthn authentication response could not be verified");try{let{newCounter:W}=O;await o.updateAuthenticatorCounter(w.credentialID,W)}catch(W){throw new f(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:d,oldCounter:w.counter,newCounter:O.newCounter})}`,W)}let k=await o.getAccount(w.providerAccountId,a.id);if(!k)throw new E(`WebAuthn account not found in database: ${JSON.stringify({credentialID:d,providerAccountId:w.providerAccountId})}`);let J=await o.getUser(k.userId);if(!J)throw new E(`WebAuthn user not found in database: ${JSON.stringify({credentialID:d,providerAccountId:w.providerAccountId,userID:k.userId})}`);return{account:k,user:J}}async function dc(t,r,n){var s;let o,{provider:a}=t,c=r.body&&typeof r.body.data=="string"?JSON.parse(r.body.data):void 0;if(!c||typeof c!="object"||!("id"in c)||typeof c.id!="string")throw new E("Invalid WebAuthn Registration response");let{challenge:d,registerData:w}=await is.use(t,r.cookies,n);if(!w)throw new E("Missing user registration data in WebAuthn challenge cookie");try{let p=a.getRelayingParty(t,r);o=await a.simpleWebAuthn.verifyRegistrationResponse({...a.verifyRegistrationOptions,expectedChallenge:d,response:c,expectedOrigin:p.origin,expectedRPID:p.id})}catch(p){throw new Re(p)}if(!o.verified||!o.registrationInfo)throw new Re("WebAuthn registration response could not be verified");let x={providerAccountId:ss(o.registrationInfo.credentialID),provider:t.provider.id,type:a.type},g={providerAccountId:x.providerAccountId,counter:o.registrationInfo.counter,credentialID:ss(o.registrationInfo.credentialID),credentialPublicKey:ss(o.registrationInfo.credentialPublicKey),credentialBackedUp:o.registrationInfo.credentialBackedUp,credentialDeviceType:o.registrationInfo.credentialDeviceType,transports:(s=c.response.transports,s?.join(","))};return{user:w,account:x,authenticator:g}}async function hc(t,r,n){let{provider:s,adapter:o}=t,a=n&&n.id?await o.listAuthenticatorsByUserId(n.id):null,c=s.getRelayingParty(t,r);return await s.simpleWebAuthn.generateAuthenticationOptions({...s.authenticationOptions,rpID:c.id,allowCredentials:a?.map(d=>({id:Wn(d.credentialID),type:"public-key",transports:Ps(d.transports)}))})}async function pc(t,r,n){let{provider:s,adapter:o}=t,a=n.id?await o.listAuthenticatorsByUserId(n.id):null,c=Jr(32),d=s.getRelayingParty(t,r);return await s.simpleWebAuthn.generateRegistrationOptions({...s.registrationOptions,userID:c,userName:n.email,userDisplayName:n.name??void 0,rpID:d.id,rpName:d.name,excludeCredentials:a?.map(w=>({id:Wn(w.credentialID),type:"public-key",transports:Ps(w.transports)}))})}function Da(t){let{provider:r,adapter:n}=t;if(!n)throw new D("An adapter is required for the WebAuthn provider");if(!r||r.type!=="webauthn")throw new _t("Provider must be WebAuthn");return{...t,provider:r,adapter:n}}function Wn(t){return new Uint8Array($a.from(t,"base64"))}function ss(t){return $a.from(t).toString("base64")}function Ps(t){return t?t.split(","):void 0}async function Na(t,r,n,s){if(!r.provider)throw new _t("Callback route called without provider");let{query:o,body:a,method:c,headers:d}=t,{provider:w,adapter:x,url:g,callbackUrl:p,pages:O,jwt:k,events:J,callbacks:W,session:{strategy:F,maxAge:ce},logger:Q}=r,H=F==="jwt";try{if(w.type==="oauth"||w.type==="oidc"){let b,T=w.authorization?.url.searchParams.get("response_mode")==="form_post"?a:o;if(r.isOnRedirectProxy&&T?.state){let oe=await Us.decode(T.state,r);if(oe?.origin&&new URL(oe.origin).origin!==r.url.origin){let ue=`${oe.origin}?${new URLSearchParams(T)}`;return Q.debug("Proxy redirecting to",ue),{redirect:ue,cookies:s}}}let C=await ac(T,t.cookies,r);C.cookies.length&&s.push(...C.cookies),Q.debug("authorization result",C);let{user:X,account:ee,profile:he}=C;if(!X||!ee||!he)return{redirect:`${g}/signin`,cookies:s};if(x){let{getUserByAccount:oe}=x;b=await oe({providerAccountId:ee.providerAccountId,provider:w.id})}let te=await as({user:b??X,account:ee,profile:he},r);if(te)return{redirect:te,cookies:s};let{user:Y,session:ke,isNewUser:Ae}=await bs(n.value,X,ee,r);if(H){let oe={name:Y.name,email:Y.email,picture:Y.image,sub:Y.id?.toString()},ue=await W.jwt({token:oe,user:Y,account:ee,profile:he,isNewUser:Ae,trigger:Ae?"signUp":"signIn"});if(ue===null)s.push(...n.clean());else{let me=r.cookies.sessionToken.name,Ve=await k.encode({...k,token:ue,salt:me}),Pe=new Date;Pe.setTime(Pe.getTime()+1e3*ce);let Ye=n.chunk(Ve,{expires:Pe});s.push(...Ye)}}else s.push({name:r.cookies.sessionToken.name,value:ke.sessionToken,options:{...r.cookies.sessionToken.options,expires:ke.expires}});return await J.signIn?.({user:Y,account:ee,profile:he,isNewUser:Ae}),Ae&&O.newUser?{redirect:`${O.newUser}${O.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:p})}`,cookies:s}:{redirect:p,cookies:s}}if(w.type==="email"){let b=o?.token,T=o?.email;if(!b){let Ve=TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!b}});throw Ve.name="Configuration",Ve}let C=w.secret??r.secret,X=await x.useVerificationToken({identifier:T,token:await gr(`${b}${C}`)}),ee=!!X,he=ee&&X.expires.valueOf()<Date.now();if(!ee||he||T&&X.identifier!==T)throw new It({hasInvite:ee,expired:he});let{identifier:te}=X,Y=await x.getUserByEmail(te)??{id:crypto.randomUUID(),email:te,emailVerified:null},ke={providerAccountId:Y.email,userId:Y.id,type:"email",provider:w.id},Ae=await as({user:Y,account:ke},r);if(Ae)return{redirect:Ae,cookies:s};let{user:oe,session:ue,isNewUser:me}=await bs(n.value,Y,ke,r);if(H){let Ve={name:oe.name,email:oe.email,picture:oe.image,sub:oe.id?.toString()},Pe=await W.jwt({token:Ve,user:oe,account:ke,isNewUser:me,trigger:me?"signUp":"signIn"});if(Pe===null)s.push(...n.clean());else{let Ye=r.cookies.sessionToken.name,ge=await k.encode({...k,token:Pe,salt:Ye}),pt=new Date;pt.setTime(pt.getTime()+1e3*ce);let Ze=n.chunk(ge,{expires:pt});s.push(...Ze)}}else s.push({name:r.cookies.sessionToken.name,value:ue.sessionToken,options:{...r.cookies.sessionToken.options,expires:ue.expires}});return await J.signIn?.({user:oe,account:ke,isNewUser:me}),me&&O.newUser?{redirect:`${O.newUser}${O.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:p})}`,cookies:s}:{redirect:p,cookies:s}}if(w.type==="credentials"&&c==="POST"){let b=a??{};Object.entries(o??{}).forEach(([te,Y])=>g.searchParams.set(te,Y));let T=await w.authorize(b,new Request(g,{headers:d,method:c,body:JSON.stringify(a)}));if(T)T.id=T.id?.toString()??crypto.randomUUID();else throw new Ee;let C={providerAccountId:T.id,type:"credentials",provider:w.id},X=await as({user:T,account:C,credentials:b},r);if(X)return{redirect:X,cookies:s};let ee={name:T.name,email:T.email,picture:T.image,sub:T.id},he=await W.jwt({token:ee,user:T,account:C,isNewUser:!1,trigger:"signIn"});if(he===null)s.push(...n.clean());else{let te=r.cookies.sessionToken.name,Y=await k.encode({...k,token:he,salt:te}),ke=new Date;ke.setTime(ke.getTime()+1e3*ce);let Ae=n.chunk(Y,{expires:ke});s.push(...Ae)}return await J.signIn?.({user:T,account:C}),{redirect:p,cookies:s}}else if(w.type==="webauthn"&&c==="POST"){let b,T,C,X=t.body?.action;if(typeof X!="string"||X!=="authenticate"&&X!=="register")throw new E("Invalid action parameter");let ee=Da(r);switch(X){case"authenticate":{let Ae=await uc(ee,t,s);b=Ae.user,T=Ae.account;break}case"register":{let Ae=await dc(r,t,s);b=Ae.user,T=Ae.account,C=Ae.authenticator}}await as({user:b,account:T},r);let{user:he,isNewUser:te,session:Y,account:ke}=await bs(n.value,b,T,r);if(!ke)throw new E("Error creating or finding account");if(C&&he.id&&await ee.adapter.createAuthenticator({...C,userId:he.id}),H){let Ae={name:he.name,email:he.email,picture:he.image,sub:he.id?.toString()},oe=await W.jwt({token:Ae,user:he,account:ke,isNewUser:te,trigger:te?"signUp":"signIn"});if(oe===null)s.push(...n.clean());else{let ue=r.cookies.sessionToken.name,me=await k.encode({...k,token:oe,salt:ue}),Ve=new Date;Ve.setTime(Ve.getTime()+1e3*ce);let Pe=n.chunk(me,{expires:Ve});s.push(...Pe)}}else s.push({name:r.cookies.sessionToken.name,value:Y.sessionToken,options:{...r.cookies.sessionToken.options,expires:Y.expires}});return await J.signIn?.({user:he,account:ke,isNewUser:te}),te&&O.newUser?{redirect:`${O.newUser}${O.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:p})}`,cookies:s}:{redirect:p,cookies:s}}throw new _t(`Callback for provider type (${w.type}) is not supported`)}catch(b){if(b instanceof E)throw b;let T=new m(b,{provider:w.id});throw Q.debug("callback route error details",{method:c,query:o,body:a}),T}}async function as(t,r){let n,{signIn:s,redirect:o}=r.callbacks;try{n=await s(t)}catch(a){throw a instanceof E?a:new y(a)}if(!n)throw new y("AccessDenied");if(typeof n=="string")return await o({url:n,baseUrl:r.url.origin})}async function La(t,r,n,s,o){let{adapter:a,jwt:c,events:d,callbacks:w,logger:x,session:{strategy:g,maxAge:p}}=t,O={body:null,headers:{"Content-Type":"application/json",...!s&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies:n},k=r.value;if(!k)return O;if(g==="jwt"){try{let J=t.cookies.sessionToken.name,W=await c.decode({...c,token:k,salt:J});if(!W)throw Error("Invalid JWT");let F=await w.jwt({token:W,...s&&{trigger:"update"},session:o}),ce=Or(p);if(F!==null){let Q={user:{name:F.name,email:F.email,image:F.picture},expires:ce.toISOString()},H=await w.session({session:Q,token:F});O.body=H;let b=await c.encode({...c,token:F,salt:J}),T=r.chunk(b,{expires:ce});O.cookies?.push(...T),await d.session?.({session:H,token:F})}else O.cookies?.push(...r.clean())}catch(J){x.error(new j(J)),O.cookies?.push(...r.clean())}return O}try{let{getSessionAndUser:J,deleteSession:W,updateSession:F}=a,ce=await J(k);if(ce&&ce.session.expires.valueOf()<Date.now()&&(await W(k),ce=null),ce){let{user:Q,session:H}=ce,b=t.session.updateAge,T=H.expires.valueOf()-1e3*p+1e3*b,C=Or(p);T<=Date.now()&&await F({sessionToken:k,expires:C});let X=await w.session({session:{...H,user:Q},user:Q,newSession:o,...s?{trigger:"update"}:{}});O.body=X,O.cookies?.push({name:t.cookies.sessionToken.name,value:k,options:{...t.cookies.sessionToken.options,expires:C}}),await d.session?.({session:X})}else k&&O.cookies?.push(...r.clean())}catch(J){x.error(new vt(J))}return O}async function fc(t,r){let n,s,{logger:o,provider:a}=r,c=a.authorization?.url;if(!c||c.host==="authjs.dev"){let k=new URL(a.issuer),J=await xs(k,{[Vt]:a[At],[Ft]:!0}),W=await vs(k,J).catch(F=>{throw!(F instanceof TypeError)||F.message!=="Invalid URL"?F:TypeError(`Discovery request responded with an invalid issuer. expected: ${k}`)});if(!W.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");c=new URL(W.authorization_endpoint)}let d=c.searchParams,w=a.callbackUrl;!r.isOnRedirectProxy&&a.redirectProxyUrl&&(w=a.redirectProxyUrl,s=a.callbackUrl,o.debug("using redirect proxy",{redirect_uri:w,data:s}));let x=Object.assign({response_type:"code",client_id:a.clientId,redirect_uri:w,...a.authorization?.params},Object.fromEntries(a.authorization?.url.searchParams??[]),t);for(let k in x)d.set(k,x[k]);let g=[];a.authorization?.url.searchParams.get("response_mode")==="form_post"&&(r.cookies.state.options.sameSite="none",r.cookies.state.options.secure=!0,r.cookies.nonce.options.sameSite="none",r.cookies.nonce.options.secure=!0);let p=await Us.create(r,s);if(p&&(d.set("state",p.value),g.push(p.cookie)),a.checks?.includes("pkce"))if(n&&!n.code_challenge_methods_supported?.includes("S256"))a.type==="oidc"&&(a.checks=["nonce"]);else{let{value:k,cookie:J}=await Ra.create(r);d.set("code_challenge",k),d.set("code_challenge_method","S256"),g.push(J)}let O=await Pa.create(r);return O&&(d.set("nonce",O.value),g.push(O.cookie)),a.type!=="oidc"||c.searchParams.has("scope")||c.searchParams.set("scope","openid profile email"),o.debug("authorization url is ready",{url:c,cookies:g,provider:a}),{redirect:c.toString(),cookies:g}}async function mc(t,r){let n,{body:s}=t,{provider:o,callbacks:a,adapter:c}=r,d=(o.normalizeIdentifier??function(H){if(!H)throw Error("Missing email from request body.");let[b,T]=H.toLowerCase().trim().split("@");return T=T.split(",")[0],`${b}@${T}`})(s?.email),w={id:crypto.randomUUID(),email:d,emailVerified:null},x=await c.getUserByEmail(d)??w,g={providerAccountId:d,userId:x.id,type:"email",provider:o.id};try{n=await a.signIn({user:x,account:g,email:{verificationRequest:!0}})}catch(H){throw new y(H)}if(!n)throw new y("AccessDenied");if(typeof n=="string")return{redirect:await a.redirect({url:n,baseUrl:r.url.origin})};let{callbackUrl:p,theme:O}=r,k=await o.generateVerificationToken?.()??Jr(32),J=new Date(Date.now()+(o.maxAge??86400)*1e3),W=o.secret??r.secret,F=new URL(r.basePath,r.url.origin),ce=o.sendVerificationRequest({identifier:d,token:k,expires:J,url:`${F}/callback/${o.id}?${new URLSearchParams({callbackUrl:p,token:k,email:d})}`,provider:o,theme:O,request:new Request(t.url,{headers:t.headers,method:t.method,body:t.method==="POST"?JSON.stringify(t.body??{}):void 0})}),Q=c.createVerificationToken?.({identifier:d,token:await gr(`${k}${W}`),expires:J});return await Promise.all([ce,Q]),{redirect:`${F}/verify-request?${new URLSearchParams({provider:o.id,type:o.type})}`}}async function yc(t,r,n){let s=`${n.url.origin}${n.basePath}/signin`;if(!n.provider)return{redirect:s,cookies:r};switch(n.provider.type){case"oauth":case"oidc":{let{redirect:o,cookies:a}=await fc(t.query,n);return a&&r.push(...a),{redirect:o,cookies:r}}case"email":return{...await mc(t,n),cookies:r};default:return{redirect:s,cookies:r}}}async function wc(t,r,n){let{jwt:s,events:o,callbackUrl:a,logger:c,session:d}=n,w=r.value;if(!w)return{redirect:a,cookies:t};try{if(d.strategy==="jwt"){let x=n.cookies.sessionToken.name,g=await s.decode({...s,token:w,salt:x});await o.signOut?.({token:g})}else{let x=await n.adapter?.deleteSession(w);await o.signOut?.({session:x})}}catch(x){c.error(new Pt(x))}return t.push(...r.clean()),{redirect:a,cookies:t}}async function gc(t,r){let{adapter:n,jwt:s,session:{strategy:o}}=t,a=r.value;if(!a)return null;if(o==="jwt"){let c=t.cookies.sessionToken.name,d=await s.decode({...s,token:a,salt:c});if(d&&d.sub)return{id:d.sub,name:d.name,email:d.email,image:d.picture}}else{let c=await n?.getSessionAndUser(a);if(c)return c.user}return null}async function bc(t,r,n,s){let o=Da(r),{provider:a}=o,{action:c}=t.query??{};if(c!=="register"&&c!=="authenticate"&&c!==void 0)return{status:400,body:{error:"Invalid action"},cookies:s,headers:{"Content-Type":"application/json"}};let d=await gc(r,n),w=d?{user:d,exists:!0}:await a.getUserInfo(r,t),x=w?.user;switch(function(g,p,O){let{user:k,exists:J=!1}=O??{};switch(g){case"authenticate":return"authenticate";case"register":if(k&&p===J)return"register";break;case void 0:if(!p)return k?J?"authenticate":"register":"authenticate"}return null}(c,!!d,w)){case"authenticate":return lc(o,t,x,s);case"register":if(typeof x?.email=="string")return cc(o,t,x,s);break;default:return{status:400,body:{error:"Invalid request"},cookies:s,headers:{"Content-Type":"application/json"}}}}async function xc(t,r){let{action:n,providerId:s,error:o,method:a}=t,c=r.skipCSRFCheck===_r,{options:d,cookies:w}=await Ki({authOptions:r,action:n,providerId:s,url:t.url,callbackUrl:t.body?.callbackUrl??t.query?.callbackUrl,csrfToken:t.body?.csrfToken,cookies:t.cookies,isPost:a==="POST",csrfDisabled:c}),x=new S(d.cookies.sessionToken,t.cookies,d.logger);if(a==="GET"){let g=Qs({...d,query:t.query,cookies:w});switch(n){case"callback":return await Na(t,d,x,w);case"csrf":return g.csrf(c,d,w);case"error":return g.error(o);case"providers":return g.providers(d.providers);case"session":return await La(d,x,w);case"signin":return g.signin(s,o);case"signout":return g.signout();case"verify-request":return g.verifyRequest();case"webauthn-options":return await bc(t,d,x,w)}}else{let{csrfTokenVerified:g}=d;switch(n){case"callback":return d.provider.type==="credentials"&&br(n,g),await Na(t,d,x,w);case"session":return br(n,g),await La(d,x,w,!0,t.body?.data);case"signin":return br(n,g),await yc(t,w,d);case"signout":return br(n,g),await wc(w,x,d)}}throw new ft(`Cannot handle action: ${n}`)}function os(t,r,n,s,o){let a,c=o?.basePath,d=s.AUTH_URL??s.NEXTAUTH_URL;if(d)a=new URL(d),c&&c!=="/"&&a.pathname!=="/"&&(a.pathname!==c&&sr(o).warn("env-url-basepath-mismatch"),a.pathname="/");else{let x=n.get("x-forwarded-host")??n.get("host"),g=n.get("x-forwarded-proto")??r??"https",p=g.endsWith(":")?g:g+":";a=new URL(`${p}//${x}`)}let w=a.toString().replace(/\/$/,"");if(c){let x=c?.replace(/(^\/|\/$)/g,"")??"";return new URL(`${w}/${x}/${t}`)}return new URL(`${w}/${t}`)}async function Yr(t,r){let n=sr(r),s=await Ni(t,r);if(!s)return Response.json("Bad request.",{status:400});let o=function(d,w){let{url:x}=d,g=[];if(!Ce&&w.debug&&g.push("debug-enabled"),!w.trustHost)return new Bt(`Host must be trusted. URL was: ${d.url}`);if(!w.secret?.length)return new We("Please define a `secret`");let p=d.query?.callbackUrl;if(p&&!Ue(p,x.origin))return new le(`Invalid callback URL. Received: ${p}`);let{callbackUrl:O}=N(w.useSecureCookies??x.protocol==="https:"),k=d.cookies?.[w.cookies?.callbackUrl?.name??O.name];if(k&&!Ue(k,x.origin))return new le(`Invalid callback URL. Received: ${k}`);let J=!1;for(let H of w.providers){let b=typeof H=="function"?H():H;if((b.type==="oauth"||b.type==="oidc")&&!(b.issuer??b.options?.issuer)){let T,{authorization:C,token:X,userinfo:ee}=b;if(typeof C=="string"||C?.url?typeof X=="string"||X?.url?typeof ee=="string"||ee?.url||(T="userinfo"):T="token":T="authorization",T)return new V(`Provider "${b.id}" is missing both \`issuer\` and \`${T}\` endpoint config. At least one of them is required`)}if(b.type==="credentials")Be=!0;else if(b.type==="email")kt=!0;else if(b.type==="webauthn"){var W;if($t=!0,b.simpleWebAuthnBrowserVersion&&(W=b.simpleWebAuthnBrowserVersion,!/^v\d+(?:\.\d+){0,2}$/.test(W)))return new E(`Invalid provider config for "${b.id}": simpleWebAuthnBrowserVersion "${b.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(b.enableConditionalUI){if(J)return new I("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");if(J=!0,!Object.values(b.formFields).some(T=>T.autocomplete&&T.autocomplete.toString().indexOf("webauthn")>-1))return new G(`Provider "${b.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(Be){let H=w.session?.strategy==="database",b=!w.providers.some(T=>(typeof T=="function"?T():T).type!=="credentials");if(H&&b)return new Ct("Signing in with credentials only supported if JWT strategy is enabled");if(w.providers.some(T=>{let C=typeof T=="function"?T():T;return C.type==="credentials"&&!C.authorize}))return new Te("Must define an authorize() handler to use credentials authentication provider")}let{adapter:F,session:ce}=w,Q=[];if(kt||ce?.strategy==="database"||!ce?.strategy&&F)if(kt){if(!F)return new D("Email login requires an adapter");Q.push(...tr)}else{if(!F)return new D("Database session requires an adapter");Q.push(...dr)}if($t){if(!w.experimental?.enableWebAuthn)return new xe("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(g.push("experimental-webauthn"),!F)return new D("WebAuthn requires an adapter");Q.push(...hr)}if(F){let H=Q.filter(b=>!(b in F));if(H.length)return new ae(`Required adapter methods were missing: ${H.join(", ")}`)}return Ce||(Ce=!0),g}(s,r);if(Array.isArray(o))o.forEach(n.warn);else if(o){if(n.error(o),!new Set(["signin","signout","error","verify-request"]).has(s.action)||s.method!=="GET")return Response.json({message:"There was a problem with the server configuration. Check the server logs for more information."},{status:500});let{pages:d,theme:w}=r,x=d?.error&&s.url.searchParams.get("callbackUrl")?.startsWith(d.error);if(!d?.error||x)return x&&n.error(new v(`The error page ${d?.error} should not require authentication`)),Rn(Qs({theme:w}).error("Configuration"));let g=`${s.url.origin}${d.error}?error=Configuration`;return Response.redirect(g)}let a=t.headers?.has("X-Auth-Return-Redirect"),c=r.raw===kr;try{let d=await xc(s,r);if(c)return d;let w=Rn(d),x=w.headers.get("Location");return!a||!x?w:Response.json({url:x},{headers:w.headers})}catch(d){n.error(d);let w=d instanceof E;if(w&&c&&!a)throw d;if(t.method==="POST"&&s.action==="session")return Response.json(null,{status:400});let x=new URLSearchParams({error:d instanceof E&&$.has(d.type)?d.type:"Configuration"});d instanceof Ee&&x.set("code",d.code);let g=w&&d.kind||"error",p=r.pages?.[g]??`${r.basePath}/${g.toLowerCase()}`,O=`${s.url.origin}${p}?${x}`;return a?Response.json({url:O}):Response.redirect(O)}}var vc=L(23902),Cs=L(27659),_c=L(83036),Is=L(98849),kc=L(89652);let ja=Symbol("internal response"),Sc=new Set([301,302,303,307,308]);function $s(t,r){var n;if(!(t==null||(n=t.request)==null)&&n.headers){if(!(t.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let s=[];for(let[o,a]of t.request.headers)r.set("x-middleware-request-"+o,a),s.push(o);r.set("x-middleware-override-headers",s.join(","))}}class lr extends Response{constructor(r,n={}){super(r,n);let s=this.headers,o=new Proxy(new Cs.VO(s),{get(a,c,d){switch(c){case"delete":case"set":return(...w)=>{let x=Reflect.apply(a[c],a,w),g=new Headers(s);return x instanceof Cs.VO&&s.set("x-middleware-set-cookie",x.getAll().map(p=>(0,Cs.Ud)(p)).join(",")),$s(n,g),x};default:return kc.l.get(a,c,d)}}});this[ja]={cookies:o,url:n.url?new _c.X(n.url,{headers:(0,Is.Cu)(s),nextConfig:n.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[ja].cookies}static json(r,n){let s=Response.json(r,n);return new lr(s.body,s)}static redirect(r,n){let s=typeof n=="number"?n:n?.status??307;if(!Sc.has(s))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let o=typeof n=="object"?n:{},a=new Headers(o?.headers);return a.set("Location",(0,Is.qU)(r)),new lr(null,{...o,headers:a,status:s})}static rewrite(r,n){let s=new Headers(n?.headers);return s.set("x-middleware-rewrite",(0,Is.qU)(r)),$s(n,s),new lr(null,{...n,headers:s})}static next(r){let n=new Headers(r?.headers);return n.set("x-middleware-next","1"),$s(r,n),new lr(null,{...r,headers:n})}}function Ds(t){let r=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!r)return t;let{origin:n}=new URL(r),{href:s,origin:o}=t.nextUrl;return new vc.J(s.replace(o,n),t)}function Zr(t){try{t.secret??(t.secret=process.env.AUTH_SECRET??process.env.NEXTAUTH_SECRET);let r=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!r)return;let{pathname:n}=new URL(r);if(n==="/")return;t.basePath||(t.basePath=n)}catch{}finally{t.basePath||(t.basePath="/api/auth"),function(r,n,s=!1){try{let o=r.AUTH_URL;o&&(n.basePath?s||sr(n).warn("env-url-basepath-redundant"):n.basePath=new URL(o).pathname)}catch{}finally{n.basePath??(n.basePath="/auth")}if(!n.secret?.length){n.secret=[];let o=r.AUTH_SECRET;for(let a of(o&&n.secret.push(o),[1,2,3])){let c=r[`AUTH_SECRET_${a}`];c&&n.secret.unshift(c)}}n.redirectProxyUrl??(n.redirectProxyUrl=r.AUTH_REDIRECT_PROXY_URL),n.trustHost??(n.trustHost=!!(r.AUTH_URL??r.AUTH_TRUST_HOST??r.VERCEL??r.CF_PAGES??r.NODE_ENV!=="production")),n.providers=n.providers.map(o=>{let{id:a}=typeof o=="function"?o({}):o,c=a.toUpperCase().replace(/-/g,"_"),d=r[`AUTH_${c}_ID`],w=r[`AUTH_${c}_SECRET`],x=r[`AUTH_${c}_ISSUER`],g=r[`AUTH_${c}_KEY`],p=typeof o=="function"?o({clientId:d,clientSecret:w,issuer:x,apiKey:g}):o;return p.type==="oauth"||p.type==="oidc"?(p.clientId??(p.clientId=d),p.clientSecret??(p.clientSecret=w),p.issuer??(p.issuer=x)):p.type==="email"&&(p.apiKey??(p.apiKey=g)),p})}(process.env,t,!0)}}L(94318),typeof URLPattern>"u"||URLPattern,L(4515),L(70424),L(62755),L(74952),L(59165),L(19918),L(95230);var ur=L(62469);async function Kn(t,r){return Yr(new Request(os("session",t.get("x-forwarded-proto"),t,process.env,r),{headers:{cookie:t.get("cookie")??""}}),{...r,callbacks:{...r.callbacks,async session(...n){let s=await r.callbacks?.session?.(...n)??{...n[0].session,expires:n[0].session.expires?.toISOString?.()??n[0].session.expires};return{user:n[0].user??n[0].token,...s}}}})}function Ha(t){return typeof t=="function"}function Wa(t,r){return typeof t=="function"?async(...n)=>{if(!n.length){let c=await(0,ur.b3)(),d=await t(void 0);return r?.(d),Kn(c,d).then(w=>w.json())}if(n[0]instanceof Request){let c=n[0],d=n[1],w=await t(c);return r?.(w),cs([c,d],w)}if(Ha(n[0])){let c=n[0];return async(...d)=>{let w=await t(d[0]);return r?.(w),cs(d,w,c)}}let s="req"in n[0]?n[0].req:n[0],o="res"in n[0]?n[0].res:n[1],a=await t(s);return r?.(a),Kn(new Headers(s.headers),a).then(async c=>{let d=await c.json();for(let w of c.headers.getSetCookie())"headers"in o?o.headers.append("set-cookie",w):o.appendHeader("set-cookie",w);return d})}:(...n)=>{if(!n.length)return Promise.resolve((0,ur.b3)()).then(a=>Kn(a,t).then(c=>c.json()));if(n[0]instanceof Request)return cs([n[0],n[1]],t);if(Ha(n[0])){let a=n[0];return async(...c)=>cs(c,t,a).then(d=>d)}let s="req"in n[0]?n[0].req:n[0],o="res"in n[0]?n[0].res:n[1];return Kn(new Headers(s.headers),t).then(async a=>{let c=await a.json();for(let d of a.headers.getSetCookie())"headers"in o?o.headers.append("set-cookie",d):o.appendHeader("set-cookie",d);return c})}}async function cs(t,r,n){let s=Ds(t[0]),o=await Kn(s.headers,r),a=await o.json(),c=!0;r.callbacks?.authorized&&(c=await r.callbacks.authorized({request:s,auth:a}));let d=lr.next?.();if(c instanceof Response){d=c;let x=c.headers.get("Location"),{pathname:g}=s.nextUrl;x&&function(p,O,k){let J=O.replace(`${p}/`,""),W=Object.values(k.pages??{});return(Ec.has(J)||W.includes(O))&&O===p}(g,new URL(x).pathname,r)&&(c=!0)}else if(n)s.auth=a,d=await n(s,t[1])??lr.next();else if(!c){let x=r.pages?.signIn??`${r.basePath}/signin`;if(s.nextUrl.pathname!==x){let g=s.nextUrl.clone();g.pathname=x,g.searchParams.set("callbackUrl",s.nextUrl.href),d=lr.redirect(g)}}let w=new Response(d?.body,d);for(let x of o.headers.getSetCookie())w.headers.append("set-cookie",x);return w}let Ec=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);var Ka=L(52189),ls=L(61127);let Ma=L(6225).s;function us(t,r){var n;throw r!=null||(r=!(Ma==null||(n=Ma.getStore())==null)&&n.isAction?ls.zB.push:ls.zB.replace),function(s,o,a){a===void 0&&(a=Ka.Q.TemporaryRedirect);let c=Object.defineProperty(Error(ls.oJ),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return c.digest=ls.oJ+";"+o+";"+s+";"+a+";",c}(t,r,Ka.Q.TemporaryRedirect)}var Ns=L(41273);async function Ja(t,r={},n,s){let o=new Headers(await(0,ur.b3)()),{redirect:a=!0,redirectTo:c,...d}=r instanceof FormData?Object.fromEntries(r):r,w=c?.toString()??o.get("Referer")??"/",x=os("signin",o.get("x-forwarded-proto"),o,process.env,s);if(!t)return x.searchParams.append("callbackUrl",w),a&&us(x.toString()),x.toString();let g=`${x}/${t}?${new URLSearchParams(n)}`,p={};for(let F of s.providers){let{options:ce,...Q}=typeof F=="function"?F():F,H=ce?.id??Q.id;if(H===t){p={id:H,type:ce?.type??Q.type};break}}if(!p.id){let F=`${x}?${new URLSearchParams({callbackUrl:w})}`;return a&&us(F),F}p.type==="credentials"&&(g=g.replace("signin","callback")),o.set("Content-Type","application/x-www-form-urlencoded");let O=new Request(g,{method:"POST",headers:o,body:new URLSearchParams({...d,callbackUrl:w})}),k=await Yr(O,{...s,raw:kr,skipCSRFCheck:_r}),J=await(0,ur.UL)();for(let F of k?.cookies??[])J.set(F.name,F.value,F.options);let W=(k instanceof Response?k.headers.get("Location"):k.redirect)??g;return a?us(W):W}async function za(t,r){let n=new Headers(await(0,ur.b3)());n.set("Content-Type","application/x-www-form-urlencoded");let s=os("signout",n.get("x-forwarded-proto"),n,process.env,r),o=new URLSearchParams({callbackUrl:t?.redirectTo??n.get("Referer")??"/"}),a=new Request(s,{method:"POST",headers:n,body:o}),c=await Yr(a,{...r,raw:kr,skipCSRFCheck:_r}),d=await(0,ur.UL)();for(let w of c?.cookies??[])d.set(w.name,w.value,w.options);return t?.redirect??!0?us(c.redirect):c}async function Ba(t,r){let n=new Headers(await(0,ur.b3)());n.set("Content-Type","application/json");let s=new Request(os("session",n.get("x-forwarded-proto"),n,process.env,r),{method:"POST",headers:n,body:JSON.stringify({data:t})}),o=await Yr(s,{...r,raw:kr,skipCSRFCheck:_r}),a=await(0,ur.UL)();for(let c of o?.cookies??[])a.set(c.name,c.value,c.options);return o.body}function Ac(t){if(typeof t=="function"){let n=async s=>{let o=await t(s);return Zr(o),Yr(Ds(s),o)};return{handlers:{GET:n,POST:n},auth:Wa(t,s=>Zr(s)),signIn:async(s,o,a)=>{let c=await t(void 0);return Zr(c),Ja(s,o,a,c)},signOut:async s=>{let o=await t(void 0);return Zr(o),za(s,o)},unstable_update:async s=>{let o=await t(void 0);return Zr(o),Ba(s,o)}}}Zr(t);let r=n=>Yr(Ds(n),t);return{handlers:{GET:r,POST:r},auth:Wa(t),signIn:(n,s,o)=>Ja(n,s,o,t),signOut:n=>za(n,t),unstable_update:n=>Ba(n,t)}}Ns.s8,Ns.s8,Ns.s8,L(14958).X},Xe.__chunk_80458=(qe,be,L)=>{"use strict";function B(ie){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:ie}}L.d(be,{A:()=>B})},Xe.__chunk_77616=(qe,be,L)=>{"use strict";L.d(be,{AR:()=>ne,P9:()=>Z,gW:()=>re,o7:()=>B,qF:()=>z,qq:()=>ie});let B=128,ie=256,Z=1024,re="_N_T_",z=31536e3,ne=4294967294,K={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"};({...K,GROUP:(K.reactServerComponents,K.actionBrowser,K.reactServerComponents,K.actionBrowser,K.instrument,K.middleware,K.apiNode,K.apiEdge,K.serverSideRendering,K.appPagesBrowser,K.reactServerComponents,K.actionBrowser,K.serverSideRendering,K.appPagesBrowser,K.shared,K.instrument,K.middleware,K.reactServerComponents,K.serverSideRendering,K.appPagesBrowser,K.actionBrowser)})},Xe.__chunk_70943=(qe,be,L)=>{"use strict";L.d(be,{sc:()=>pe});var B=L(40439);class ie extends B.Vw{constructor(S,E,u,f){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=S,this.outputLen=E,this.padOffset=u,this.isLE=f,this.buffer=new Uint8Array(S),this.view=(0,B.O8)(this.buffer)}update(S){(0,B.CC)(this),S=(0,B.ZJ)(S),(0,B.DO)(S);let{view:E,buffer:u,blockLen:f}=this,y=S.length;for(let m=0;m<y;){let v=Math.min(f-this.pos,y-m);if(v===f){let A=(0,B.O8)(S);for(;f<=y-m;m+=f)this.process(A,m);continue}u.set(S.subarray(m,m+v),this.pos),this.pos+=v,m+=v,this.pos===f&&(this.process(E,0),this.pos=0)}return this.length+=S.length,this.roundClean(),this}digestInto(S){(0,B.CC)(this),(0,B.Ht)(S,this),this.finished=!0;let{buffer:E,view:u,blockLen:f,isLE:y}=this,{pos:m}=this;E[m++]=128,(0,B.uH)(this.buffer.subarray(m)),this.padOffset>f-m&&(this.process(u,0),m=0);for(let V=m;V<f;V++)E[V]=0;(function(V,M,j,D){if(typeof V.setBigUint64=="function")return V.setBigUint64(M,j,D);let ae=BigInt(32),Te=BigInt(4294967295),We=Number(j>>ae&Te),Oe=Number(j&Te),st=4*!!D,Ke=4*!D;V.setUint32(M+st,We,D),V.setUint32(M+Ke,Oe,D)})(u,f-8,BigInt(8*this.length),y),this.process(u,0);let v=(0,B.O8)(S),A=this.outputLen;if(A%4)throw Error("_sha2: outputLen should be aligned to 32bit");let le=A/4,Ee=this.get();if(le>Ee.length)throw Error("_sha2: outputLen bigger than state");for(let V=0;V<le;V++)v.setUint32(4*V,Ee[V],y)}digest(){let{buffer:S,outputLen:E}=this;this.digestInto(S);let u=S.slice(0,E);return this.destroy(),u}_cloneInto(S){S||(S=new this.constructor),S.set(...this.get());let{blockLen:E,buffer:u,length:f,finished:y,destroyed:m,pos:v}=this;return S.destroyed=m,S.finished=y,S.length=f,S.pos=v,f%E&&S.buffer.set(u),S}clone(){return this._cloneInto()}}let Z=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),re=BigInt(4294967296-1),z=BigInt(32),ne=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),K=new Uint32Array(64);class R extends ie{constructor(S=32){super(64,S,8,!1),this.A=0|Z[0],this.B=0|Z[1],this.C=0|Z[2],this.D=0|Z[3],this.E=0|Z[4],this.F=0|Z[5],this.G=0|Z[6],this.H=0|Z[7]}get(){let{A:S,B:E,C:u,D:f,E:y,F:m,G:v,H:A}=this;return[S,E,u,f,y,m,v,A]}set(S,E,u,f,y,m,v,A){this.A=0|S,this.B=0|E,this.C=0|u,this.D=0|f,this.E=0|y,this.F=0|m,this.G=0|v,this.H=0|A}process(S,E){for(let ae=0;ae<16;ae++,E+=4)K[ae]=S.getUint32(E,!1);for(let ae=16;ae<64;ae++){let Te=K[ae-15],We=K[ae-2],Oe=(0,B.Ow)(Te,7)^(0,B.Ow)(Te,18)^Te>>>3,st=(0,B.Ow)(We,17)^(0,B.Ow)(We,19)^We>>>10;K[ae]=st+K[ae-7]+Oe+K[ae-16]|0}let{A:u,B:f,C:y,D:m,E:v,F:A,G:le,H:Ee}=this;for(let ae=0;ae<64;ae++){var V,M,j,D;let Te=Ee+((0,B.Ow)(v,6)^(0,B.Ow)(v,11)^(0,B.Ow)(v,25))+((V=v)&A^~V&le)+ne[ae]+K[ae]|0,We=((0,B.Ow)(u,2)^(0,B.Ow)(u,13)^(0,B.Ow)(u,22))+((M=u)&(j=f)^M&(D=y)^j&D)|0;Ee=le,le=A,A=v,v=m+Te|0,m=y,y=f,f=u,u=Te+We|0}u=u+this.A|0,f=f+this.B|0,y=y+this.C|0,m=m+this.D|0,v=v+this.E|0,A=A+this.F|0,le=le+this.G|0,Ee=Ee+this.H|0,this.set(u,f,y,m,v,A,le,Ee)}roundClean(){(0,B.uH)(K)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,B.uH)(this.buffer)}}(function(N,S=!1){let E=N.length,u=new Uint32Array(E),f=new Uint32Array(E);for(let y=0;y<E;y++){let{h:m,l:v}=function(A,le=!1){return le?{h:Number(A&re),l:Number(A>>z&re)}:{h:0|Number(A>>z&re),l:0|Number(A&re)}}(N[y],S);[u[y],f[y]]=[m,v]}})(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(N=>BigInt(N)));let pe=(0,B.qj)(()=>new R)},Xe.__chunk_62469=(qe,be,L)=>{"use strict";L.d(be,{UL:()=>v,b3:()=>We});var B=L(27659),ie=L(89652),Z=L(4515),re=L(70424);class z extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new z}}class ne{static seal($){return new Proxy($,{get(I,G,Re){switch(G){case"clear":case"delete":case"set":return z.callable;default:return ie.l.get(I,G,Re)}}})}}function K(P){return P.phase==="action"}Symbol.for("next.mutated.cookies");var R=L(62755),pe=L(74952),N=L(59165),S=L(56005);let E={current:null},u=typeof S.cache=="function"?S.cache:P=>P,f=console.warn;function y(P){return function(...$){f(P(...$))}}u(P=>{try{f(E.current)}finally{E.current=null}});var m=L(19918);function v(){let P="cookies",$=Z.workAsyncStorage.getStore(),I=re.FP.getStore();if($){if(I&&I.phase==="after"&&!(0,m.iC)())throw Object.defineProperty(Error(`Route ${$.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E88",enumerable:!1,configurable:!0});if($.forceStatic)return le(ne.seal(new B.tm(new Headers({}))));if(I){if(I.type==="cache")throw Object.defineProperty(Error(`Route ${$.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E398",enumerable:!1,configurable:!0});if(I.type==="unstable-cache")throw Object.defineProperty(Error(`Route ${$.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E157",enumerable:!1,configurable:!0})}if($.dynamicShouldError)throw Object.defineProperty(new pe.f(`Route ${$.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E549",enumerable:!1,configurable:!0});if(I)if(I.type==="prerender"){var G=$.route,Re=I;let xe=A.get(Re);if(xe)return xe;let Ce=(0,N.W)(Re.renderSignal,"`cookies()`");return A.set(Re,Ce),Object.defineProperties(Ce,{[Symbol.iterator]:{value:function(){let Ue="`cookies()[Symbol.iterator]()`",Be=M(G,Ue);(0,R.t3)(G,Ue,Be,Re)}},size:{get(){let Ue="`cookies().size`",Be=M(G,Ue);(0,R.t3)(G,Ue,Be,Re)}},get:{value:function(){let Ue;Ue=arguments.length==0?"`cookies().get()`":`\`cookies().get(${Ee(arguments[0])})\``;let Be=M(G,Ue);(0,R.t3)(G,Ue,Be,Re)}},getAll:{value:function(){let Ue;Ue=arguments.length==0?"`cookies().getAll()`":`\`cookies().getAll(${Ee(arguments[0])})\``;let Be=M(G,Ue);(0,R.t3)(G,Ue,Be,Re)}},has:{value:function(){let Ue;Ue=arguments.length==0?"`cookies().has()`":`\`cookies().has(${Ee(arguments[0])})\``;let Be=M(G,Ue);(0,R.t3)(G,Ue,Be,Re)}},set:{value:function(){let Ue;if(arguments.length==0)Ue="`cookies().set()`";else{let kt=arguments[0];Ue=kt?`\`cookies().set(${Ee(kt)}, ...)\``:"`cookies().set(...)`"}let Be=M(G,Ue);(0,R.t3)(G,Ue,Be,Re)}},delete:{value:function(){let Ue;Ue=arguments.length==0?"`cookies().delete()`":arguments.length==1?`\`cookies().delete(${Ee(arguments[0])})\``:`\`cookies().delete(${Ee(arguments[0])}, ...)\``;let Be=M(G,Ue);(0,R.t3)(G,Ue,Be,Re)}},clear:{value:function(){let Ue="`cookies().clear()`",Be=M(G,Ue);(0,R.t3)(G,Ue,Be,Re)}},toString:{value:function(){let Ue="`cookies().toString()`",Be=M(G,Ue);(0,R.t3)(G,Ue,Be,Re)}}}),Ce}else I.type==="prerender-ppr"?(0,R.Ui)($.route,P,I.dynamicTracking):I.type==="prerender-legacy"&&(0,R.xI)(P,$,I);(0,R.Pk)($,I)}let Fe=(0,re.XN)(P);return le(K(Fe)?Fe.userspaceMutableCookies:Fe.cookies)}let A=new WeakMap;function le(P){let $=A.get(P);if($)return $;let I=Promise.resolve(P);return A.set(P,I),Object.defineProperties(I,{[Symbol.iterator]:{value:P[Symbol.iterator]?P[Symbol.iterator].bind(P):j.bind(P)},size:{get:()=>P.size},get:{value:P.get.bind(P)},getAll:{value:P.getAll.bind(P)},has:{value:P.has.bind(P)},set:{value:P.set.bind(P)},delete:{value:P.delete.bind(P)},clear:{value:typeof P.clear=="function"?P.clear.bind(P):D.bind(P,I)},toString:{value:P.toString.bind(P)}}),I}function Ee(P){return typeof P=="object"&&P!==null&&typeof P.name=="string"?`'${P.name}'`:typeof P=="string"?`'${P}'`:"..."}let V=y(M);function M(P,$){let I=P?`Route "${P}" `:"This route ";return Object.defineProperty(Error(`${I}used ${$}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})}function j(){return this.getAll().map(P=>[P.name,P]).values()}function D(P){for(let $ of this.getAll())this.delete($.name);return P}class ae extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ae}}class Te extends Headers{constructor($){super(),this.headers=new Proxy($,{get(I,G,Re){if(typeof G=="symbol")return ie.l.get(I,G,Re);let Fe=G.toLowerCase(),xe=Object.keys($).find(Ce=>Ce.toLowerCase()===Fe);if(xe!==void 0)return ie.l.get(I,xe,Re)},set(I,G,Re,Fe){if(typeof G=="symbol")return ie.l.set(I,G,Re,Fe);let xe=G.toLowerCase(),Ce=Object.keys($).find(Ue=>Ue.toLowerCase()===xe);return ie.l.set(I,Ce??G,Re,Fe)},has(I,G){if(typeof G=="symbol")return ie.l.has(I,G);let Re=G.toLowerCase(),Fe=Object.keys($).find(xe=>xe.toLowerCase()===Re);return Fe!==void 0&&ie.l.has(I,Fe)},deleteProperty(I,G){if(typeof G=="symbol")return ie.l.deleteProperty(I,G);let Re=G.toLowerCase(),Fe=Object.keys($).find(xe=>xe.toLowerCase()===Re);return Fe===void 0||ie.l.deleteProperty(I,Fe)}})}static seal($){return new Proxy($,{get(I,G,Re){switch(G){case"append":case"delete":case"set":return ae.callable;default:return ie.l.get(I,G,Re)}}})}merge($){return Array.isArray($)?$.join(", "):$}static from($){return $ instanceof Headers?$:new Te($)}append($,I){let G=this.headers[$];typeof G=="string"?this.headers[$]=[G,I]:Array.isArray(G)?G.push(I):this.headers[$]=I}delete($){delete this.headers[$]}get($){let I=this.headers[$];return I!==void 0?this.merge(I):null}has($){return this.headers[$]!==void 0}set($,I){this.headers[$]=I}forEach($,I){for(let[G,Re]of this.entries())$.call(I,Re,G,this)}*entries(){for(let $ of Object.keys(this.headers)){let I=$.toLowerCase(),G=this.get(I);yield[I,G]}}*keys(){for(let $ of Object.keys(this.headers))yield $.toLowerCase()}*values(){for(let $ of Object.keys(this.headers))yield this.get($)}[Symbol.iterator](){return this.entries()}}function We(){let P=Z.workAsyncStorage.getStore(),$=re.FP.getStore();if(P){if($&&$.phase==="after"&&!(0,m.iC)())throw Object.defineProperty(Error(`Route ${P.route} used "headers" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "headers" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E367",enumerable:!1,configurable:!0});if(P.forceStatic)return st(Te.seal(new Headers({})));if($){if($.type==="cache")throw Object.defineProperty(Error(`Route ${P.route} used "headers" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E304",enumerable:!1,configurable:!0});if($.type==="unstable-cache")throw Object.defineProperty(Error(`Route ${P.route} used "headers" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E127",enumerable:!1,configurable:!0})}if(P.dynamicShouldError)throw Object.defineProperty(new pe.f(`Route ${P.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E525",enumerable:!1,configurable:!0});if($)if($.type==="prerender"){var I=P.route,G=$;let Re=Oe.get(G);if(Re)return Re;let Fe=(0,N.W)(G.renderSignal,"`headers()`");return Oe.set(G,Fe),Object.defineProperties(Fe,{append:{value:function(){let xe=`\`headers().append(${Ke(arguments[0])}, ...)\``,Ce=Ge(I,xe);(0,R.t3)(I,xe,Ce,G)}},delete:{value:function(){let xe=`\`headers().delete(${Ke(arguments[0])})\``,Ce=Ge(I,xe);(0,R.t3)(I,xe,Ce,G)}},get:{value:function(){let xe=`\`headers().get(${Ke(arguments[0])})\``,Ce=Ge(I,xe);(0,R.t3)(I,xe,Ce,G)}},has:{value:function(){let xe=`\`headers().has(${Ke(arguments[0])})\``,Ce=Ge(I,xe);(0,R.t3)(I,xe,Ce,G)}},set:{value:function(){let xe=`\`headers().set(${Ke(arguments[0])}, ...)\``,Ce=Ge(I,xe);(0,R.t3)(I,xe,Ce,G)}},getSetCookie:{value:function(){let xe="`headers().getSetCookie()`",Ce=Ge(I,xe);(0,R.t3)(I,xe,Ce,G)}},forEach:{value:function(){let xe="`headers().forEach(...)`",Ce=Ge(I,xe);(0,R.t3)(I,xe,Ce,G)}},keys:{value:function(){let xe="`headers().keys()`",Ce=Ge(I,xe);(0,R.t3)(I,xe,Ce,G)}},values:{value:function(){let xe="`headers().values()`",Ce=Ge(I,xe);(0,R.t3)(I,xe,Ce,G)}},entries:{value:function(){let xe="`headers().entries()`",Ce=Ge(I,xe);(0,R.t3)(I,xe,Ce,G)}},[Symbol.iterator]:{value:function(){let xe="`headers()[Symbol.iterator]()`",Ce=Ge(I,xe);(0,R.t3)(I,xe,Ce,G)}}}),Fe}else $.type==="prerender-ppr"?(0,R.Ui)(P.route,"headers",$.dynamicTracking):$.type==="prerender-legacy"&&(0,R.xI)("headers",P,$);(0,R.Pk)(P,$)}return st((0,re.XN)("headers").headers)}let Oe=new WeakMap;function st(P){let $=Oe.get(P);if($)return $;let I=Promise.resolve(P);return Oe.set(P,I),Object.defineProperties(I,{append:{value:P.append.bind(P)},delete:{value:P.delete.bind(P)},get:{value:P.get.bind(P)},has:{value:P.has.bind(P)},set:{value:P.set.bind(P)},getSetCookie:{value:P.getSetCookie.bind(P)},forEach:{value:P.forEach.bind(P)},keys:{value:P.keys.bind(P)},values:{value:P.values.bind(P)},entries:{value:P.entries.bind(P)},[Symbol.iterator]:{value:P[Symbol.iterator].bind(P)}}),I}function Ke(P){return typeof P=="string"?`'${P}'`:"..."}let vt=y(Ge);function Ge(P,$){let I=P?`Route "${P}" `:"This route ";return Object.defineProperty(Error(`${I}used ${$}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})}function Ut(){let P=workAsyncStorage.getStore(),$=workUnitAsyncStorage.getStore();switch((!P||!$)&&throwForMissingRequestStore("draftMode"),$.type){case"request":return Pt($.draftMode,P);case"cache":case"unstable-cache":let I=getDraftModeProviderForCacheScope(P,$);if(I)return Pt(I,P);case"prerender":case"prerender-ppr":case"prerender-legacy":return Ct(null);default:return $}}function Pt(P,$){let I;return ft.get(Ut)||(I=Ct(P),ft.set(P,I),I)}L(28768);let ft=new WeakMap;function Ct(P){let $=new _t(P),I=Promise.resolve($);return Object.defineProperty(I,"isEnabled",{get:()=>$.isEnabled,set(G){Object.defineProperty(I,"isEnabled",{value:G,writable:!0,enumerable:!0})},enumerable:!0,configurable:!0}),I.enable=$.enable.bind($),I.disable=$.disable.bind($),I}class _t{constructor($){this._provider=$}get isEnabled(){return this._provider!==null&&this._provider.isEnabled}enable(){It("draftMode().enable()"),this._provider!==null&&this._provider.enable()}disable(){It("draftMode().disable()"),this._provider!==null&&this._provider.disable()}}let Bt=y(function(P,$){let I=P?`Route "${P}" `:"This route ";return Object.defineProperty(Error(`${I}used ${$}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})});function It(P){let $=workAsyncStorage.getStore(),I=workUnitAsyncStorage.getStore();if($){if(I){if(I.type==="cache")throw Object.defineProperty(Error(`Route ${$.route} used "${P}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E246",enumerable:!1,configurable:!0});if(I.type==="unstable-cache")throw Object.defineProperty(Error(`Route ${$.route} used "${P}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E259",enumerable:!1,configurable:!0});if(I.phase==="after")throw Object.defineProperty(Error(`Route ${$.route} used "${P}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E348",enumerable:!1,configurable:!0})}if($.dynamicShouldError)throw Object.defineProperty(new StaticGenBailoutError(`Route ${$.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${P}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(I){if(I.type==="prerender"){let G=Object.defineProperty(Error(`Route ${$.route} used ${P} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});abortAndThrowOnSynchronousRequestDataAccess($.route,P,G,I)}else if(I.type==="prerender-ppr")postponeWithTracking($.route,P,I.dynamicTracking);else if(I.type==="prerender-legacy"){I.revalidate=0;let G=Object.defineProperty(new DynamicServerError(`Route ${$.route} couldn't be rendered statically because it used \`${P}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw $.dynamicUsageDescription=P,$.dynamicUsageStack=G.stack,G}}}}},Xe.__chunk_61127=(qe,be,L)=>{"use strict";L.d(be,{nJ:()=>re,oJ:()=>ie,zB:()=>Z});var B=L(52189);let ie="NEXT_REDIRECT";var Z=function(z){return z.push="push",z.replace="replace",z}({});function re(z){if(typeof z!="object"||z===null||!("digest"in z)||typeof z.digest!="string")return!1;let ne=z.digest.split(";"),[K,R]=ne,pe=ne.slice(2,-2).join(";"),N=Number(ne.at(-2));return K===ie&&(R==="replace"||R==="push")&&typeof pe=="string"&&!isNaN(N)&&N in B.Q}},Xe.__chunk_52189=(qe,be,L)=>{"use strict";L.d(be,{Q:()=>B});var B=function(ie){return ie[ie.SeeOther=303]="SeeOther",ie[ie.TemporaryRedirect=307]="TemporaryRedirect",ie[ie.PermanentRedirect=308]="PermanentRedirect",ie}({})},Xe.__chunk_41273=(qe,be,L)=>{"use strict";L.d(be,{RM:()=>Z,s8:()=>ie});let B=new Set(Object.values({NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401})),ie="NEXT_HTTP_ERROR_FALLBACK";function Z(re){if(typeof re!="object"||re===null||!("digest"in re)||typeof re.digest!="string")return!1;let[z,ne]=re.digest.split(";");return z===ie&&B.has(Number(ne))}},Xe.__chunk_40439=(qe,be,L)=>{"use strict";L.d(be,{CC:()=>ie,DO:()=>B,Ht:()=>Z,My:()=>pe,O8:()=>z,Ow:()=>ne,Vw:()=>E,ZJ:()=>S,qj:()=>u,uH:()=>re});function B(f,...y){if(!(f instanceof Uint8Array||ArrayBuffer.isView(f)&&f.constructor.name==="Uint8Array"))throw Error("Uint8Array expected");if(y.length>0&&!y.includes(f.length))throw Error("Uint8Array expected of length "+y+", got length="+f.length)}function ie(f,y=!0){if(f.destroyed)throw Error("Hash instance has been destroyed");if(y&&f.finished)throw Error("Hash#digest() has already been called")}function Z(f,y){B(f);let m=y.outputLen;if(f.length<m)throw Error("digestInto() expects output buffer of length at least "+m)}function re(...f){for(let y=0;y<f.length;y++)f[y].fill(0)}function z(f){return new DataView(f.buffer,f.byteOffset,f.byteLength)}function ne(f,y){return f<<32-y|f>>>y}let K=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",R=Array.from({length:256},(f,y)=>y.toString(16).padStart(2,"0"));function pe(f){if(B(f),K)return f.toHex();let y="";for(let m=0;m<f.length;m++)y+=R[f[m]];return y}let N={_0:48,_9:57,A:65,F:70,a:97,f:102};function S(f){return typeof f=="string"&&(f=function(y){if(typeof y!="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode(y))}(f)),B(f),f}class E{}function u(f){let y=v=>f().update(S(v)).digest(),m=f();return y.outputLen=m.outputLen,y.blockLen=m.blockLen,y.create=()=>f(),y}},Xe.__chunk_27659=(qe,be,L)=>{"use strict";L.d(be,{Ud:()=>B.stringifyCookie,VO:()=>B.ResponseCookies,tm:()=>B.RequestCookies});var B=L(9080)},Xe.__chunk_23902=(qe,be,L)=>{"use strict";L.d(be,{J:()=>K});var B=L(83036),ie=L(98849);class Z extends Error{constructor(){super("The request.page has been deprecated in favour of `URLPattern`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  ")}}class re extends Error{constructor(){super("The request.ua has been removed in favour of `userAgent` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  ")}}var z=L(27659);let ne=Symbol("internal request");class K extends Request{constructor(pe,N={}){let S=typeof pe!="string"&&"url"in pe?pe.url:String(pe);(0,ie.qU)(S),pe instanceof Request?super(pe,N):super(S,N);let E=new B.X(S,{headers:(0,ie.Cu)(this.headers),nextConfig:N.nextConfig});this[ne]={cookies:new z.tm(this.headers),nextUrl:E,url:E.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[ne].cookies}get nextUrl(){return this[ne].nextUrl}get page(){throw new Z}get ua(){throw new re}get url(){return this[ne].url}}},Xe.__chunk_19918=(qe,be,L)=>{"use strict";L.d(be,{iC:()=>z}),L(74952);let B=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class ie{disable(){throw B}getStore(){}run(){throw B}exit(){throw B}enterWith(){throw B}static bind(K){return K}}let Z=typeof en<"u"&&en.AsyncLocalStorage,re=Z?new Z:new ie;function z(){let ne=re.getStore();return ne?.rootTaskSpawnPhase==="action"}},Xe.__chunk_14958=(qe,be,L)=>{"use strict";L.d(be,{X:()=>function K(R){if((0,re.nJ)(R)||(0,Z.RM)(R)||typeof R=="object"&&R!==null&&"digest"in R&&R.digest==="BAILOUT_TO_CLIENT_SIDE_RENDERING"||(0,ne.h)(R)||(0,z.I3)(R)||typeof R=="object"&&R!==null&&R.$$typeof===ie||(0,B.T)(R))throw R;R instanceof Error&&"cause"in R&&K(R.cause)}});var B=L(59165);let ie=Symbol.for("react.postpone");var Z=L(41273),re=L(61127),z=L(62755),ne=L(28768)},Xe.__chunk_12585=(qe,be,L)=>{"use strict";L.d(be,{Q:()=>er});let B=en.crypto.subtle;var ie=Object.defineProperty;((e,i)=>{for(var l in i)ie(e,l,{get:i[l],enumerable:!0})})({},{UpstashError:()=>Z,UrlError:()=>re});var Z=class extends Error{constructor(e){super(e),this.name="UpstashError"}},re=class extends Error{constructor(e){super(`Upstash Redis client was passed an invalid URL. You should pass a URL starting with https. Received: "${e}". `),this.name="UrlError"}};function z(e){try{return function i(l){let h=Array.isArray(l)?l.map(_=>{try{return i(_)}catch{return _}}):JSON.parse(l);return typeof h=="number"&&h.toString()!==l?l:h}(e)}catch{return e}}function ne(e){return[e[0],...z(e.slice(1))]}function K(e){let[i,l]=e,h=[];for(let _=0;_<l.length;_+=2)h.push({key:l[_],type:l[_+1]});return[i,h]}var R=class{baseUrl;headers;options;readYourWrites;upstashSyncToken="";hasCredentials;retry;constructor(e){if(this.options={backend:e.options?.backend,agent:e.agent,responseEncoding:e.responseEncoding??"base64",cache:e.cache,signal:e.signal,keepAlive:e.keepAlive??!0},this.upstashSyncToken="",this.readYourWrites=e.readYourWrites??!0,this.baseUrl=(e.baseUrl||"").replace(/\/$/,""),this.baseUrl&&!/^https?:\/\/[^\s#$./?].\S*$/.test(this.baseUrl))throw new re(this.baseUrl);this.headers={"Content-Type":"application/json",...e.headers},this.hasCredentials=!!(this.baseUrl&&this.headers.authorization.split(" ")[1]),this.options.responseEncoding==="base64"&&(this.headers["Upstash-Encoding"]="base64"),this.retry=typeof e.retry!="boolean"||e.retry?{attempts:e.retry?.retries??5,backoff:e.retry?.backoff??(i=>50*Math.exp(i))}:{attempts:1,backoff:()=>0}}mergeTelemetry(e){this.headers=S(this.headers,"Upstash-Telemetry-Runtime",e.runtime),this.headers=S(this.headers,"Upstash-Telemetry-Platform",e.platform),this.headers=S(this.headers,"Upstash-Telemetry-Sdk",e.sdk)}async request(e){let i=function(...Se){let rt={};for(let at of Se)if(at)for(let[ht,nt]of Object.entries(at))nt!=null&&(rt[ht]=nt);return rt}(this.headers,e.headers??{}),l=[this.baseUrl,...e.path??[]].join("/"),h=i.Accept==="text/event-stream",_=e.signal??this.options.signal,U=typeof _=="function",q={cache:this.options.cache,method:"POST",headers:i,body:JSON.stringify(e.body),keepalive:this.options.keepAlive,agent:this.options.agent,signal:U?_():_,backend:this.options.backend};if(this.hasCredentials||console.warn("[Upstash Redis] Redis client was initialized without url or token. Failed to execute command."),this.readYourWrites){let Se=this.upstashSyncToken;this.headers["upstash-sync-token"]=Se}let de=null,_e=null;for(let Se=0;Se<=this.retry.attempts;Se++)try{de=await fetch(l,q);break}catch(rt){if(q.signal?.aborted&&U)throw rt;if(q.signal?.aborted){de=new Response(new Blob([JSON.stringify({result:q.signal.reason??"Aborted"})]),{status:200,statusText:q.signal.reason??"Aborted"});break}_e=rt,Se<this.retry.attempts&&await new Promise(at=>setTimeout(at,this.retry.backoff(Se)))}if(!de)throw _e??Error("Exhausted all retries");if(!de.ok){let Se=await de.json();throw new Z(`${Se.error}, command was: ${JSON.stringify(e.body)}`)}if(this.readYourWrites){let Se=de.headers;this.upstashSyncToken=Se.get("upstash-sync-token")??""}if(h&&e&&e.onMessage&&de.body){let Se=de.body.getReader(),rt=new TextDecoder;return(async()=>{try{for(;;){let{value:at,done:ht}=await Se.read();if(ht)break;for(let nt of rt.decode(at).split(`
`))if(nt.startsWith("data: ")){let Ot=nt.slice(6);e.onMessage?.(Ot)}}}catch(at){at instanceof Error&&at.name==="AbortError"||console.error("Stream reading error:",at)}finally{try{await Se.cancel()}catch{}}})(),{result:1}}let Me=await de.json();if(this.readYourWrites){let Se=de.headers;this.upstashSyncToken=Se.get("upstash-sync-token")??""}return this.options.responseEncoding==="base64"?Array.isArray(Me)?Me.map(({result:Se,error:rt})=>({result:N(Se),error:rt})):{result:N(Me.result),error:Me.error}:Me}};function pe(e){let i="";try{let l=atob(e),h=l.length,_=new Uint8Array(h);for(let U=0;U<h;U++)_[U]=l.charCodeAt(U);i=new TextDecoder().decode(_)}catch{i=e}return i}function N(e){let i;switch(typeof e){case"undefined":return e;case"number":i=e;break;case"object":i=Array.isArray(e)?e.map(l=>typeof l=="string"?pe(l):Array.isArray(l)?l.map(h=>N(h)):l):null;break;case"string":i=e==="OK"?"OK":pe(e)}return i}function S(e,i,l){return l&&(e[i]=e[i]?[e[i],l].join(","):l),e}var E=e=>{switch(typeof e){case"string":case"number":case"boolean":return e;default:return JSON.stringify(e)}},u=class{command;serialize;deserialize;headers;path;onMessage;isStreaming;signal;constructor(e,i){if(this.serialize=E,this.deserialize=i?.automaticDeserialization===void 0||i.automaticDeserialization?i?.deserialize??z:l=>l,this.command=e.map(l=>this.serialize(l)),this.headers=i?.headers,this.path=i?.path,this.onMessage=i?.streamOptions?.onMessage,this.isStreaming=i?.streamOptions?.isStreaming??!1,this.signal=i?.streamOptions?.signal,i?.latencyLogging){let l=this.exec.bind(this);this.exec=async h=>{let _=performance.now(),U=await l(h),q=(performance.now()-_).toFixed(2);return console.log(`Latency for \x1B[38;2;19;185;39m${this.command[0].toString().toUpperCase()}\x1B[0m: \x1B[38;2;0;255;255m${q} ms\x1B[0m`),U}}}async exec(e){let{result:i,error:l}=await e.request({body:this.command,path:this.path,upstashSyncToken:e.upstashSyncToken,headers:this.headers,onMessage:this.onMessage,isStreaming:this.isStreaming,signal:this.signal});if(l)throw new Z(l);if(i===void 0)throw TypeError("Request did not return a result");return this.deserialize(i)}},f=class extends u{constructor(e,i){let l=["hrandfield",e[0]];typeof e[1]=="number"&&l.push(e[1]),e[2]&&l.push("WITHVALUES"),super(l,{deserialize:e[2]?h=>function(_){if(_.length===0)return null;let U={};for(let q=0;q<_.length;q+=2){let de=_[q],_e=_[q+1];try{U[de]=JSON.parse(_e)}catch{U[de]=_e}}return U}(h):i?.deserialize,...i})}},y=class extends u{constructor(e,i){super(["append",...e],i)}},m=class extends u{constructor([e,i,l],h){let _=["bitcount",e];typeof i=="number"&&_.push(i),typeof l=="number"&&_.push(l),super(_,h)}},v=class{constructor(e,i,l,h=_=>_.exec(this.client)){this.client=i,this.opts=l,this.execOperation=h,this.command=["bitfield",...e]}command;chain(...e){return this.command.push(...e),this}get(...e){return this.chain("get",...e)}set(...e){return this.chain("set",...e)}incrby(...e){return this.chain("incrby",...e)}overflow(e){return this.chain("overflow",e)}exec(){let e=new u(this.command,this.opts);return this.execOperation(e)}},A=class extends u{constructor(e,i){super(["bitop",...e],i)}},le=class extends u{constructor(e,i){super(["bitpos",...e],i)}},Ee=class extends u{constructor([e,i,l],h){super(["COPY",e,i,...l?.replace?["REPLACE"]:[]],{...h,deserialize:_=>_>0?"COPIED":"NOT_COPIED"})}},V=class extends u{constructor(e){super(["dbsize"],e)}},M=class extends u{constructor(e,i){super(["decr",...e],i)}},j=class extends u{constructor(e,i){super(["decrby",...e],i)}},D=class extends u{constructor(e,i){super(["del",...e],i)}},ae=class extends u{constructor(e,i){super(["echo",...e],i)}},Te=class extends u{constructor([e,i,l],h){super(["eval_ro",e,i.length,...i,...l??[]],h)}},We=class extends u{constructor([e,i,l],h){super(["eval",e,i.length,...i,...l??[]],h)}},Oe=class extends u{constructor([e,i,l],h){super(["evalsha_ro",e,i.length,...i,...l??[]],h)}},st=class extends u{constructor([e,i,l],h){super(["evalsha",e,i.length,...i,...l??[]],h)}},Ke=class extends u{constructor(e,i){super(e.map(l=>typeof l=="string"?l:String(l)),i)}},vt=class extends u{constructor(e,i){super(["exists",...e],i)}},Ge=class extends u{constructor(e,i){super(["expire",...e.filter(Boolean)],i)}},Ut=class extends u{constructor(e,i){super(["expireat",...e],i)}},Pt=class extends u{constructor(e,i){let l=["flushall"];e&&e.length>0&&e[0].async&&l.push("async"),super(l,i)}},ft=class extends u{constructor([e],i){let l=["flushdb"];e?.async&&l.push("async"),super(l,i)}},Ct=class extends u{constructor([e,i,...l],h){let _=["geoadd",e];"nx"in i&&i.nx?_.push("nx"):"xx"in i&&i.xx&&_.push("xx"),"ch"in i&&i.ch&&_.push("ch"),"latitude"in i&&i.latitude&&_.push(i.longitude,i.latitude,i.member),_.push(...l.flatMap(({latitude:U,longitude:q,member:de})=>[q,U,de])),super(_,h)}},_t=class extends u{constructor([e,i,l,h="M"],_){super(["GEODIST",e,i,l,h],_)}},Bt=class extends u{constructor(e,i){let[l]=e;super(["GEOHASH",l,...Array.isArray(e[1])?e[1]:e.slice(1)],i)}},It=class extends u{constructor(e,i){let[l]=e;super(["GEOPOS",l,...Array.isArray(e[1])?e[1]:e.slice(1)],{deserialize:h=>function(_){let U=[];for(let q of _)q?.[0]&&q?.[1]&&U.push({lng:Number.parseFloat(q[0]),lat:Number.parseFloat(q[1])});return U}(h),...i})}},P=class extends u{constructor([e,i,l,h,_],U){let q=["GEOSEARCH",e];(i.type==="FROMMEMBER"||i.type==="frommember")&&q.push(i.type,i.member),(i.type==="FROMLONLAT"||i.type==="fromlonlat")&&q.push(i.type,i.coordinate.lon,i.coordinate.lat),(l.type==="BYRADIUS"||l.type==="byradius")&&q.push(l.type,l.radius,l.radiusType),(l.type==="BYBOX"||l.type==="bybox")&&q.push(l.type,l.rect.width,l.rect.height,l.rectType),q.push(h),_?.count&&q.push("COUNT",_.count.limit,..._.count.any?["ANY"]:[]),super([...q,..._?.withCoord?["WITHCOORD"]:[],..._?.withDist?["WITHDIST"]:[],..._?.withHash?["WITHHASH"]:[]],{deserialize:de=>_?.withCoord||_?.withDist||_?.withHash?de.map(_e=>{let Me=1,Se={};try{Se.member=JSON.parse(_e[0])}catch{Se.member=_e[0]}return _.withDist&&(Se.dist=Number.parseFloat(_e[Me++])),_.withHash&&(Se.hash=_e[Me++].toString()),_.withCoord&&(Se.coord={long:Number.parseFloat(_e[Me][0]),lat:Number.parseFloat(_e[Me][1])}),Se}):de.map(_e=>{try{return{member:JSON.parse(_e)}}catch{return{member:_e}}}),...U})}},$=class extends u{constructor([e,i,l,h,_,U],q){let de=["GEOSEARCHSTORE",e,i];(l.type==="FROMMEMBER"||l.type==="frommember")&&de.push(l.type,l.member),(l.type==="FROMLONLAT"||l.type==="fromlonlat")&&de.push(l.type,l.coordinate.lon,l.coordinate.lat),(h.type==="BYRADIUS"||h.type==="byradius")&&de.push(h.type,h.radius,h.radiusType),(h.type==="BYBOX"||h.type==="bybox")&&de.push(h.type,h.rect.width,h.rect.height,h.rectType),de.push(_),U?.count&&de.push("COUNT",U.count.limit,...U.count.any?["ANY"]:[]),super([...de,...U?.storeDist?["STOREDIST"]:[]],q)}},I=class extends u{constructor(e,i){super(["get",...e],i)}},G=class extends u{constructor(e,i){super(["getbit",...e],i)}},Re=class extends u{constructor(e,i){super(["getdel",...e],i)}},Fe=class extends u{constructor([e,i],l){let h=["getex",e];i&&("ex"in i&&typeof i.ex=="number"?h.push("ex",i.ex):"px"in i&&typeof i.px=="number"?h.push("px",i.px):"exat"in i&&typeof i.exat=="number"?h.push("exat",i.exat):"pxat"in i&&typeof i.pxat=="number"?h.push("pxat",i.pxat):"persist"in i&&i.persist&&h.push("persist")),super(h,l)}},xe=class extends u{constructor(e,i){super(["getrange",...e],i)}},Ce=class extends u{constructor(e,i){super(["getset",...e],i)}},Ue=class extends u{constructor(e,i){super(["hdel",...e],i)}},Be=class extends u{constructor(e,i){super(["hexists",...e],i)}},kt=class extends u{constructor(e,i){let[l,h,_,U]=e,q=Array.isArray(h)?h:[h];super(["hexpire",l,_,...U?[U]:[],"FIELDS",q.length,...q],i)}},$t=class extends u{constructor(e,i){let[l,h,_,U]=e,q=Array.isArray(h)?h:[h];super(["hexpireat",l,_,...U?[U]:[],"FIELDS",q.length,...q],i)}},tr=class extends u{constructor(e,i){let[l,h]=e,_=Array.isArray(h)?h:[h];super(["hexpiretime",l,"FIELDS",_.length,..._],i)}},dr=class extends u{constructor(e,i){let[l,h]=e,_=Array.isArray(h)?h:[h];super(["hpersist",l,"FIELDS",_.length,..._],i)}},hr=class extends u{constructor(e,i){let[l,h,_,U]=e,q=Array.isArray(h)?h:[h];super(["hpexpire",l,_,...U?[U]:[],"FIELDS",q.length,...q],i)}},dt=class extends u{constructor(e,i){let[l,h,_,U]=e,q=Array.isArray(h)?h:[h];super(["hpexpireat",l,_,...U?[U]:[],"FIELDS",q.length,...q],i)}},Dt=class extends u{constructor(e,i){let[l,h]=e,_=Array.isArray(h)?h:[h];super(["hpexpiretime",l,"FIELDS",_.length,..._],i)}},Nt=class extends u{constructor(e,i){let[l,h]=e,_=Array.isArray(h)?h:[h];super(["hpttl",l,"FIELDS",_.length,..._],i)}},De=class extends u{constructor(e,i){super(["hget",...e],i)}},Le=class extends u{constructor(e,i){super(["hgetall",...e],{deserialize:l=>function(h){if(h.length===0)return null;let _={};for(let U=0;U<h.length;U+=2){let q=h[U],de=h[U+1];try{let _e=!Number.isNaN(Number(de))&&!Number.isSafeInteger(Number(de));_[q]=_e?de:JSON.parse(de)}catch{_[q]=de}}return _}(l),...i})}},fe=class extends u{constructor(e,i){super(["hincrby",...e],i)}},je=class extends u{constructor(e,i){super(["hincrbyfloat",...e],i)}},et=class extends u{constructor([e],i){super(["hkeys",e],i)}},Ne=class extends u{constructor(e,i){super(["hlen",...e],i)}},gt=class extends u{constructor([e,...i],l){super(["hmget",e,...i],{deserialize:h=>function(_,U){if(U.every(de=>de===null))return null;let q={};for(let[de,_e]of _.entries())try{q[_e]=JSON.parse(U[de])}catch{q[_e]=U[de]}return q}(i,h),...l})}},ve=class extends u{constructor([e,i],l){super(["hmset",e,...Object.entries(i).flatMap(([h,_])=>[h,_])],l)}},ze=class extends u{constructor([e,i,l],h){let _=["hscan",e,i];l?.match&&_.push("match",l.match),typeof l?.count=="number"&&_.push("count",l.count),super(_,{deserialize:ne,...h})}},tt=class extends u{constructor([e,i],l){super(["hset",e,...Object.entries(i).flatMap(([h,_])=>[h,_])],l)}},bt=class extends u{constructor(e,i){super(["hsetnx",...e],i)}},mt=class extends u{constructor(e,i){super(["hstrlen",...e],i)}},tn=class extends u{constructor(e,i){let[l,h]=e,_=Array.isArray(h)?h:[h];super(["httl",l,"FIELDS",_.length,..._],i)}},rn=class extends u{constructor(e,i){super(["hvals",...e],i)}},Qe=class extends u{constructor(e,i){super(["incr",...e],i)}},Cr=class extends u{constructor(e,i){super(["incrby",...e],i)}},ye=class extends u{constructor(e,i){super(["incrbyfloat",...e],i)}},Lt=class extends u{constructor(e,i){super(["JSON.ARRAPPEND",...e],i)}},Mn=class extends u{constructor(e,i){super(["JSON.ARRINDEX",...e],i)}},hs=class extends u{constructor(e,i){super(["JSON.ARRINSERT",...e],i)}},rr=class extends u{constructor(e,i){super(["JSON.ARRLEN",e[0],e[1]??"$"],i)}},Xt=class extends u{constructor(e,i){super(["JSON.ARRPOP",...e],i)}},Ir=class extends u{constructor(e,i){let l=e[1]??"$";super(["JSON.ARRTRIM",e[0],l,e[2]??0,e[3]??0],i)}},$r=class extends u{constructor(e,i){super(["JSON.CLEAR",...e],i)}},Et=class extends u{constructor(e,i){super(["JSON.DEL",...e],i)}},pr=class extends u{constructor(e,i){super(["JSON.FORGET",...e],i)}},nn=class extends u{constructor(e,i){let l=["JSON.GET"];typeof e[1]=="string"?l.push(...e):(l.push(e[0]),e[1]&&(e[1].indent&&l.push("INDENT",e[1].indent),e[1].newline&&l.push("NEWLINE",e[1].newline),e[1].space&&l.push("SPACE",e[1].space)),l.push(...e.slice(2))),super(l,i)}},Yt=class extends u{constructor(e,i){super(["JSON.MERGE",...e],i)}},sn=class extends u{constructor(e,i){super(["JSON.MGET",...e[0],e[1]],i)}},Jn=class extends u{constructor(e,i){let l=["JSON.MSET"];for(let h of e)l.push(h.key,h.path,h.value);super(l,i)}},an=class extends u{constructor(e,i){super(["JSON.NUMINCRBY",...e],i)}},jt=class extends u{constructor(e,i){super(["JSON.NUMMULTBY",...e],i)}},on=class extends u{constructor(e,i){super(["JSON.OBJKEYS",...e],i)}},zn=class extends u{constructor(e,i){super(["JSON.OBJLEN",...e],i)}},cn=class extends u{constructor(e,i){super(["JSON.RESP",...e],i)}},Bn=class extends u{constructor(e,i){let l=["JSON.SET",e[0],e[1],e[2]];e[3]&&(e[3].nx?l.push("NX"):e[3].xx&&l.push("XX")),super(l,i)}},ln=class extends u{constructor(e,i){super(["JSON.STRAPPEND",...e],i)}},fr=class extends u{constructor(e,i){super(["JSON.STRLEN",...e],i)}},Ht=class extends u{constructor(e,i){super(["JSON.TOGGLE",...e],i)}},mr=class extends u{constructor(e,i){super(["JSON.TYPE",...e],i)}},Wt=class extends u{constructor(e,i){super(["keys",...e],i)}},qn=class extends u{constructor(e,i){super(["lindex",...e],i)}},Fn=class extends u{constructor(e,i){super(["linsert",...e],i)}},un=class extends u{constructor(e,i){super(["llen",...e],i)}},dn=class extends u{constructor(e,i){super(["lmove",...e],i)}},hn=class extends u{constructor(e,i){let[l,h,_,U]=e;super(["LMPOP",l,...h,_,...U?["COUNT",U]:[]],i)}},Dr=class extends u{constructor(e,i){super(["lpop",...e],i)}},Nr=class extends u{constructor(e,i){let l=["lpos",e[0],e[1]];typeof e[2]?.rank=="number"&&l.push("rank",e[2].rank),typeof e[2]?.count=="number"&&l.push("count",e[2].count),typeof e[2]?.maxLen=="number"&&l.push("maxLen",e[2].maxLen),super(l,i)}},Lr=class extends u{constructor(e,i){super(["lpush",...e],i)}},Vn=class extends u{constructor(e,i){super(["lpushx",...e],i)}},pn=class extends u{constructor(e,i){super(["lrange",...e],i)}},fn=class extends u{constructor(e,i){super(["lrem",...e],i)}},Gn=class extends u{constructor(e,i){super(["lset",...e],i)}},mn=class extends u{constructor(e,i){super(["ltrim",...e],i)}},Xn=class extends u{constructor(e,i){super(["mget",...Array.isArray(e[0])?e[0]:e],i)}},Yn=class extends u{constructor([e],i){super(["mset",...Object.entries(e).flatMap(([l,h])=>[l,h])],i)}},yn=class extends u{constructor([e],i){super(["msetnx",...Object.entries(e).flat()],i)}},wn=class extends u{constructor(e,i){super(["persist",...e],i)}},Zn=class extends u{constructor(e,i){super(["pexpire",...e],i)}},Qn=class extends u{constructor(e,i){super(["pexpireat",...e],i)}},gn=class extends u{constructor(e,i){super(["pfadd",...e],i)}},bn=class extends u{constructor(e,i){super(["pfcount",...e],i)}},ei=class extends u{constructor(e,i){super(["pfmerge",...e],i)}},jr=class extends u{constructor(e,i){let l=["ping"];e?.[0]!==void 0&&l.push(e[0]),super(l,i)}},Hr=class extends u{constructor(e,i){super(["psetex",...e],i)}},Zt=class extends u{constructor(e,i){super(["pttl",...e],i)}},ti=class extends u{constructor(e,i){super(["publish",...e],i)}},ri=class extends u{constructor(e){super(["randomkey"],e)}},ni=class extends u{constructor(e,i){super(["rename",...e],i)}},xn=class extends u{constructor(e,i){super(["renamenx",...e],i)}},ii=class extends u{constructor(e,i){super(["rpop",...e],i)}},si=class extends u{constructor(e,i){super(["rpush",...e],i)}},ai=class extends u{constructor(e,i){super(["rpushx",...e],i)}},vn=class extends u{constructor(e,i){super(["sadd",...e],i)}},_n=class extends u{constructor([e,i],l){let h=["scan",e];i?.match&&h.push("match",i.match),typeof i?.count=="number"&&h.push("count",i.count),i&&"withType"in i&&i.withType===!0?h.push("withtype"):i&&"type"in i&&i.type&&i.type.length>0&&h.push("type",i.type),super(h,{deserialize:i?.withType?K:ne,...l})}},Qt=class extends u{constructor(e,i){super(["scard",...e],i)}},Wr=class extends u{constructor(e,i){super(["script","exists",...e],{deserialize:l=>l,...i})}},oi=class extends u{constructor([e],i){let l=["script","flush"];e?.sync?l.push("sync"):e?.async&&l.push("async"),super(l,i)}},ci=class extends u{constructor(e,i){super(["script","load",...e],i)}},kn=class extends u{constructor(e,i){super(["sdiff",...e],i)}},li=class extends u{constructor(e,i){super(["sdiffstore",...e],i)}},ui=class extends u{constructor([e,i,l],h){let _=["set",e,i];l&&("nx"in l&&l.nx?_.push("nx"):"xx"in l&&l.xx&&_.push("xx"),"get"in l&&l.get&&_.push("get"),"ex"in l&&typeof l.ex=="number"?_.push("ex",l.ex):"px"in l&&typeof l.px=="number"?_.push("px",l.px):"exat"in l&&typeof l.exat=="number"?_.push("exat",l.exat):"pxat"in l&&typeof l.pxat=="number"?_.push("pxat",l.pxat):"keepTtl"in l&&l.keepTtl&&_.push("keepTtl")),super(_,h)}},Kt=class extends u{constructor(e,i){super(["setbit",...e],i)}},di=class extends u{constructor(e,i){super(["setex",...e],i)}},nr=class extends u{constructor(e,i){super(["setnx",...e],i)}},qt=class extends u{constructor(e,i){super(["setrange",...e],i)}},Sn=class extends u{constructor(e,i){super(["sinter",...e],i)}},hi=class extends u{constructor(e,i){super(["sinterstore",...e],i)}},pi=class extends u{constructor(e,i){super(["sismember",...e],i)}},fi=class extends u{constructor(e,i){super(["smembers",...e],i)}},mi=class extends u{constructor(e,i){super(["smismember",e[0],...e[1]],i)}},yi=class extends u{constructor(e,i){super(["smove",...e],i)}},En=class extends u{constructor([e,i],l){let h=["spop",e];typeof i=="number"&&h.push(i),super(h,l)}},wi=class extends u{constructor([e,i],l){let h=["srandmember",e];typeof i=="number"&&h.push(i),super(h,l)}},gi=class extends u{constructor(e,i){super(["srem",...e],i)}},bi=class extends u{constructor([e,i,l],h){let _=["sscan",e,i];l?.match&&_.push("match",l.match),typeof l?.count=="number"&&_.push("count",l.count),super(_,{deserialize:ne,...h})}},xi=class extends u{constructor(e,i){super(["strlen",...e],i)}},vi=class extends u{constructor(e,i){super(["sunion",...e],i)}},_i=class extends u{constructor(e,i){super(["sunionstore",...e],i)}},ki=class extends u{constructor(e){super(["time"],e)}},Si=class extends u{constructor(e,i){super(["touch",...e],i)}},Ei=class extends u{constructor(e,i){super(["ttl",...e],i)}},Ai=class extends u{constructor(e,i){super(["type",...e],i)}},An=class extends u{constructor(e,i){super(["unlink",...e],i)}},On=class extends u{constructor([e,i,l],h){super(["XACK",e,i,...Array.isArray(l)?[...l]:[l]],h)}},Oi=class extends u{constructor([e,i,l,h],_){let U=["XADD",e];for(let[q,de]of(h&&(h.nomkStream&&U.push("NOMKSTREAM"),h.trim&&(U.push(h.trim.type,h.trim.comparison,h.trim.threshold),h.trim.limit!==void 0&&U.push("LIMIT",h.trim.limit))),U.push(i),Object.entries(l)))U.push(q,de);super(U,_)}},Ti=class extends u{constructor([e,i,l,h,_,U],q){let de=[];U?.count&&de.push("COUNT",U.count),U?.justId&&de.push("JUSTID"),super(["XAUTOCLAIM",e,i,l,h,_,...de],q)}},ps=class extends u{constructor([e,i,l,h,_,U],q){let de=Array.isArray(_)?[..._]:[_],_e=[];U?.idleMS&&_e.push("IDLE",U.idleMS),U?.idleMS&&_e.push("TIME",U.timeMS),U?.retryCount&&_e.push("RETRYCOUNT",U.retryCount),U?.force&&_e.push("FORCE"),U?.justId&&_e.push("JUSTID"),U?.lastId&&_e.push("LASTID",U.lastId),super(["XCLAIM",e,i,l,h,...de,..._e],q)}},Ri=class extends u{constructor([e,i],l){super(["XDEL",e,...Array.isArray(i)?[...i]:[i]],l)}},Kr=class extends u{constructor([e,i],l){let h=["XGROUP"];switch(i.type){case"CREATE":h.push("CREATE",e,i.group,i.id),i.options&&(i.options.MKSTREAM&&h.push("MKSTREAM"),i.options.ENTRIESREAD!==void 0&&h.push("ENTRIESREAD",i.options.ENTRIESREAD.toString()));break;case"CREATECONSUMER":h.push("CREATECONSUMER",e,i.group,i.consumer);break;case"DELCONSUMER":h.push("DELCONSUMER",e,i.group,i.consumer);break;case"DESTROY":h.push("DESTROY",e,i.group);break;case"SETID":h.push("SETID",e,i.group,i.id),i.options?.ENTRIESREAD!==void 0&&h.push("ENTRIESREAD",i.options.ENTRIESREAD.toString());break;default:throw Error("Invalid XGROUP")}super(h,l)}},yr=class extends u{constructor([e,i],l){let h=[];i.type==="CONSUMERS"?h.push("CONSUMERS",e,i.group):h.push("GROUPS",e),super(["XINFO",...h],l)}},wr=class extends u{constructor(e,i){super(["XLEN",...e],i)}},Tn=class extends u{constructor([e,i,l,h,_,U],q){super(["XPENDING",e,i,...U?.idleTime?["IDLE",U.idleTime]:[],l,h,_,...U?.consumer===void 0?[]:Array.isArray(U.consumer)?[...U.consumer]:[U.consumer]],q)}},Ui=class extends u{constructor([e,i,l,h],_){let U=["XRANGE",e,i,l];typeof h=="number"&&U.push("COUNT",h),super(U,{deserialize:q=>function(de){let _e={};for(let Me of de)for(let Se=0;Se<Me.length;Se+=2){let rt=Me[Se],at=Me[Se+1];rt in _e||(_e[rt]={});for(let ht=0;ht<at.length;ht+=2){let nt=at[ht],Ot=at[ht+1];try{_e[rt][nt]=JSON.parse(Ot)}catch{_e[rt][nt]=Ot}}}return _e}(q),..._})}},Mr=class extends u{constructor([e,i,l],h){if(Array.isArray(e)&&Array.isArray(i)&&e.length!==i.length)throw Error("ERR Unbalanced XREAD list of streams: for each stream key an ID or '$' must be specified");let _=[];typeof l?.count=="number"&&_.push("COUNT",l.count),typeof l?.blockMS=="number"&&_.push("BLOCK",l.blockMS),_.push("STREAMS",...Array.isArray(e)?[...e]:[e],...Array.isArray(i)?[...i]:[i]),super(["XREAD",..._],h)}},ir=class extends u{constructor([e,i,l,h,_],U){if(Array.isArray(l)&&Array.isArray(h)&&l.length!==h.length)throw Error("ERR Unbalanced XREADGROUP list of streams: for each stream key an ID or '$' must be specified");let q=[];typeof _?.count=="number"&&q.push("COUNT",_.count),typeof _?.blockMS=="number"&&q.push("BLOCK",_.blockMS),typeof _?.NOACK=="boolean"&&_.NOACK&&q.push("NOACK"),q.push("STREAMS",...Array.isArray(l)?[...l]:[l],...Array.isArray(h)?[...h]:[h]),super(["XREADGROUP","GROUP",e,i,...q],U)}},Pi=class extends u{constructor([e,i,l,h],_){let U=["XREVRANGE",e,i,l];typeof h=="number"&&U.push("COUNT",h),super(U,{deserialize:q=>function(de){let _e={};for(let Me of de)for(let Se=0;Se<Me.length;Se+=2){let rt=Me[Se],at=Me[Se+1];rt in _e||(_e[rt]={});for(let ht=0;ht<at.length;ht+=2){let nt=at[ht],Ot=at[ht+1];try{_e[rt][nt]=JSON.parse(Ot)}catch{_e[rt][nt]=Ot}}}return _e}(q),..._})}},sr=class extends u{constructor([e,i],l){let{limit:h,strategy:_,threshold:U,exactness:q="~"}=i;super(["XTRIM",e,_,q,U,...h?["LIMIT",h]:[]],l)}},Ci=class extends u{constructor([e,i,...l],h){let _=["zadd",e];"nx"in i&&i.nx?_.push("nx"):"xx"in i&&i.xx&&_.push("xx"),"ch"in i&&i.ch&&_.push("ch"),"incr"in i&&i.incr&&_.push("incr"),"lt"in i&&i.lt?_.push("lt"):"gt"in i&&i.gt&&_.push("gt"),"score"in i&&"member"in i&&_.push(i.score,i.member),_.push(...l.flatMap(({score:U,member:q})=>[U,q])),super(_,h)}},Ii=class extends u{constructor(e,i){super(["zcard",...e],i)}},$i=class extends u{constructor(e,i){super(["zcount",...e],i)}},Di=class extends u{constructor(e,i){super(["zincrby",...e],i)}},Ni=class extends u{constructor([e,i,l,h],_){let U=["zinterstore",e,i];Array.isArray(l)?U.push(...l):U.push(l),h&&("weights"in h&&h.weights?U.push("weights",...h.weights):"weight"in h&&typeof h.weight=="number"&&U.push("weights",h.weight),"aggregate"in h&&U.push("aggregate",h.aggregate)),super(U,_)}},Rn=class extends u{constructor(e,i){super(["zlexcount",...e],i)}},gr=class extends u{constructor([e,i],l){let h=["zpopmax",e];typeof i=="number"&&h.push(i),super(h,l)}},Jr=class extends u{constructor([e,i],l){let h=["zpopmin",e];typeof i=="number"&&h.push(i),super(h,l)}},Li=class extends u{constructor([e,i,l,h],_){let U=["zrange",e,i,l];h?.byScore&&U.push("byscore"),h?.byLex&&U.push("bylex"),h?.rev&&U.push("rev"),h?.count!==void 0&&h.offset!==void 0&&U.push("limit",h.offset,h.count),h?.withScores&&U.push("withscores"),super(U,_)}},br=class extends u{constructor(e,i){super(["zrank",...e],i)}},xr=class extends u{constructor(e,i){super(["zrem",...e],i)}},vr=class extends u{constructor(e,i){super(["zremrangebylex",...e],i)}},_r=class extends u{constructor(e,i){super(["zremrangebyrank",...e],i)}},kr=class extends u{constructor(e,i){super(["zremrangebyscore",...e],i)}},At=class extends u{constructor(e,i){super(["zrevrank",...e],i)}},Un=class extends u{constructor([e,i,l],h){let _=["zscan",e,i];l?.match&&_.push("match",l.match),typeof l?.count=="number"&&_.push("count",l.count),super(_,{deserialize:ne,...h})}},ji=class extends u{constructor(e,i){super(["zscore",...e],i)}},Hi=class extends u{constructor([e,i,l],h){let _=["zunion",e];Array.isArray(i)?_.push(...i):_.push(i),l&&("weights"in l&&l.weights?_.push("weights",...l.weights):"weight"in l&&typeof l.weight=="number"&&_.push("weights",l.weight),"aggregate"in l&&_.push("aggregate",l.aggregate),l.withScores&&_.push("withscores")),super(_,h)}},Pn=class extends u{constructor([e,i,l,h],_){let U=["zunionstore",e,i];Array.isArray(l)?U.push(...l):U.push(l),h&&("weights"in h&&h.weights?U.push("weights",...h.weights):"weight"in h&&typeof h.weight=="number"&&U.push("weights",h.weight),"aggregate"in h&&U.push("aggregate",h.aggregate)),super(U,_)}},zr=class extends u{constructor(e,i){super(["zdiffstore",...e],i)}},Wi=class extends u{constructor(e,i){let[l,h]=e;super(["zmscore",l,...h],i)}},Ki=class{client;commands;commandOptions;multiExec;constructor(e){if(this.client=e.client,this.commands=[],this.commandOptions=e.commandOptions,this.multiExec=e.multiExec??!1,this.commandOptions?.latencyLogging){let i=this.exec.bind(this);this.exec=async l=>{let h=performance.now(),_=await(l?i(l):i()),U=(performance.now()-h).toFixed(2);return console.log(`Latency for \x1B[38;2;19;185;39m${this.multiExec?["MULTI-EXEC"]:["PIPELINE"].toString().toUpperCase()}\x1B[0m: \x1B[38;2;0;255;255m${U} ms\x1B[0m`),_}}}exec=async e=>{if(this.commands.length===0)throw Error("Pipeline is empty");let i=this.multiExec?["multi-exec"]:["pipeline"],l=await this.client.request({path:i,body:Object.values(this.commands).map(h=>h.command)});return e?.keepErrors?l.map(({error:h,result:_},U)=>({error:h,result:this.commands[U].deserialize(_)})):l.map(({error:h,result:_},U)=>{if(h)throw new Z(`Command ${U+1} [ ${this.commands[U].command[0]} ] failed: ${h}`);return this.commands[U].deserialize(_)})};length(){return this.commands.length}chain(e){return this.commands.push(e),this}append=(...e)=>this.chain(new y(e,this.commandOptions));bitcount=(...e)=>this.chain(new m(e,this.commandOptions));bitfield=(...e)=>new v(e,this.client,this.commandOptions,this.chain.bind(this));bitop=(e,i,l,...h)=>this.chain(new A([e,i,l,...h],this.commandOptions));bitpos=(...e)=>this.chain(new le(e,this.commandOptions));copy=(...e)=>this.chain(new Ee(e,this.commandOptions));zdiffstore=(...e)=>this.chain(new zr(e,this.commandOptions));dbsize=()=>this.chain(new V(this.commandOptions));decr=(...e)=>this.chain(new M(e,this.commandOptions));decrby=(...e)=>this.chain(new j(e,this.commandOptions));del=(...e)=>this.chain(new D(e,this.commandOptions));echo=(...e)=>this.chain(new ae(e,this.commandOptions));evalRo=(...e)=>this.chain(new Te(e,this.commandOptions));eval=(...e)=>this.chain(new We(e,this.commandOptions));evalshaRo=(...e)=>this.chain(new Oe(e,this.commandOptions));evalsha=(...e)=>this.chain(new st(e,this.commandOptions));exists=(...e)=>this.chain(new vt(e,this.commandOptions));expire=(...e)=>this.chain(new Ge(e,this.commandOptions));expireat=(...e)=>this.chain(new Ut(e,this.commandOptions));flushall=e=>this.chain(new Pt(e,this.commandOptions));flushdb=(...e)=>this.chain(new ft(e,this.commandOptions));geoadd=(...e)=>this.chain(new Ct(e,this.commandOptions));geodist=(...e)=>this.chain(new _t(e,this.commandOptions));geopos=(...e)=>this.chain(new It(e,this.commandOptions));geohash=(...e)=>this.chain(new Bt(e,this.commandOptions));geosearch=(...e)=>this.chain(new P(e,this.commandOptions));geosearchstore=(...e)=>this.chain(new $(e,this.commandOptions));get=(...e)=>this.chain(new I(e,this.commandOptions));getbit=(...e)=>this.chain(new G(e,this.commandOptions));getdel=(...e)=>this.chain(new Re(e,this.commandOptions));getex=(...e)=>this.chain(new Fe(e,this.commandOptions));getrange=(...e)=>this.chain(new xe(e,this.commandOptions));getset=(e,i)=>this.chain(new Ce([e,i],this.commandOptions));hdel=(...e)=>this.chain(new Ue(e,this.commandOptions));hexists=(...e)=>this.chain(new Be(e,this.commandOptions));hexpire=(...e)=>this.chain(new kt(e,this.commandOptions));hexpireat=(...e)=>this.chain(new $t(e,this.commandOptions));hexpiretime=(...e)=>this.chain(new tr(e,this.commandOptions));httl=(...e)=>this.chain(new tn(e,this.commandOptions));hpexpire=(...e)=>this.chain(new hr(e,this.commandOptions));hpexpireat=(...e)=>this.chain(new dt(e,this.commandOptions));hpexpiretime=(...e)=>this.chain(new Dt(e,this.commandOptions));hpttl=(...e)=>this.chain(new Nt(e,this.commandOptions));hpersist=(...e)=>this.chain(new dr(e,this.commandOptions));hget=(...e)=>this.chain(new De(e,this.commandOptions));hgetall=(...e)=>this.chain(new Le(e,this.commandOptions));hincrby=(...e)=>this.chain(new fe(e,this.commandOptions));hincrbyfloat=(...e)=>this.chain(new je(e,this.commandOptions));hkeys=(...e)=>this.chain(new et(e,this.commandOptions));hlen=(...e)=>this.chain(new Ne(e,this.commandOptions));hmget=(...e)=>this.chain(new gt(e,this.commandOptions));hmset=(e,i)=>this.chain(new ve([e,i],this.commandOptions));hrandfield=(e,i,l)=>this.chain(new f([e,i,l],this.commandOptions));hscan=(...e)=>this.chain(new ze(e,this.commandOptions));hset=(e,i)=>this.chain(new tt([e,i],this.commandOptions));hsetnx=(e,i,l)=>this.chain(new bt([e,i,l],this.commandOptions));hstrlen=(...e)=>this.chain(new mt(e,this.commandOptions));hvals=(...e)=>this.chain(new rn(e,this.commandOptions));incr=(...e)=>this.chain(new Qe(e,this.commandOptions));incrby=(...e)=>this.chain(new Cr(e,this.commandOptions));incrbyfloat=(...e)=>this.chain(new ye(e,this.commandOptions));keys=(...e)=>this.chain(new Wt(e,this.commandOptions));lindex=(...e)=>this.chain(new qn(e,this.commandOptions));linsert=(e,i,l,h)=>this.chain(new Fn([e,i,l,h],this.commandOptions));llen=(...e)=>this.chain(new un(e,this.commandOptions));lmove=(...e)=>this.chain(new dn(e,this.commandOptions));lpop=(...e)=>this.chain(new Dr(e,this.commandOptions));lmpop=(...e)=>this.chain(new hn(e,this.commandOptions));lpos=(...e)=>this.chain(new Nr(e,this.commandOptions));lpush=(e,...i)=>this.chain(new Lr([e,...i],this.commandOptions));lpushx=(e,...i)=>this.chain(new Vn([e,...i],this.commandOptions));lrange=(...e)=>this.chain(new pn(e,this.commandOptions));lrem=(e,i,l)=>this.chain(new fn([e,i,l],this.commandOptions));lset=(e,i,l)=>this.chain(new Gn([e,i,l],this.commandOptions));ltrim=(...e)=>this.chain(new mn(e,this.commandOptions));mget=(...e)=>this.chain(new Xn(e,this.commandOptions));mset=e=>this.chain(new Yn([e],this.commandOptions));msetnx=e=>this.chain(new yn([e],this.commandOptions));persist=(...e)=>this.chain(new wn(e,this.commandOptions));pexpire=(...e)=>this.chain(new Zn(e,this.commandOptions));pexpireat=(...e)=>this.chain(new Qn(e,this.commandOptions));pfadd=(...e)=>this.chain(new gn(e,this.commandOptions));pfcount=(...e)=>this.chain(new bn(e,this.commandOptions));pfmerge=(...e)=>this.chain(new ei(e,this.commandOptions));ping=e=>this.chain(new jr(e,this.commandOptions));psetex=(e,i,l)=>this.chain(new Hr([e,i,l],this.commandOptions));pttl=(...e)=>this.chain(new Zt(e,this.commandOptions));publish=(...e)=>this.chain(new ti(e,this.commandOptions));randomkey=()=>this.chain(new ri(this.commandOptions));rename=(...e)=>this.chain(new ni(e,this.commandOptions));renamenx=(...e)=>this.chain(new xn(e,this.commandOptions));rpop=(...e)=>this.chain(new ii(e,this.commandOptions));rpush=(e,...i)=>this.chain(new si([e,...i],this.commandOptions));rpushx=(e,...i)=>this.chain(new ai([e,...i],this.commandOptions));sadd=(e,i,...l)=>this.chain(new vn([e,i,...l],this.commandOptions));scan=(...e)=>this.chain(new _n(e,this.commandOptions));scard=(...e)=>this.chain(new Qt(e,this.commandOptions));scriptExists=(...e)=>this.chain(new Wr(e,this.commandOptions));scriptFlush=(...e)=>this.chain(new oi(e,this.commandOptions));scriptLoad=(...e)=>this.chain(new ci(e,this.commandOptions));sdiff=(...e)=>this.chain(new kn(e,this.commandOptions));sdiffstore=(...e)=>this.chain(new li(e,this.commandOptions));set=(e,i,l)=>this.chain(new ui([e,i,l],this.commandOptions));setbit=(...e)=>this.chain(new Kt(e,this.commandOptions));setex=(e,i,l)=>this.chain(new di([e,i,l],this.commandOptions));setnx=(e,i)=>this.chain(new nr([e,i],this.commandOptions));setrange=(...e)=>this.chain(new qt(e,this.commandOptions));sinter=(...e)=>this.chain(new Sn(e,this.commandOptions));sinterstore=(...e)=>this.chain(new hi(e,this.commandOptions));sismember=(e,i)=>this.chain(new pi([e,i],this.commandOptions));smembers=(...e)=>this.chain(new fi(e,this.commandOptions));smismember=(e,i)=>this.chain(new mi([e,i],this.commandOptions));smove=(e,i,l)=>this.chain(new yi([e,i,l],this.commandOptions));spop=(...e)=>this.chain(new En(e,this.commandOptions));srandmember=(...e)=>this.chain(new wi(e,this.commandOptions));srem=(e,...i)=>this.chain(new gi([e,...i],this.commandOptions));sscan=(...e)=>this.chain(new bi(e,this.commandOptions));strlen=(...e)=>this.chain(new xi(e,this.commandOptions));sunion=(...e)=>this.chain(new vi(e,this.commandOptions));sunionstore=(...e)=>this.chain(new _i(e,this.commandOptions));time=()=>this.chain(new ki(this.commandOptions));touch=(...e)=>this.chain(new Si(e,this.commandOptions));ttl=(...e)=>this.chain(new Ei(e,this.commandOptions));type=(...e)=>this.chain(new Ai(e,this.commandOptions));unlink=(...e)=>this.chain(new An(e,this.commandOptions));zadd=(...e)=>("score"in e[1],this.chain(new Ci([e[0],e[1],...e.slice(2)],this.commandOptions)));xadd=(...e)=>this.chain(new Oi(e,this.commandOptions));xack=(...e)=>this.chain(new On(e,this.commandOptions));xdel=(...e)=>this.chain(new Ri(e,this.commandOptions));xgroup=(...e)=>this.chain(new Kr(e,this.commandOptions));xread=(...e)=>this.chain(new Mr(e,this.commandOptions));xreadgroup=(...e)=>this.chain(new ir(e,this.commandOptions));xinfo=(...e)=>this.chain(new yr(e,this.commandOptions));xlen=(...e)=>this.chain(new wr(e,this.commandOptions));xpending=(...e)=>this.chain(new Tn(e,this.commandOptions));xclaim=(...e)=>this.chain(new ps(e,this.commandOptions));xautoclaim=(...e)=>this.chain(new Ti(e,this.commandOptions));xtrim=(...e)=>this.chain(new sr(e,this.commandOptions));xrange=(...e)=>this.chain(new Ui(e,this.commandOptions));xrevrange=(...e)=>this.chain(new Pi(e,this.commandOptions));zcard=(...e)=>this.chain(new Ii(e,this.commandOptions));zcount=(...e)=>this.chain(new $i(e,this.commandOptions));zincrby=(e,i,l)=>this.chain(new Di([e,i,l],this.commandOptions));zinterstore=(...e)=>this.chain(new Ni(e,this.commandOptions));zlexcount=(...e)=>this.chain(new Rn(e,this.commandOptions));zmscore=(...e)=>this.chain(new Wi(e,this.commandOptions));zpopmax=(...e)=>this.chain(new gr(e,this.commandOptions));zpopmin=(...e)=>this.chain(new Jr(e,this.commandOptions));zrange=(...e)=>this.chain(new Li(e,this.commandOptions));zrank=(e,i)=>this.chain(new br([e,i],this.commandOptions));zrem=(e,...i)=>this.chain(new xr([e,...i],this.commandOptions));zremrangebylex=(...e)=>this.chain(new vr(e,this.commandOptions));zremrangebyrank=(...e)=>this.chain(new _r(e,this.commandOptions));zremrangebyscore=(...e)=>this.chain(new kr(e,this.commandOptions));zrevrank=(e,i)=>this.chain(new At([e,i],this.commandOptions));zscan=(...e)=>this.chain(new Un(e,this.commandOptions));zscore=(e,i)=>this.chain(new ji([e,i],this.commandOptions));zunionstore=(...e)=>this.chain(new Pn(e,this.commandOptions));zunion=(...e)=>this.chain(new Hi(e,this.commandOptions));get json(){return{arrappend:(...e)=>this.chain(new Lt(e,this.commandOptions)),arrindex:(...e)=>this.chain(new Mn(e,this.commandOptions)),arrinsert:(...e)=>this.chain(new hs(e,this.commandOptions)),arrlen:(...e)=>this.chain(new rr(e,this.commandOptions)),arrpop:(...e)=>this.chain(new Xt(e,this.commandOptions)),arrtrim:(...e)=>this.chain(new Ir(e,this.commandOptions)),clear:(...e)=>this.chain(new $r(e,this.commandOptions)),del:(...e)=>this.chain(new Et(e,this.commandOptions)),forget:(...e)=>this.chain(new pr(e,this.commandOptions)),get:(...e)=>this.chain(new nn(e,this.commandOptions)),merge:(...e)=>this.chain(new Yt(e,this.commandOptions)),mget:(...e)=>this.chain(new sn(e,this.commandOptions)),mset:(...e)=>this.chain(new Jn(e,this.commandOptions)),numincrby:(...e)=>this.chain(new an(e,this.commandOptions)),nummultby:(...e)=>this.chain(new jt(e,this.commandOptions)),objkeys:(...e)=>this.chain(new on(e,this.commandOptions)),objlen:(...e)=>this.chain(new zn(e,this.commandOptions)),resp:(...e)=>this.chain(new cn(e,this.commandOptions)),set:(...e)=>this.chain(new Bn(e,this.commandOptions)),strappend:(...e)=>this.chain(new ln(e,this.commandOptions)),strlen:(...e)=>this.chain(new fr(e,this.commandOptions)),toggle:(...e)=>this.chain(new Ht(e,this.commandOptions)),type:(...e)=>this.chain(new mr(e,this.commandOptions))}}},Sr=new Set(["scan","keys","flushdb","flushall","dbsize","hscan","hgetall","hkeys","lrange","sscan","smembers","xrange","xrevrange","zscan","zrange"]),Mt=class{pipelinePromises=new WeakMap;activePipeline=null;indexInCurrentPipeline=0;redis;pipeline;pipelineCounter=0;constructor(e){this.redis=e,this.pipeline=e.pipeline()}async withAutoPipeline(e){let i=this.activePipeline??this.redis.pipeline();this.activePipeline||(this.activePipeline=i,this.indexInCurrentPipeline=0);let l=this.indexInCurrentPipeline++;e(i);let h=this.deferExecution().then(()=>{if(!this.pipelinePromises.has(i)){let U=i.exec({keepErrors:!0});this.pipelineCounter+=1,this.pipelinePromises.set(i,U),this.activePipeline=null}return this.pipelinePromises.get(i)}),_=(await h)[l];if(_.error)throw new Z(`Command failed: ${_.error}`);return _.result}async deferExecution(){await Promise.resolve(),await Promise.resolve()}},ar=class extends u{constructor(e,i){super([],{...i,headers:{Accept:"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"},path:["psubscribe",...e],streamOptions:{isStreaming:!0,onMessage:i?.streamOptions?.onMessage,signal:i?.streamOptions?.signal}})}},Er=class extends EventTarget{subscriptions;client;listeners;constructor(e,i,l=!1){for(let h of(super(),this.client=e,this.subscriptions=new Map,this.listeners=new Map,i))l?this.subscribeToPattern(h):this.subscribeToChannel(h)}subscribeToChannel(e){let i=new AbortController,l=new Mi([e],{streamOptions:{signal:i.signal,onMessage:h=>this.handleMessage(h,!1)}});l.exec(this.client).catch(h=>{h.name!=="AbortError"&&this.dispatchToListeners("error",h)}),this.subscriptions.set(e,{command:l,controller:i,isPattern:!1})}subscribeToPattern(e){let i=new AbortController,l=new ar([e],{streamOptions:{signal:i.signal,onMessage:h=>this.handleMessage(h,!0)}});l.exec(this.client).catch(h=>{h.name!=="AbortError"&&this.dispatchToListeners("error",h)}),this.subscriptions.set(e,{command:l,controller:i,isPattern:!0})}handleMessage(e,i){let l=e.replace(/^data:\s*/,""),h=l.indexOf(","),_=l.indexOf(",",h+1),U=i?l.indexOf(",",_+1):-1;if(h!==-1&&_!==-1){let q=l.slice(0,h);if(i&&q==="pmessage"&&U!==-1){let de=l.slice(h+1,_),_e=l.slice(_+1,U),Me=l.slice(U+1);try{let Se=JSON.parse(Me);this.dispatchToListeners("pmessage",{pattern:de,channel:_e,message:Se}),this.dispatchToListeners(`pmessage:${de}`,{pattern:de,channel:_e,message:Se})}catch(Se){this.dispatchToListeners("error",Error(`Failed to parse message: ${Se}`))}}else{let de=l.slice(h+1,_),_e=l.slice(_+1);try{if(q==="subscribe"||q==="psubscribe"||q==="unsubscribe"||q==="punsubscribe"){let Me=Number.parseInt(_e);this.dispatchToListeners(q,Me)}else{let Me=JSON.parse(_e);this.dispatchToListeners(q,{channel:de,message:Me}),this.dispatchToListeners(`${q}:${de}`,{channel:de,message:Me})}}catch(Me){this.dispatchToListeners("error",Error(`Failed to parse message: ${Me}`))}}}}dispatchToListeners(e,i){let l=this.listeners.get(e);if(l)for(let h of l)h(i)}on(e,i){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)?.add(i)}removeAllListeners(){this.listeners.clear()}async unsubscribe(e){if(e)for(let i of e){let l=this.subscriptions.get(i);if(l){try{l.controller.abort()}catch{}this.subscriptions.delete(i)}}else{for(let i of this.subscriptions.values())try{i.controller.abort()}catch{}this.subscriptions.clear(),this.removeAllListeners()}}getSubscribedChannels(){return[...this.subscriptions.keys()]}},Mi=class extends u{constructor(e,i){super([],{...i,headers:{Accept:"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"},path:["subscribe",...e],streamOptions:{isStreaming:!0,onMessage:i?.streamOptions?.onMessage,signal:i?.streamOptions?.signal}})}},Cn=class{script;sha1;redis;constructor(e,i){this.redis=e,this.script=i,this.sha1="",this.init(i)}async init(e){this.sha1||(this.sha1=await this.digest(e))}async eval(e,i){return await this.init(this.script),await this.redis.eval(this.script,e,i)}async evalsha(e,i){return await this.init(this.script),await this.redis.evalsha(this.sha1,e,i)}async exec(e,i){return await this.init(this.script),await this.redis.evalsha(this.sha1,e,i).catch(async l=>{if(l instanceof Error&&l.message.toLowerCase().includes("noscript"))return await this.redis.eval(this.script,e,i);throw l})}async digest(e){let i=new TextEncoder().encode(e);return[...new Uint8Array(await B.digest("SHA-1",i))].map(l=>l.toString(16).padStart(2,"0")).join("")}},Br=class{script;sha1;redis;constructor(e,i){this.redis=e,this.sha1="",this.script=i,this.init(i)}async init(e){this.sha1||(this.sha1=await this.digest(e))}async evalRo(e,i){return await this.init(this.script),await this.redis.evalRo(this.script,e,i)}async evalshaRo(e,i){return await this.init(this.script),await this.redis.evalshaRo(this.sha1,e,i)}async exec(e,i){return await this.init(this.script),await this.redis.evalshaRo(this.sha1,e,i).catch(async l=>{if(l instanceof Error&&l.message.toLowerCase().includes("noscript"))return await this.redis.evalRo(this.script,e,i);throw l})}async digest(e){let i=new TextEncoder().encode(e);return[...new Uint8Array(await B.digest("SHA-1",i))].map(l=>l.toString(16).padStart(2,"0")).join("")}},Ie=class{client;opts;enableTelemetry;enableAutoPipelining;constructor(e,i){this.client=e,this.opts=i,this.enableTelemetry=i?.enableTelemetry??!0,i?.readYourWrites===!1&&(this.client.readYourWrites=!1),this.enableAutoPipelining=i?.enableAutoPipelining??!0}get readYourWritesSyncToken(){return this.client.upstashSyncToken}set readYourWritesSyncToken(e){this.client.upstashSyncToken=e}get json(){return{arrappend:(...e)=>new Lt(e,this.opts).exec(this.client),arrindex:(...e)=>new Mn(e,this.opts).exec(this.client),arrinsert:(...e)=>new hs(e,this.opts).exec(this.client),arrlen:(...e)=>new rr(e,this.opts).exec(this.client),arrpop:(...e)=>new Xt(e,this.opts).exec(this.client),arrtrim:(...e)=>new Ir(e,this.opts).exec(this.client),clear:(...e)=>new $r(e,this.opts).exec(this.client),del:(...e)=>new Et(e,this.opts).exec(this.client),forget:(...e)=>new pr(e,this.opts).exec(this.client),get:(...e)=>new nn(e,this.opts).exec(this.client),merge:(...e)=>new Yt(e,this.opts).exec(this.client),mget:(...e)=>new sn(e,this.opts).exec(this.client),mset:(...e)=>new Jn(e,this.opts).exec(this.client),numincrby:(...e)=>new an(e,this.opts).exec(this.client),nummultby:(...e)=>new jt(e,this.opts).exec(this.client),objkeys:(...e)=>new on(e,this.opts).exec(this.client),objlen:(...e)=>new zn(e,this.opts).exec(this.client),resp:(...e)=>new cn(e,this.opts).exec(this.client),set:(...e)=>new Bn(e,this.opts).exec(this.client),strappend:(...e)=>new ln(e,this.opts).exec(this.client),strlen:(...e)=>new fr(e,this.opts).exec(this.client),toggle:(...e)=>new Ht(e,this.opts).exec(this.client),type:(...e)=>new mr(e,this.opts).exec(this.client)}}use=e=>{let i=this.client.request.bind(this.client);this.client.request=l=>e(l,i)};addTelemetry=e=>{if(this.enableTelemetry)try{this.client.mergeTelemetry(e)}catch{}};createScript(e,i){return i?.readonly?new Br(this,e):new Cn(this,e)}pipeline=()=>new Ki({client:this.client,commandOptions:this.opts,multiExec:!1});autoPipeline=()=>function e(i,l){return i.autoPipelineExecutor||(i.autoPipelineExecutor=new Mt(i)),new Proxy(i,{get:(h,_)=>{if(_==="pipelineCounter")return h.autoPipelineExecutor.pipelineCounter;if(_==="json")return e(h,!0);let U=_ in h&&!(_ in h.autoPipelineExecutor.pipeline),q=Sr.has(_);return U||q?h[_]:(l?typeof h.autoPipelineExecutor.pipeline.json[_]=="function":typeof h.autoPipelineExecutor.pipeline[_]=="function")?(...de)=>h.autoPipelineExecutor.withAutoPipeline(_e=>{l?_e.json[_](...de):_e[_](...de)}):h.autoPipelineExecutor.pipeline[_]}})}(this);multi=()=>new Ki({client:this.client,commandOptions:this.opts,multiExec:!0});bitfield=(...e)=>new v(e,this.client,this.opts);append=(...e)=>new y(e,this.opts).exec(this.client);bitcount=(...e)=>new m(e,this.opts).exec(this.client);bitop=(e,i,l,...h)=>new A([e,i,l,...h],this.opts).exec(this.client);bitpos=(...e)=>new le(e,this.opts).exec(this.client);copy=(...e)=>new Ee(e,this.opts).exec(this.client);dbsize=()=>new V(this.opts).exec(this.client);decr=(...e)=>new M(e,this.opts).exec(this.client);decrby=(...e)=>new j(e,this.opts).exec(this.client);del=(...e)=>new D(e,this.opts).exec(this.client);echo=(...e)=>new ae(e,this.opts).exec(this.client);evalRo=(...e)=>new Te(e,this.opts).exec(this.client);eval=(...e)=>new We(e,this.opts).exec(this.client);evalshaRo=(...e)=>new Oe(e,this.opts).exec(this.client);evalsha=(...e)=>new st(e,this.opts).exec(this.client);exec=e=>new Ke(e,this.opts).exec(this.client);exists=(...e)=>new vt(e,this.opts).exec(this.client);expire=(...e)=>new Ge(e,this.opts).exec(this.client);expireat=(...e)=>new Ut(e,this.opts).exec(this.client);flushall=e=>new Pt(e,this.opts).exec(this.client);flushdb=(...e)=>new ft(e,this.opts).exec(this.client);geoadd=(...e)=>new Ct(e,this.opts).exec(this.client);geopos=(...e)=>new It(e,this.opts).exec(this.client);geodist=(...e)=>new _t(e,this.opts).exec(this.client);geohash=(...e)=>new Bt(e,this.opts).exec(this.client);geosearch=(...e)=>new P(e,this.opts).exec(this.client);geosearchstore=(...e)=>new $(e,this.opts).exec(this.client);get=(...e)=>new I(e,this.opts).exec(this.client);getbit=(...e)=>new G(e,this.opts).exec(this.client);getdel=(...e)=>new Re(e,this.opts).exec(this.client);getex=(...e)=>new Fe(e,this.opts).exec(this.client);getrange=(...e)=>new xe(e,this.opts).exec(this.client);getset=(e,i)=>new Ce([e,i],this.opts).exec(this.client);hdel=(...e)=>new Ue(e,this.opts).exec(this.client);hexists=(...e)=>new Be(e,this.opts).exec(this.client);hexpire=(...e)=>new kt(e,this.opts).exec(this.client);hexpireat=(...e)=>new $t(e,this.opts).exec(this.client);hexpiretime=(...e)=>new tr(e,this.opts).exec(this.client);httl=(...e)=>new tn(e,this.opts).exec(this.client);hpexpire=(...e)=>new hr(e,this.opts).exec(this.client);hpexpireat=(...e)=>new dt(e,this.opts).exec(this.client);hpexpiretime=(...e)=>new Dt(e,this.opts).exec(this.client);hpttl=(...e)=>new Nt(e,this.opts).exec(this.client);hpersist=(...e)=>new dr(e,this.opts).exec(this.client);hget=(...e)=>new De(e,this.opts).exec(this.client);hgetall=(...e)=>new Le(e,this.opts).exec(this.client);hincrby=(...e)=>new fe(e,this.opts).exec(this.client);hincrbyfloat=(...e)=>new je(e,this.opts).exec(this.client);hkeys=(...e)=>new et(e,this.opts).exec(this.client);hlen=(...e)=>new Ne(e,this.opts).exec(this.client);hmget=(...e)=>new gt(e,this.opts).exec(this.client);hmset=(e,i)=>new ve([e,i],this.opts).exec(this.client);hrandfield=(e,i,l)=>new f([e,i,l],this.opts).exec(this.client);hscan=(...e)=>new ze(e,this.opts).exec(this.client);hset=(e,i)=>new tt([e,i],this.opts).exec(this.client);hsetnx=(e,i,l)=>new bt([e,i,l],this.opts).exec(this.client);hstrlen=(...e)=>new mt(e,this.opts).exec(this.client);hvals=(...e)=>new rn(e,this.opts).exec(this.client);incr=(...e)=>new Qe(e,this.opts).exec(this.client);incrby=(...e)=>new Cr(e,this.opts).exec(this.client);incrbyfloat=(...e)=>new ye(e,this.opts).exec(this.client);keys=(...e)=>new Wt(e,this.opts).exec(this.client);lindex=(...e)=>new qn(e,this.opts).exec(this.client);linsert=(e,i,l,h)=>new Fn([e,i,l,h],this.opts).exec(this.client);llen=(...e)=>new un(e,this.opts).exec(this.client);lmove=(...e)=>new dn(e,this.opts).exec(this.client);lpop=(...e)=>new Dr(e,this.opts).exec(this.client);lmpop=(...e)=>new hn(e,this.opts).exec(this.client);lpos=(...e)=>new Nr(e,this.opts).exec(this.client);lpush=(e,...i)=>new Lr([e,...i],this.opts).exec(this.client);lpushx=(e,...i)=>new Vn([e,...i],this.opts).exec(this.client);lrange=(...e)=>new pn(e,this.opts).exec(this.client);lrem=(e,i,l)=>new fn([e,i,l],this.opts).exec(this.client);lset=(e,i,l)=>new Gn([e,i,l],this.opts).exec(this.client);ltrim=(...e)=>new mn(e,this.opts).exec(this.client);mget=(...e)=>new Xn(e,this.opts).exec(this.client);mset=e=>new Yn([e],this.opts).exec(this.client);msetnx=e=>new yn([e],this.opts).exec(this.client);persist=(...e)=>new wn(e,this.opts).exec(this.client);pexpire=(...e)=>new Zn(e,this.opts).exec(this.client);pexpireat=(...e)=>new Qn(e,this.opts).exec(this.client);pfadd=(...e)=>new gn(e,this.opts).exec(this.client);pfcount=(...e)=>new bn(e,this.opts).exec(this.client);pfmerge=(...e)=>new ei(e,this.opts).exec(this.client);ping=e=>new jr(e,this.opts).exec(this.client);psetex=(e,i,l)=>new Hr([e,i,l],this.opts).exec(this.client);psubscribe=e=>{let i=Array.isArray(e)?e:[e];return new Er(this.client,i,!0)};pttl=(...e)=>new Zt(e,this.opts).exec(this.client);publish=(...e)=>new ti(e,this.opts).exec(this.client);randomkey=()=>new ri().exec(this.client);rename=(...e)=>new ni(e,this.opts).exec(this.client);renamenx=(...e)=>new xn(e,this.opts).exec(this.client);rpop=(...e)=>new ii(e,this.opts).exec(this.client);rpush=(e,...i)=>new si([e,...i],this.opts).exec(this.client);rpushx=(e,...i)=>new ai([e,...i],this.opts).exec(this.client);sadd=(e,i,...l)=>new vn([e,i,...l],this.opts).exec(this.client);scan(e,i){return new _n([e,i],this.opts).exec(this.client)}scard=(...e)=>new Qt(e,this.opts).exec(this.client);scriptExists=(...e)=>new Wr(e,this.opts).exec(this.client);scriptFlush=(...e)=>new oi(e,this.opts).exec(this.client);scriptLoad=(...e)=>new ci(e,this.opts).exec(this.client);sdiff=(...e)=>new kn(e,this.opts).exec(this.client);sdiffstore=(...e)=>new li(e,this.opts).exec(this.client);set=(e,i,l)=>new ui([e,i,l],this.opts).exec(this.client);setbit=(...e)=>new Kt(e,this.opts).exec(this.client);setex=(e,i,l)=>new di([e,i,l],this.opts).exec(this.client);setnx=(e,i)=>new nr([e,i],this.opts).exec(this.client);setrange=(...e)=>new qt(e,this.opts).exec(this.client);sinter=(...e)=>new Sn(e,this.opts).exec(this.client);sinterstore=(...e)=>new hi(e,this.opts).exec(this.client);sismember=(e,i)=>new pi([e,i],this.opts).exec(this.client);smismember=(e,i)=>new mi([e,i],this.opts).exec(this.client);smembers=(...e)=>new fi(e,this.opts).exec(this.client);smove=(e,i,l)=>new yi([e,i,l],this.opts).exec(this.client);spop=(...e)=>new En(e,this.opts).exec(this.client);srandmember=(...e)=>new wi(e,this.opts).exec(this.client);srem=(e,...i)=>new gi([e,...i],this.opts).exec(this.client);sscan=(...e)=>new bi(e,this.opts).exec(this.client);strlen=(...e)=>new xi(e,this.opts).exec(this.client);subscribe=e=>{let i=Array.isArray(e)?e:[e];return new Er(this.client,i)};sunion=(...e)=>new vi(e,this.opts).exec(this.client);sunionstore=(...e)=>new _i(e,this.opts).exec(this.client);time=()=>new ki().exec(this.client);touch=(...e)=>new Si(e,this.opts).exec(this.client);ttl=(...e)=>new Ei(e,this.opts).exec(this.client);type=(...e)=>new Ai(e,this.opts).exec(this.client);unlink=(...e)=>new An(e,this.opts).exec(this.client);xadd=(...e)=>new Oi(e,this.opts).exec(this.client);xack=(...e)=>new On(e,this.opts).exec(this.client);xdel=(...e)=>new Ri(e,this.opts).exec(this.client);xgroup=(...e)=>new Kr(e,this.opts).exec(this.client);xread=(...e)=>new Mr(e,this.opts).exec(this.client);xreadgroup=(...e)=>new ir(e,this.opts).exec(this.client);xinfo=(...e)=>new yr(e,this.opts).exec(this.client);xlen=(...e)=>new wr(e,this.opts).exec(this.client);xpending=(...e)=>new Tn(e,this.opts).exec(this.client);xclaim=(...e)=>new ps(e,this.opts).exec(this.client);xautoclaim=(...e)=>new Ti(e,this.opts).exec(this.client);xtrim=(...e)=>new sr(e,this.opts).exec(this.client);xrange=(...e)=>new Ui(e,this.opts).exec(this.client);xrevrange=(...e)=>new Pi(e,this.opts).exec(this.client);zadd=(...e)=>("score"in e[1],new Ci([e[0],e[1],...e.slice(2)],this.opts).exec(this.client));zcard=(...e)=>new Ii(e,this.opts).exec(this.client);zcount=(...e)=>new $i(e,this.opts).exec(this.client);zdiffstore=(...e)=>new zr(e,this.opts).exec(this.client);zincrby=(e,i,l)=>new Di([e,i,l],this.opts).exec(this.client);zinterstore=(...e)=>new Ni(e,this.opts).exec(this.client);zlexcount=(...e)=>new Rn(e,this.opts).exec(this.client);zmscore=(...e)=>new Wi(e,this.opts).exec(this.client);zpopmax=(...e)=>new gr(e,this.opts).exec(this.client);zpopmin=(...e)=>new Jr(e,this.opts).exec(this.client);zrange=(...e)=>new Li(e,this.opts).exec(this.client);zrank=(e,i)=>new br([e,i],this.opts).exec(this.client);zrem=(e,...i)=>new xr([e,...i],this.opts).exec(this.client);zremrangebylex=(...e)=>new vr(e,this.opts).exec(this.client);zremrangebyrank=(...e)=>new _r(e,this.opts).exec(this.client);zremrangebyscore=(...e)=>new kr(e,this.opts).exec(this.client);zrevrank=(e,i)=>new At([e,i],this.opts).exec(this.client);zscan=(...e)=>new Un(e,this.opts).exec(this.client);zscore=(e,i)=>new ji([e,i],this.opts).exec(this.client);zunion=(...e)=>new Hi(e,this.opts).exec(this.client);zunionstore=(...e)=>new Pn(e,this.opts).exec(this.client)},Ji=L(25356).Buffer;typeof atob>"u"&&(Va.atob=e=>Ji.from(e,"base64").toString("utf8"));var er=class Fa extends Ie{constructor(i){if("request"in i)return void super(i);if(i.url?(i.url.startsWith(" ")||i.url.endsWith(" ")||/\r|\n/.test(i.url))&&console.warn("[Upstash Redis] The redis url contains whitespace or newline, which can cause errors!"):console.warn("[Upstash Redis] The 'url' property is missing or undefined in your Redis config."),i.token?(i.token.startsWith(" ")||i.token.endsWith(" ")||/\r|\n/.test(i.token))&&console.warn("[Upstash Redis] The redis token contains whitespace or newline, which can cause errors!"):console.warn("[Upstash Redis] The 'token' property is missing or undefined in your Redis config."),super(new R({baseUrl:i.url,retry:i.retry,headers:{authorization:`Bearer ${i.token}`},agent:i.agent,responseEncoding:i.responseEncoding,cache:i.cache??"no-store",signal:i.signal,keepAlive:i.keepAlive,readYourWrites:i.readYourWrites}),{automaticDeserialization:i.automaticDeserialization,enableTelemetry:!process.env.UPSTASH_DISABLE_TELEMETRY,latencyLogging:i.latencyLogging,enableAutoPipelining:i.enableAutoPipelining}),this.addTelemetry({runtime:"edge-light",platform:process.env.VERCEL?"vercel":process.env.AWS_REGION?"aws":"unknown",sdk:"@upstash/redis@v1.35.1"}),this.enableAutoPipelining)return this.autoPipeline()}static fromEnv(i){if(process.env===void 0)throw TypeError('[Upstash Redis] Unable to get environment variables, `process.env` is undefined. If you are deploying to cloudflare, please import from "@upstash/redis/cloudflare" instead');let l=process.env.UPSTASH_REDIS_REST_URL||process.env.KV_REST_API_URL;l||console.warn("[Upstash Redis] Unable to find environment variable: `UPSTASH_REDIS_REST_URL`");let h=process.env.UPSTASH_REDIS_REST_TOKEN||process.env.KV_REST_API_TOKEN;return h||console.warn("[Upstash Redis] Unable to find environment variable: `UPSTASH_REDIS_REST_TOKEN`"),new Fa({...i,url:l,token:h})}}},Xe.__chunk_10028=(qe,be,L)=>{"use strict";L.d(be,{hr:()=>re});let B=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,ie={baseKeyPrefix:"",accountKeyPrefix:"user:account:",accountByUserIdPrefix:"user:account:by-user-id:",emailKeyPrefix:"user:email:",sessionKeyPrefix:"user:session:",sessionByUserIdKeyPrefix:"user:session:by-user-id:",userKeyPrefix:"user:",verificationTokenKeyPrefix:"user:token:"};function Z(z){return Object.entries(z).reduce((ne,[K,R])=>(ne[K]=typeof R=="string"&&B.test(R)&&!isNaN(Date.parse(R))?new Date(R):R,ne),{})}function re(z,ne={}){let K={...ie,...ne},{baseKeyPrefix:R}=K,pe=R+K.accountKeyPrefix,N=R+K.accountByUserIdPrefix,S=R+K.emailKeyPrefix,E=R+K.sessionKeyPrefix,u=R+K.sessionByUserIdKeyPrefix,f=R+K.userKeyPrefix,y=R+K.verificationTokenKeyPrefix,m=async(j,D)=>await z.set(j,JSON.stringify(D)),v=async(j,D)=>{let ae=pe+j;return await m(ae,D),await z.set(N+D.userId,ae),D},A=async j=>{let D=await z.get(pe+j);return D?Z(D):null},le=async(j,D)=>{let ae=E+j;return await m(ae,D),await z.set(u+D.userId,ae),D},Ee=async j=>{let D=await z.get(E+j);return D?Z(D):null},V=async(j,D)=>(await m(f+j,D),await z.set(`${S}${D.email}`,j),D),M=async j=>{let D=await z.get(f+j);return D?Z(D):null};return{async createUser(j){let D=crypto.randomUUID();return await V(D,{...j,id:D})},getUser:M,async getUserByEmail(j){let D=await z.get(S+j);return D?await M(D):null},async getUserByAccount(j){let D=await A(`${j.provider}:${j.providerAccountId}`);return D?await M(D.userId):null},async updateUser(j){let D=j.id,ae=await M(D);return await V(D,{...ae,...j})},async linkAccount(j){let D=`${j.provider}:${j.providerAccountId}`;return await v(D,{...j,id:D})},createSession:j=>le(j.sessionToken,j),async getSessionAndUser(j){let D=await Ee(j);if(!D)return null;let ae=await M(D.userId);return ae?{session:D,user:ae}:null},async updateSession(j){let D=await Ee(j.sessionToken);return D?await le(j.sessionToken,{...D,...j}):null},async deleteSession(j){await z.del(E+j)},createVerificationToken:async j=>(await m(y+j.identifier+":"+j.token,j),j),async useVerificationToken(j){let D=y+j.identifier+":"+j.token,ae=await z.get(D);return ae?(await z.del(D),Z(ae)):null},async unlinkAccount(j){let D=`${j.provider}:${j.providerAccountId}`,ae=await A(D);if(!ae)return;let Te=`${pe}${D}`;await z.del(Te,`${N} + ${ae.userId}`)},async deleteUser(j){let D=await M(j);if(!D)return;let ae=N+j,Te=await z.get(ae),We=u+j,Oe=await z.get(We);await z.del(f+j,`${S}${D.email}`,Te,ae,Oe,We)}}}},Xe.__chunk_9080=qe=>{"use strict";var be=Object.defineProperty,L=Object.getOwnPropertyDescriptor,B=Object.getOwnPropertyNames,ie=Object.prototype.hasOwnProperty,Z={};function re(S){var E;let u=["path"in S&&S.path&&`Path=${S.path}`,"expires"in S&&(S.expires||S.expires===0)&&`Expires=${(typeof S.expires=="number"?new Date(S.expires):S.expires).toUTCString()}`,"maxAge"in S&&typeof S.maxAge=="number"&&`Max-Age=${S.maxAge}`,"domain"in S&&S.domain&&`Domain=${S.domain}`,"secure"in S&&S.secure&&"Secure","httpOnly"in S&&S.httpOnly&&"HttpOnly","sameSite"in S&&S.sameSite&&`SameSite=${S.sameSite}`,"partitioned"in S&&S.partitioned&&"Partitioned","priority"in S&&S.priority&&`Priority=${S.priority}`].filter(Boolean),f=`${S.name}=${encodeURIComponent((E=S.value)!=null?E:"")}`;return u.length===0?f:`${f}; ${u.join("; ")}`}function z(S){let E=new Map;for(let u of S.split(/; */)){if(!u)continue;let f=u.indexOf("=");if(f===-1){E.set(u,"true");continue}let[y,m]=[u.slice(0,f),u.slice(f+1)];try{E.set(y,decodeURIComponent(m??"true"))}catch{}}return E}function ne(S){if(!S)return;let[[E,u],...f]=z(S),{domain:y,expires:m,httponly:v,maxage:A,path:le,samesite:Ee,secure:V,partitioned:M,priority:j}=Object.fromEntries(f.map(([We,Oe])=>[We.toLowerCase().replace(/-/g,""),Oe]));{var D,ae,Te={name:E,value:decodeURIComponent(u),domain:y,...m&&{expires:new Date(m)},...v&&{httpOnly:!0},...typeof A=="string"&&{maxAge:Number(A)},path:le,...Ee&&{sameSite:K.includes(D=(D=Ee).toLowerCase())?D:void 0},...V&&{secure:!0},...j&&{priority:R.includes(ae=(ae=j).toLowerCase())?ae:void 0},...M&&{partitioned:!0}};let We={};for(let Oe in Te)Te[Oe]&&(We[Oe]=Te[Oe]);return We}}((S,E)=>{for(var u in E)be(S,u,{get:E[u],enumerable:!0})})(Z,{RequestCookies:()=>pe,ResponseCookies:()=>N,parseCookie:()=>z,parseSetCookie:()=>ne,stringifyCookie:()=>re}),qe.exports=((S,E,u,f)=>{if(E&&typeof E=="object"||typeof E=="function")for(let y of B(E))ie.call(S,y)||y===u||be(S,y,{get:()=>E[y],enumerable:!(f=L(E,y))||f.enumerable});return S})(be({},"__esModule",{value:!0}),Z);var K=["strict","lax","none"],R=["low","medium","high"],pe=class{constructor(S){this._parsed=new Map,this._headers=S;let E=S.get("cookie");if(E)for(let[u,f]of z(E))this._parsed.set(u,{name:u,value:f})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...S){let E=typeof S[0]=="string"?S[0]:S[0].name;return this._parsed.get(E)}getAll(...S){var E;let u=Array.from(this._parsed);if(!S.length)return u.map(([y,m])=>m);let f=typeof S[0]=="string"?S[0]:(E=S[0])==null?void 0:E.name;return u.filter(([y])=>y===f).map(([y,m])=>m)}has(S){return this._parsed.has(S)}set(...S){let[E,u]=S.length===1?[S[0].name,S[0].value]:S,f=this._parsed;return f.set(E,{name:E,value:u}),this._headers.set("cookie",Array.from(f).map(([y,m])=>re(m)).join("; ")),this}delete(S){let E=this._parsed,u=Array.isArray(S)?S.map(f=>E.delete(f)):E.delete(S);return this._headers.set("cookie",Array.from(E).map(([f,y])=>re(y)).join("; ")),u}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(S=>`${S.name}=${encodeURIComponent(S.value)}`).join("; ")}},N=class{constructor(S){var E,u,f;this._parsed=new Map,this._headers=S;let y=(f=(u=(E=S.getSetCookie)==null?void 0:E.call(S))!=null?u:S.get("set-cookie"))!=null?f:[];for(let m of Array.isArray(y)?y:function(v){if(!v)return[];var A,le,Ee,V,M,j=[],D=0;function ae(){for(;D<v.length&&/\s/.test(v.charAt(D));)D+=1;return D<v.length}for(;D<v.length;){for(A=D,M=!1;ae();)if((le=v.charAt(D))===","){for(Ee=D,D+=1,ae(),V=D;D<v.length&&(le=v.charAt(D))!=="="&&le!==";"&&le!==",";)D+=1;D<v.length&&v.charAt(D)==="="?(M=!0,D=V,j.push(v.substring(A,Ee)),A=D):D=Ee+1}else D+=1;(!M||D>=v.length)&&j.push(v.substring(A,v.length))}return j}(y)){let v=ne(m);v&&this._parsed.set(v.name,v)}}get(...S){let E=typeof S[0]=="string"?S[0]:S[0].name;return this._parsed.get(E)}getAll(...S){var E;let u=Array.from(this._parsed.values());if(!S.length)return u;let f=typeof S[0]=="string"?S[0]:(E=S[0])==null?void 0:E.name;return u.filter(y=>y.name===f)}has(S){return this._parsed.has(S)}set(...S){let[E,u,f]=S.length===1?[S[0].name,S[0].value,S[0]]:S,y=this._parsed;return y.set(E,function(m={name:"",value:""}){return typeof m.expires=="number"&&(m.expires=new Date(m.expires)),m.maxAge&&(m.expires=new Date(Date.now()+1e3*m.maxAge)),(m.path===null||m.path===void 0)&&(m.path="/"),m}({name:E,value:u,...f})),function(m,v){for(let[,A]of(v.delete("set-cookie"),m)){let le=re(A);v.append("set-cookie",le)}}(y,this._headers),this}delete(...S){let[E,u]=typeof S[0]=="string"?[S[0]]:[S[0].name,S[0]];return this.set({...u,name:E,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(re).join("; ")}}},Xe);export{Nc as __getNamedExports};
